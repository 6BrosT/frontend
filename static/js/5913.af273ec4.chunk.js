"use strict";(self.webpackChunkfrontend_app=self.webpackChunkfrontend_app||[]).push([[5913],{27013:(e,t,o)=>{o.d(t,{N:()=>r,Z:()=>c});o(47313);var a=o(42832),n=o(36373),s=o(99881),i=o(46417);let r=function(e){return e.Success="success",e.INFO="info",e.Warning="warning",e.Error="error",e}({});function c(e){let{open:t,setOpen:o,content:r,type:c,anchorOrigin:d}=e;const l=e=>{"clickaway"!==e&&o(!1)},u="right";return(0,i.jsx)(a.Z,{spacing:2,sx:{width:"100%"},children:(0,i.jsx)(n.Z,{open:t,autoHideDuration:3e3,onClose:l,anchorOrigin:d||{vertical:"top",horizontal:u},children:(0,i.jsx)(s.Z,{onClose:l,severity:c,children:r})},"top"+u)})}},33060:(e,t,o)=>{o.d(t,{Z:()=>r});var a,n=o(30168),s=o(17592),i=o(61113);const r=(0,s.ZP)(i.Z)(a||(a=(0,n.Z)(['\n  font-family: "Montserrat";\n  font-style: ',";\n  font-weight: 600;\n  font-size: 24px;\n  line-height: 32px;\n  letter-spacing: -0.03em;\n  color: ",";\n  @media only screen and (max-width: 767px) {\n    font-size: ",";\n    line-height: ",";\n  }\n"])),(e=>e.fontStyle||"normal"),(e=>"var(".concat(e.colorname||"--eerie-black",")")),(e=>e.fontSizeMobile||"22px"),(e=>e.$lineHeightMobile||"32px"))},51928:(e,t,o)=>{o.d(t,{C:()=>s,T:()=>n});var a=o(65537);const n=a.I0.withTypes(),s=a.v9.withTypes()},38556:(e,t,o)=>{o.d(t,{Z:()=>s});var a=o(47313);function n(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}function s(){const[e,t]=(0,a.useState)(n());return(0,a.useEffect)((()=>{function e(){t(n())}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e}},45913:(e,t,o)=>{o.r(t),o.d(t,{default:()=>V});var a=o(90200);const n="styles_root__eS-7P",s="styles_container__sFK6V",i="styles_formBody__-9+g9",r="styles_drawerBody__Hon04",c="styles_drawerFieldContainer__Ko6dW",d="styles_drawerTextTitle__-M6ad";var l=o(9019),u=o(79536),m=o(62481),x=o(46923),p=o(19860),h=o(8479),v=o(47313),g=o(47477),f=o(47056),y=o(38556),b=o(31845),j=o(33060),Z=o(89790),w=o(54045),S=o(58467),E=o(75590),_=o(90469),I=o(88999),C=o(91861),k=o(99221),D=o(51928),O=o(40309),T=o(78832),U=o(70058),R=o(38515),M=o(42766),P=o(1065),A=o(83703),F=o(80007),z=o(28538),N=o(62968),q=o(70816),B=o.n(q),H=o(74512),L=o(8344),W=o(65537),X=o(4271),K=o(27013),Y=o(46417);const V=()=>{const e=(0,W.I0)(),t=(0,S.UO)().examId,o=(0,D.C)((e=>e.takeExam.examId)),q=(0,D.C)((e=>e.takeExam.startAt)),V=(0,D.C)((e=>e.takeExam.examData)),$=new Date(V.timeClose),[G,Q]=v.useState(!1),[J,ee]=v.useState(""),[te,oe]=v.useState(K.N.Success),ae=(0,S.UO)().courseId,ne=(0,p.Z)(),se=(0,S.s0)(),{t:ie}=(0,E.$G)(),[re,ce]=v.useState((()=>{if(!q)return 0;return new Date(q).getTime()+1e3*((null===V||void 0===V?void 0:V.timeLimit)||0)})),[de,le]=v.useState(0),ue=v.useRef(null),{height:me}=(0,g.Z)({ref:ue}),[xe,pe]=v.useState(!0),{width:he}=(0,y.Z)(),[ve,ge]=v.useState(he<1080?"temporary":"permanent");v.useEffect((()=>{ge(he<1080?"temporary":"persistent")}),[he]);const[fe,ye]=v.useState(0),[be,je]=v.useState(0),[Ze,we]=v.useState(0);v.useEffect((()=>{const e=setInterval((()=>(e=>{if(!e)return;const o=B()(e).diff(B()().utc(),"milliseconds");le(o),o<0?"AUTOSUBMIT"===V.overdueHanding?Ce():se(_._.student.exam.detail.replace(":courseId",ae||V.courseId).replace(":examId",t||V.id)):(ye(Math.floor(o/36e5%24)),je(Math.floor(o/1e3/60%60)),we(Math.floor(o/1e3%60)))})(re)),1e3);return()=>clearInterval(e)}),[re]);const Se=(0,D.C)((e=>e.takeExam.questionList)),Ee=e=>{const o=(0,N.Z)(e.questionData.id);ae&&t&&se("".concat(_._.student.exam.take.replace(":courseId",ae).replace(":examId",t),"?page=").concat(e.questionData.page,"#").concat(o),{replace:!0})},[_e,Ie]=v.useState(!0),Ce=async()=>{const a=new Date((new Date).toLocaleString("en",{timeZone:"Asia/Bangkok"})).toISOString();e((0,L.K4)(!0));const n=Se.map((e=>{var t;return{questionId:e.questionData.id,content:e.content,numFile:(null===(t=e.files)||void 0===t?void 0:t.length)||0}})),s=new Date(new Date(q||"").toLocaleString("en",{timeZone:"Asia/Bangkok"})).toISOString();console.log("start at time",new Date(s));const i={examId:t||o,userId:"2d7ed5a0-fb21-4927-9a25-647c17d29668",questions:n,startTime:s,submitTime:a};H.O.submitExam(i).then((o=>{console.log("response",o),e((0,X.Yq)()),ee("N\u1ed9p b\xe0i th\xe0nh c\xf4ng"),oe(K.N.Success),Q(!0),se(_._.student.exam.review.replace(":courseId",ae||V.courseId).replace(":examId",t||V.id).replace(":submissionId",o.examSubmissionId))})).catch((e=>{ee("N\u1ed9p b\xe0i th\u1ea5t b\u1ea1i"),oe(K.N.Error),Q(!0)})).finally((()=>{e((0,L.K4)(!1))}))};v.useEffect((()=>{}),[]),v.useEffect((()=>{}),[de]);const ke=[ie("common_january"),ie("common_february"),ie("common_march"),ie("common_april"),ie("common_may"),ie("common_june"),ie("common_july"),ie("common_august"),ie("common_september"),ie("common_october"),ie("common_november"),ie("common_december")],De=[ie("common_sunday"),ie("common_monday"),ie("common_tuesday"),ie("common_wednesday"),ie("common_thursday"),ie("common_friday"),ie("common_saturday")];return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsxs)(l.ZP,{className:n,children:[(0,Y.jsx)(K.Z,{open:G,setOpen:Q,content:J,type:te,anchorOrigin:{vertical:"bottom",horizontal:"left"}}),(0,Y.jsx)(a.Z,{ref:ue}),(0,Y.jsxs)(u.Z,{className:s,style:{marginTop:"".concat(me,"px")},children:[(0,Y.jsx)(m.ZP,{}),(0,Y.jsx)(h.Z,{onClick:()=>{pe(!0)},sx:{...xe&&{display:"none"},position:"fixed",top:"".concat(me+10,"px"),right:0,height:"44px",width:"49px"},size:"sm",endDecorator:(0,Y.jsx)(f.Z,{color:"action"}),variant:"soft"}),(0,Y.jsxs)(u.Z,{className:i,width:"100%",children:[(0,Y.jsx)(b.Z,{fontWeight:"500",children:V.name}),(0,Y.jsx)(j.Z,{children:(0,Y.jsx)("div",{dangerouslySetInnerHTML:{__html:V.intro}})}),(0,Y.jsx)(h.Z,{onClick:()=>{ae&&t&&se(_._.student.exam.take.replace(":courseId",ae).replace(":examId",t))},startDecorator:(0,Y.jsx)(Z.Z,{fontSize:"small"}),color:"neutral",variant:"soft",size:"md",sx:{width:"fit-content"},children:ie("common_back")}),(0,Y.jsx)(u.Z,{sx:{position:"sticky",top:"74px",zIndex:"1020"},children:(0,Y.jsx)(u.Z,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:(0,Y.jsxs)(u.Z,{sx:{padding:"8px 9px 8px 10px",borderRadius:"40px",display:"flex",alignItems:"center",color:"#005742",backgroundColor:"#EAF4DD",fontWeight:"500",position:"sticky",top:"0"},children:[(0,Y.jsx)(I.Z,{fontSize:"medium",sx:{marginRight:"0.5rem !important"}}),_e?"C\xf2n l\u1ea1i: ".concat(fe<10?"0".concat(fe):fe,":").concat(be<10?"0".concat(be):be,":").concat(Ze<10?"0".concat(Ze):Ze):"Th\u1eddi gian c\xf2n l\u1ea1i",(0,Y.jsx)(h.Z,{onClick:()=>{Ie(!_e)},variant:"soft",color:"neutral",sx:{borderRadius:"40px",marginLeft:"16px",border:"1px solid #bce3da"},children:_e?"\u1ea8n":"Hi\u1ec7n"})]})})}),(0,Y.jsxs)(u.Z,{sx:{borderRadius:"5px",border:"1px solid #E1E1E1",padding:"20px"},children:[(0,Y.jsx)(k.Z,{children:"Temp b\u1ea3ng t\xf3m t\u1eaft b\xe0i ki\u1ec3m tra"}),(0,Y.jsxs)(A.Z,{size:"lg",hoverRow:!0,sx:{"& tbody tr:hover":{backgroundColor:"#f3f3f3",cursor:"pointer"}},children:[(0,Y.jsx)("thead",{children:(0,Y.jsx)("tr",{children:[{value:"C\xe2u h\u1ecfi",width:"40%"},{value:"Tr\u1ea1ng th\xe1i",width:""}].map(((e,t)=>(0,Y.jsx)("th",{style:{width:e.width,backgroundColor:"white",borderBottom:"2px solid rgb(128,128,128)"},children:(0,Y.jsx)(F.Z,{fontSize:"12px",color:"#525151",fontWeight:"500",children:e.value})},t)))})}),(0,Y.jsx)("tbody",{children:Se.map(((e,t)=>(0,Y.jsxs)("tr",{onClick:()=>Ee(e),children:[(0,Y.jsx)("td",{children:(0,Y.jsx)(u.Z,{sx:{backgroundColor:"#EAF4DD",borderRadius:"16px",width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #e8e0e0"},children:(0,Y.jsx)(F.Z,{fontSize:"12px",color:"#212121",fontWeight:"400",children:t+1})})}),(0,Y.jsx)("td",{children:(0,Y.jsx)(z.Z,{sx:{backgroundColor:e.answered?"#FDF6EA":"#e6eaf7",borderRadius:"4px",border:"1px solid #e8e0e0"},children:(0,Y.jsx)(F.Z,{fontSize:"14px",color:"#212121",fontWeight:"400",children:e.answered?ie("common_answer"):ie("common_not_answered")})})})]},t)))})]})]}),(0,Y.jsx)(F.Z,{marginTop:"20px",fontSize:"14px",color:"#212121",fontWeight:"400",children:ie("submit_before",{weekDay:De[$.getDay()],day:$.getDate(),month:ke[$.getMonth()],year:$.getFullYear(),time:"".concat($.getHours()<10?"0".concat($.getHours()):$.getHours(),":").concat($.getMinutes()<10?"0".concat($.getMinutes()):$.getMinutes())})}),(0,Y.jsx)(h.Z,{sx:{width:"fit-content"},onClick:Ce,children:"N\u1ed9p b\xe0i v\xe0 ho\xe0n th\xe0nh"})]}),(0,Y.jsxs)(x.ZP,{sx:{display:xe?"block":"none",width:370,flexShrink:0,"& .MuiDrawer-paper":{borderTop:"1px solid #E1E1E1",borderRadius:"12px 0px",width:370,top:"".concat(me+10,"px ")}},variant:ve,anchor:"right",open:xe,children:[(0,Y.jsx)(u.Z,{sx:{display:"flex",justifyContent:"flex-end",padding:1},children:(0,Y.jsx)(C.ZP,{onClick:()=>{pe(!1)},variant:"soft",children:"rtl"===ne.direction?(0,Y.jsx)(Z.Z,{}):(0,Y.jsx)(w.Z,{})})}),(0,Y.jsx)(u.Z,{className:r,children:(0,Y.jsx)(u.Z,{className:c,children:(0,Y.jsx)(l.ZP,{container:!0,maxHeight:"80dvh",overflow:"auto",rowSpacing:3,children:(0,Y.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,Y.jsx)(k.Z,{className:d,children:ie("take_exam_question_navigation_title")}),(0,Y.jsx)(l.ZP,{container:!0,spacing:1,marginBottom:"10px",sx:{maxHeight:"30dvh"},children:Se.map(((e,t)=>(0,Y.jsx)(l.ZP,{item:!0,marginTop:"16px",marginRight:"8px",children:(0,Y.jsx)(O.Z,{color:"neutral",variant:"outlined",badgeContent:"ESSAY"===e.questionData.qtype?(0,Y.jsx)(T.Z,{sx:{width:"15px",height:"15px"}}):"SHORT_ANSWER"===e.questionData.qtype?(0,Y.jsx)(R.Z,{sx:{width:"15px",height:"15px"}}):"TRUE_FALSE"===e.questionData.qtype?(0,Y.jsx)(U.Z,{sx:{width:"15px",height:"15px"}}):(0,Y.jsx)(M.Z,{sx:{width:"15px",height:"15px"}}),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,Y.jsx)(O.Z,{color:"neutral",variant:"outlined",badgeContent:(0,Y.jsx)(P.Z,{sx:{width:"10px",height:"15px",color:"red"}}),anchorOrigin:{vertical:"top",horizontal:"right"},invisible:!e.flag,children:(0,Y.jsx)(h.Z,{variant:"outlined",sx:{borderRadius:"1000px",width:"40px",height:"40px",backgroundColor:e.answered?"#e1e1e1":""},onClick:()=>Ee(e),children:Se.findIndex((t=>t.questionData.id===e.questionData.id))+1})})})},t)))})]})})})})]})]})]})})}},74512:(e,t,o)=>{o.d(t,{O:()=>i});var a=o(35662),n=o(66010);const s="http://codedynamite.site";class i{static async getExamsByCourseId(e){try{const t=await a.Z.get("".concat(s).concat(n.b.COURSE.EXAM.DEFAULT.replace(":courseId",e)));if(200===t.status)return Promise.resolve(t.data)}catch(l){var t,o,i,r,c,d;return console.error("Failed to fetch exams",l),Promise.reject({code:(null===(t=l.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.code)||503,status:(null===(i=l.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.status)||"Service Unavailable",message:(null===(c=l.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||l.message})}}static async getExamById(e){try{const t=await a.Z.get("".concat(s).concat(n.b.COURSE.EXAM.GET_BY_ID.replace(":id",e)));if(200===t.status)return Promise.resolve(t.data)}catch(l){var t,o,i,r,c,d;return console.error("Failed to fetch exam",l),Promise.reject({code:(null===(t=l.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.code)||503,status:(null===(i=l.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.status)||"Service Unavailable",message:(null===(c=l.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||l.message})}}static async getExamQuestionById(e,t){try{const o=null!==t?t:"",i=await a.Z.get("".concat(s).concat(n.b.COURSE.EXAM_QUESTION.DEFAULT.replace(":examId",e),"?currentPage=").concat(o));if(200===i.status)return Promise.resolve(i.data)}catch(u){var o,i,r,c,d,l;return console.error("Failed to fetch exam",u),Promise.reject({code:(null===(o=u.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.code)||503,status:(null===(r=u.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.status)||"Service Unavailable",message:(null===(d=u.response)||void 0===d||null===(l=d.data)||void 0===l?void 0:l.message)||u.message})}}static async getOverviewsByExamId(e){try{const t=await a.Z.get("".concat(s).concat(n.b.COURSE.EXAM.OVERVIEW.replace(":id",e)));if(200===t.status)return Promise.resolve(t.data)}catch(l){var t,o,i,r,c,d;return console.error("Failed to fetch exam overview",l),Promise.reject({code:(null===(t=l.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.code)||503,status:(null===(i=l.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.status)||"Service Unavailable",message:(null===(c=l.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||l.message})}}static async createExam(e){try{const t=await a.Z.post("".concat(s).concat(n.b.COURSE.EXAM.CREATE),e);if(200===t.status)return t.data}catch(l){var t,o,i,r,c,d;return console.error("Failed to create exam",l),Promise.reject({code:(null===(t=l.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.code)||503,status:(null===(i=l.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.status)||"Service Unavailable",message:(null===(c=l.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||l.message})}}static async startExam(e){try{const t=await a.Z.post("".concat(s).concat(n.b.COURSE.EXAM.START),e);if(200===t.status)return t.data}catch(l){var t,o,i,r,c,d;return console.error("Failed to start exam",l),Promise.reject({code:(null===(t=l.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.code)||503,status:(null===(i=l.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.status)||"Service Unavailable",message:(null===(c=l.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||l.message})}}static async endExam(e){try{const t=await a.Z.post("".concat(s).concat(n.b.COURSE.EXAM.END),e);if(200===t.status)return t.data}catch(l){var t,o,i,r,c,d;return console.error("Failed to end exam",l),Promise.reject({code:(null===(t=l.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.code)||503,status:(null===(i=l.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.status)||"Service Unavailable",message:(null===(c=l.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||l.message})}}static async submitExam(e){try{const t=await a.Z.post("".concat(s).concat(n.b.COURSE.EXAM.SUBMIT),e);if(200===t.status)return t.data}catch(l){var t,o,i,r,c,d;return console.error("Failed to submit exam",l),Promise.reject({code:(null===(t=l.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.code)||503,status:(null===(i=l.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.status)||"Service Unavailable",message:(null===(c=l.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||l.message})}}static async getExamSubmissionById(e){try{const t=await a.Z.get("".concat(s).concat(n.b.COURSE.EXAM.SUBMISSION.replace(":id",e)));if(200===t.status)return Promise.resolve(t.data)}catch(l){var t,o,i,r,c,d;return console.error("Failed to fetch exam submission",l),Promise.reject({code:(null===(t=l.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.code)||503,status:(null===(i=l.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.status)||"Service Unavailable",message:(null===(c=l.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||l.message})}}}},62968:(e,t,o)=>{o.d(t,{Z:()=>n});var a=o(37222);function n(e){const t=Array.from((0,a.Z)(e));return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}}}]);