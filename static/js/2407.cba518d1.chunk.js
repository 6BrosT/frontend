"use strict";(self.webpackChunkfrontend_app=self.webpackChunkfrontend_app||[]).push([[2407],{12407:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var s=n(47313),o=n(79536);const l={searchContainer:"styles_searchContainer__z7WgP",searchInput:"styles_searchInput__mm4w3",containerDetailSolution:"styles_containerDetailSolution__et12E",stickyBack:"styles_stickyBack__ageI3",backButton:"styles_backButton__Q57nc",backIcon:"styles_backIcon__k3QZq",solutionContainer:"styles_solutionContainer__Q2Rdo",userInfo:"styles_userInfo__xcSXt",imgAvatar:"styles_imgAvatar__HR+9r",nameInfoContainer:"styles_nameInfoContainer__7PYuA",solutionButton:"styles_solutionButton__KztC8",solutionIcon:"styles_solutionIcon__-N-Sw",upVote:"styles_upVote__SaJ5r",view:"styles_view__WFl7f",calendar:"styles_calendar__m57yT",tagLanguageSolution:"styles_tagLanguageSolution__YWOMZ",item:"styles_item__6FBz8",commentContainer:"styles_commentContainer__rmZhz",commentTitleContainer:"styles_commentTitleContainer__bpTPv",commentTitle:"styles_commentTitle__-FJn0",commentIcon:"styles_commentIcon__RzMxA",commentBox:"styles_commentBox__toj2a",textArea:"styles_textArea__SxuVi",commentButton:"styles_commentButton__Nw4-c",commentList:"styles_commentList__tligR",commentItem:"styles_commentItem__6r0wy",commentInfoUser:"styles_commentInfoUser__TEVE7",commentContent:"styles_commentContent__jgLGD",commentName:"styles_commentName__GTHZK",commentText:"styles_commentText__pdg+v",commentAction:"styles_commentAction__RCa8g",reply:"styles_reply__IPxig",stickyUpvote:"styles_stickyUpvote__mbKRu",upvoteButton:"styles_upvoteButton__afLv3",markdown:"styles_markdown__OBpHz"};var a=n(14647),c=n(19536),i=n(48119),r=n(16759),m=n(51405),_=n(42832),d=n(85281),u=n(74312),h=n(80007),v=n(38037),x=n(10259),N=n(39276),j=n(627),y=n(2126),Z=n(11001),g=n(33223),f=n(19187),b=n(47477),p=n(75590),k=n(51928),I=n(8344),C=n(60191),S=n(23885),w=n(15162),T=n(75627),B=n(62563),A=n(21933),L=n(22665),P=n(46417);const R=(e,t)=>{try{return void 0===e?e:(0,w.J$)(e,t)}catch(n){return console.error(n),e}};function z(e){var t,n,w,z,U,M,D,E,G,F,H,K,V,O,J;let{handleSolutionDetail:Q,selectedSolutionId:W}=e;const{t:X}=(0,p.$G)(),q=A.Ry().shape({comment:A.Z_().required("".concat(X("detail_problem_discussion_detail_comment")," ").concat(X("common_cannot_be_blank"))).test("not-blank","".concat(X("detail_problem_discussion_detail_comment")," ").concat(X("common_cannot_be_blank")),(e=>void 0!==e&&e.trim().length>0))}),Y=(0,k.T)(),[$,ee]=(0,s.useState)(null),[te,ne]=(0,s.useState)(!1),[se,oe]=(0,s.useState)(0),[le,ae]=(0,s.useState)(1),[ce,ie]=(0,s.useState)(0),[re,me]=(0,s.useState)([]),[_e,de]=(0,s.useState)(!0),[ue,he]=s.useState(null),ve=Boolean(ue),xe=()=>{he(null)};(0,s.useEffect)((()=>{W&&(Y((0,I.K4)(!0)),C.T.getDetailSharedSolution(W).then((e=>{ee(e)})).catch((e=>console.log(e))).finally((()=>{Y((0,I.K4)(!1))})))}),[]),(0,s.useEffect)((()=>{ge()}),[_e,se]);const{register:Ne,handleSubmit:je,watch:ye,formState:{errors:Ze}}=(0,T.cI)({resolver:(0,B.X)(q)}),ge=()=>{W&&(ne(!0),C.T.getRootComments(W,se,10,_e).then((e=>{ae(e.totalPages),ie(e.totalItems),me(e.comments)})).catch((e=>console.log(e))).then((()=>{ne(!1)})))},fe=(0,s.useRef)(null),{height:be}=(0,b.Z)({ref:fe});return(0,P.jsxs)(o.Z,{className:l.containerDetailSolution,children:[(0,P.jsxs)(o.Z,{className:l.stickyBack,ref:fe,children:[(0,P.jsxs)(o.Z,{onClick:Q,className:l.backButton,children:[(0,P.jsx)(a.Z,{className:l.backIcon}),(0,P.jsx)("span",{"translation-key":"common_back",children:X("common_back")})]}),(0,P.jsx)(c.Z,{})]}),(0,P.jsx)(o.Z,{className:l.solutionContainer,style:{height:"calc(100% - ".concat(be,"px)")},children:$&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(o.Z,{className:l.solutionTitle,children:(0,P.jsx)(v.Z,{children:$.title})}),(0,P.jsxs)(o.Z,{className:l.userInfo,children:[(0,P.jsx)(o.Z,{className:l.avatar,children:(0,P.jsx)(i.Z,{sx:{bgcolor:"".concat((0,L.M)("".concat(null===(t=$.user)||void 0===t?void 0:t.firstName," ").concat(null===(n=$.user)||void 0===n?void 0:n.lastName)))},alt:null===(w=$.user)||void 0===w?void 0:w.firstName,src:null===(z=$.user)||void 0===z?void 0:z.avatarUrl,children:null===(U=$.user)||void 0===U?void 0:U.firstName.charAt(0)})}),(0,P.jsxs)(o.Z,{className:l.nameInfoContainer,children:[(0,P.jsx)(o.Z,{className:l.name,children:"vi"===S.ZP.language?"".concat(null!==(M=null===(D=$.user)||void 0===D?void 0:D.lastName)&&void 0!==M?M:""," ").concat(null!==(E=null===(G=$.user)||void 0===G?void 0:G.firstName)&&void 0!==E?E:""):"".concat(null!==(F=null===(H=$.user)||void 0===H?void 0:H.firstName)&&void 0!==F?F:""," ").concat(null!==(K=null===(V=$.user)||void 0===V?void 0:V.lastName)&&void 0!==K?K:"")}),(0,P.jsxs)(o.Z,{className:l.solutionButton,children:[(0,P.jsxs)(o.Z,{className:l.view,children:[(0,P.jsx)(x.G,{icon:N.Mdf,className:l.solutionIcon}),(0,P.jsx)(o.Z,{className:l.viewNumber,children:$.totalView})]}),(0,P.jsxs)(o.Z,{className:l.calendar,children:[(0,P.jsx)(x.G,{icon:N.fT7,className:l.solutionIcon}),(0,P.jsx)(o.Z,{className:l.calendarNumber,children:null!==(O=R($.createdAt,S.ZP.language))&&void 0!==O?O:""})]})]})]})]}),(0,P.jsx)(o.Z,{className:l.tagLanguageSolution,children:$.tags.map((e=>(0,P.jsx)(o.Z,{className:l.item,children:e.name},e.id)))}),(0,P.jsx)(o.Z,{"data-color-mode":"light",children:(0,P.jsx)(f.ZP.Markdown,{source:null!==(J=$.content)&&void 0!==J?J:"",className:l.markdown})}),(0,P.jsxs)(o.Z,{className:l.commentContainer,children:[(0,P.jsxs)(o.Z,{className:l.commentTitleContainer,children:[(0,P.jsxs)(o.Z,{className:l.commentTitle,children:[(0,P.jsx)(x.G,{icon:N.lXL,className:l.commentIcon}),(0,P.jsx)(o.Z,{className:l.commentNumber,"translation-key":"detail_problem_discussion_detail_comment_count",children:X("detail_problem_discussion_detail_comment_count",{commentNumber:ce})})]}),(0,P.jsxs)(o.Z,{className:l.filterComment,children:[(0,P.jsx)(g.Z,{id:"newest-button",onClick:e=>{he(e.currentTarget)},sx:{textTransform:"none"},children:(0,P.jsx)(h.Z,{"translation-key":_e?"detail_problem_discussion_filter_newest":"detail_problem_discussion_filter_oldest",children:"".concat(X("common_filter_by"),": ").concat(X(_e?"detail_problem_discussion_filter_newest":"detail_problem_discussion_filter_oldest"))})}),(0,P.jsxs)(r.Z,{id:"newest-menu","aria-labelledby":"newest-button",anchorEl:ue,open:ve,onClose:xe,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,P.jsx)(m.Z,{onClick:()=>{de(!0),xe()},children:X("detail_problem_discussion_filter_newest")}),(0,P.jsx)(m.Z,{onClick:()=>{de(!1),xe()},children:X("detail_problem_discussion_filter_oldest")})]})]})]}),(0,P.jsx)(o.Z,{className:l.commentBox,children:(0,P.jsxs)("form",{onSubmit:je((e=>{null!==W&&C.T.createComment({sharedSolutionId:W,content:e.comment}).then((e=>{ge()})).catch((e=>{console.log(e)}))})),children:[(0,P.jsx)(Z.u,{"aria-label":"empty textarea","translation-key":"detail_problem_discussion_your_comment",placeholder:X("detail_problem_discussion_your_comment"),className:l.textArea,minRows:5,...Ne("comment"),"aria-invalid":!!Ze.comment}),(0,P.jsx)(g.Z,{type:"submit",variant:"contained",className:l.commentButton,"translation-key":"detail_problem_discussion_detail_comment",children:X("detail_problem_discussion_detail_comment")})]})}),Ze.comment&&(0,P.jsx)(h.Z,{colorname:"--red-error",children:Ze.comment.message}),(0,P.jsx)(o.Z,{className:l.commentList,children:(0,P.jsxs)(o.Z,{className:l.commentItem,children:[te&&(0,P.jsx)(_.Z,{alignItems:"center",marginTop:1,children:(0,P.jsx)(d.Z,{})}),!te&&re.map((e=>{var t,n,s,a,r,m,_,d,u,h,v,x,N;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(o.Z,{className:l.commentInfo,children:[(0,P.jsxs)(o.Z,{className:l.commentInfoUser,children:[(0,P.jsx)(i.Z,{sx:{bgcolor:"".concat((0,L.M)("".concat(null===(t=e.user)||void 0===t?void 0:t.firstName," ").concat(null===(n=e.user)||void 0===n?void 0:n.lastName)))},alt:null===(s=e.user)||void 0===s?void 0:s.firstName,src:null===(a=e.user)||void 0===a?void 0:a.avatarUrl,children:null===(r=e.user)||void 0===r?void 0:r.firstName.charAt(0)}),(0,P.jsx)(o.Z,{className:l.commentName,children:"vi"===S.ZP.language?"".concat(null!==(m=null===(_=e.user)||void 0===_?void 0:_.lastName)&&void 0!==m?m:""," ").concat(null!==(d=null===(u=$.user)||void 0===u?void 0:u.firstName)&&void 0!==d?d:""):"".concat(null!==(h=null===(v=e.user)||void 0===v?void 0:v.firstName)&&void 0!==h?h:""," ").concat(null!==(x=null===(N=e.user)||void 0===N?void 0:N.lastName)&&void 0!==x?x:"")})]}),(0,P.jsx)(o.Z,{className:l.commentText,children:(0,P.jsx)(j.U,{children:e.content,remarkPlugins:[y.Z]})})]},e.user.id),(0,P.jsx)(c.Z,{})]})})),(0,P.jsx)(_.Z,{alignItems:"center",children:(0,P.jsx)(u.Z,{count:le,onChange:(e,t)=>{oe(t-1)},page:se+1})})]})})]})]})})]})}},14647:(e,t,n)=>{var s=n(64836);t.Z=void 0;var o=s(n(45045)),l=n(46417);t.Z=(0,o.default)((0,l.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")}}]);