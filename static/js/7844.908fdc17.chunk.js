"use strict";(self.webpackChunkfrontend_app=self.webpackChunkfrontend_app||[]).push([[7844],{96743:(e,s,n)=>{n.d(s,{Z:()=>_});var i=n(79536),a=n(66212),t=n(1550),l=n(15103),o=n(51405),r=n(49914),d=n(88797),c=n(47313);const u="styles_container__Lu+Ak",m="styles_formWrapperContainer__9YqpE",g="styles_selectedChip__dhVt2";var h=n(46417);const p={PaperProps:{style:{maxHeight:224}}},_=e=>{const[s,n]=(0,c.useState)(e.filterList);return(0,h.jsx)("div",{className:u,children:(0,h.jsxs)(t.Z,{className:m,children:[(0,h.jsx)(l.Z,{id:"multipleChipLabel",children:e.label}),(0,h.jsx)(d.Z,{style:{backgroundColor:e.backgroundColor||"white"},id:"multipleChip",labelId:"demo-multipleChipLabel-chip-label",multiple:!0,value:s,onChange:s=>{const{target:{value:i}}=s;n("string"===typeof i?i.split(","):i),e.onFilterListChangeHandler("string"===typeof i?i.split(","):i)},input:(0,h.jsx)(r.Z,{id:"selectMultipleChip",label:e.label}),renderValue:e=>(0,h.jsx)(i.Z,{className:g,children:e.map((e=>(0,h.jsx)(a.Z,{label:e},e)))}),MenuProps:p,fullWidth:!0,readOnly:e.readOnly,children:e.defaultChipList.map((e=>(0,h.jsx)(o.Z,{value:e,children:e},e)))})]})})}},32952:(e,s,n)=>{n.d(s,{Z:()=>c});n(47313);var i=n(79536),a=n(6306),t=n(54045),l=n(99249),o=n(75975),r=n(78925),d=n(46417);function c(e){let{files:s=[],treeView:n=!0}=e;const c=async e=>{if(void 0===e)return;const n=s.find((s=>s.id===e));if(n)if(n.downloadUrl){const e=await fetch(n.downloadUrl),s=await e.blob();(0,r.saveAs)(s,n.name)}else console.error("File not found")};return(0,d.jsx)(i.Z,{sx:{flexGrow:1},children:n?(0,d.jsx)(l.L,{"aria-label":"file system navigator",defaultCollapseIcon:(0,d.jsx)(a.Z,{}),defaultExpandIcon:(0,d.jsx)(t.Z,{}),children:0!==s.length&&(0,d.jsx)(o.k,{nodeId:"root",label:"Files",children:s.map(((e,s)=>(0,d.jsx)("div",{className:"thumbnail",children:(0,d.jsx)("a",{href:e.downloadUrl,style:{display:"block",wordBreak:"break-word",whiteSpace:"normal"},onClick:s=>{s.preventDefault(),c(e.id)},children:e.name},e.id)},s)))})}):(0,d.jsx)("div",{className:"thumbnail",children:s.map(((e,s)=>(0,d.jsx)("a",{href:e.downloadUrl,style:{display:"block",wordBreak:"break-word",whiteSpace:"normal"},onClick:s=>{s.preventDefault(),c(e.id)},children:e.name},e.id)))})})}},77844:(e,s,n)=>{n.r(s),n.d(s,{default:()=>U});var i=n(9019),a=n(79536),t=n(85281),l=n(9289),o=n(47825),r=n(33223),d=n(19860),c=n(90200),u=n(96743),m=n(16977),g=n(37735),h=n(92556),p=n(80007),_=n(99221),v=n(47313),b=n(58467),x=n(38556);const f={root:"styles_root__kbPeq",container:"styles_container__Lbkiq",mainContent:"styles_mainContent__vSLXd",formBody:"styles_formBody__xr1lk",drawerBody:"styles_drawerBody__-SHxX",drawerFieldContainer:"styles_drawerFieldContainer__uAvPX",breadcumpWrapper:"styles_breadcumpWrapper__Pd1sy",icArrow:"styles_icArrow__VyZc0",cursorPointer:"styles_cursorPointer__S4KS2",contentContainer:"styles_contentContainer__2f8oO",gradeContainer:"styles_gradeContainer__EvlOf",stickyBottom:"styles_stickyBottom__m1-ko"};var y=n(90469),j=n(63408),Z=n(96447),C=n(47477),S=n(75590),N=n(33256),w=n(65537),k=n(75948),I=n(32952),A=n(46417);function U(){var e,s,n,U,E,F,L,O,T,B;const{t:P}=(0,S.$G)(),{width:M}=(0,x.Z)(),G=(0,b.s0)(),[D,H]=((0,d.Z)(),v.useState(!0)),[R,W]=v.useState(["T\u1ef1 lu\u1eadn","N\u1ed9p t\u1ec7p"]),[V,q]=v.useState(""),[K,X]=v.useState(""),{courseId:z,assignmentId:J,submissionId:Y}=(0,b.UO)(),[Q,$]=v.useState(null!==(e=null===Y||void 0===Y?void 0:Y.toString())&&void 0!==e?e:""),ee=(0,w.v9)((e=>e.submissionAssignment)),se=(0,w.I0)();v.useEffect((()=>{H(!(M<1080))}),[M]);const ne=v.useRef(null),{height:ie}=(0,C.Z)({ref:ne}),ae=(0,v.useCallback)((async e=>{se((0,k.K4)(!0));try{const s=await N.J.getSubmissionAssignmentByAssignmentId(e);se((0,k.q5)(s))}catch(s){console.error("Failed to fetch submission assignment",s)}finally{se((0,k.K4)(!1))}}),[se]);return(0,v.useEffect)((()=>{J&&ae(J)}),[J,ae]),(0,v.useEffect)((()=>{Q&&G(y._.lecturer.assignment.grading.replace(":assignmentId",null!==J&&void 0!==J?J:"").replace(":courseId",null!==z&&void 0!==z?z:"").replace(":submissionId",Q))}),[Q,J,z,G]),(0,v.useEffect)((()=>{if(ee.submissionAssignments){var e,s,n,i;const a=null!==(e=null===(s=ee.submissionAssignments.find((e=>e.id===Q)))||void 0===s?void 0:s.grade)&&void 0!==e?e:-1;q(-1===a?"":a.toString()),X(null!==(n=null===(i=ee.submissionAssignments.find((e=>e.id===Q)))||void 0===i?void 0:i.content)&&void 0!==n?n:"")}}),[ee.submissionAssignments,Q]),(0,A.jsxs)(i.ZP,{className:f.root,children:[(0,A.jsx)(c.Z,{ref:ne}),ee.isLoading?(0,A.jsx)(a.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:"10px"},children:(0,A.jsx)(t.Z,{})}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(a.Z,{className:f.toolbar,sx:{backgroundColor:"white",marginTop:"".concat(ie,"px"),padding:"16px"},children:(0,A.jsx)(l.Z,{children:(0,A.jsxs)(a.Z,{id:f.breadcumpWrapper,children:[(0,A.jsx)(j.Z,{colorname:"--blue-500",className:f.cursorPointer,onClick:()=>G(y._.lecturer.course.management),children:"Qu\u1ea3n l\xfd kho\xe1 h\u1ecdc"}),(0,A.jsx)(Z.Z,{id:f.icArrow}),(0,A.jsx)(j.Z,{colorname:"--blue-500",className:f.cursorPointer,onClick:()=>G(y._.lecturer.course.information),children:"CS202 - Nh\u1eadp m\xf4n l\u1eadp tr\xecnh"}),(0,A.jsx)(Z.Z,{id:f.icArrow}),(0,A.jsx)(j.Z,{colorname:"--blue-500",className:f.cursorPointer,onClick:()=>G(y._.lecturer.course.assignment.replace(":courseId",null!==z&&void 0!==z?z:"")),children:"Danh s\xe1ch b\xe0i t\u1eadp"}),(0,A.jsx)(Z.Z,{id:f.icArrow}),(0,A.jsx)(j.Z,{colorname:"--blue-500",className:f.cursorPointer,onClick:()=>G(y._.lecturer.assignment.detail.replace(":assignmentId",null!==J&&void 0!==J?J:"").replace(":courseId",null!==z&&void 0!==z?z:"")),children:null===(s=ee.submissionAssignments[0])||void 0===s?void 0:s.assignmentName}),(0,A.jsx)(Z.Z,{id:f.icArrow}),(0,A.jsx)(j.Z,{colorname:"--blue-500",children:"\u0110\xe1nh gi\xe1"})]})})}),(0,A.jsxs)(a.Z,{className:f.contentContainer,children:[(0,A.jsxs)(o.Z,{className:f.drawerFieldContainer,children:[(0,A.jsx)(_.Z,{"translation-key":"common_student",children:P("common_student")}),(0,A.jsx)(g.Z,{labelId:"select-assignment-submission-student-label",value:Q,onHandleChange:e=>$(e),items:ee.submissionAssignments.map((e=>({value:e.id,label:e.user.fullName,customNode:(0,A.jsxs)(a.Z,{children:[(0,A.jsx)(_.Z,{fontWeight:"500",children:e.user.fullName}),(0,A.jsx)(p.Z,{colorname:"--gray-500",children:e.user.email})]})}))),backgroundColor:"#D9E2ED"})]}),(0,A.jsxs)(o.Z,{sx:{backgroundColor:"white",marginTop:"16px",height:"fit-content",padding:"16px"},className:f.gradeContainer,children:[(0,A.jsxs)(a.Z,{className:f.drawerFieldContainer,children:[(0,A.jsx)(_.Z,{"translation-key":"course_lecturer_grading_assignment_type",children:P("course_lecturer_grading_assignment_type")}),(0,A.jsx)(u.Z,{label:"",defaultChipList:["T\u1ef1 lu\u1eadn","N\u1ed9p t\u1ec7p"],filterList:R,onFilterListChangeHandler:W,readOnly:!0,backgroundColor:"white"})]}),(0,A.jsxs)(a.Z,{className:f.drawerFieldContainer,"translation-key":"no_data",children:[(0,A.jsx)(_.Z,{"translation-key":"course_lecturer_submission_online_text",children:P("course_lecturer_submission_online_text")}),(0,A.jsx)("div",{dangerouslySetInnerHTML:{__html:null!==(n=null===(U=ee.submissionAssignments.find((e=>e.id===Q)))||void 0===U||null===(E=U.submissionAssignmentOnlineText)||void 0===E?void 0:E.content)&&void 0!==n?n:'<span style="color: red;">'.concat(P("no_data"),"</span>")}})]}),(0,A.jsxs)(a.Z,{className:f.drawerFieldContainer,"translation-key":"no_data",children:[(0,A.jsx)(_.Z,{"translation-key":"course_lecturer_submission_file",children:P("course_lecturer_submission_file")}),null!==(F=ee.submissionAssignments.find((e=>e.id===Q)))&&void 0!==F&&null!==(L=F.submissionAssignmentFile)&&void 0!==L&&L.files?(0,A.jsx)(I.Z,{files:null!==(O=null===(T=ee.submissionAssignments.find((e=>e.id===Q)))||void 0===T||null===(B=T.submissionAssignmentFile)||void 0===B?void 0:B.files.map((e=>({id:e.id,name:e.fileName,downloadUrl:e.fileUrl,size:e.fileSize,type:e.mimetype,lastModified:new Date(e.timemodified).toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"})}))))&&void 0!==O?O:[],treeView:!1}):(0,A.jsx)("span",{style:{color:"red"},children:P("no_data")})]}),(0,A.jsxs)(a.Z,{className:f.drawerFieldContainer,children:[(0,A.jsx)(_.Z,{"translation-key":"course_lecturer_score_on_range",children:P("course_lecturer_score_on_range",{range:100})}),(0,A.jsx)(m.Z,{type:"number",value:V,onChange:e=>q(e.target.value),placeholder:"Nh\u1eadp \u0111i\u1ec3m t\u1ed1i \u0111a",backgroundColor:"white"})]}),(0,A.jsxs)(a.Z,{className:f.feedbackContainer,children:[(0,A.jsx)(_.Z,{"translation-key":"course_lecturer_grade_comment",children:P("course_lecturer_grade_comment")}),(0,A.jsx)(a.Z,{className:f.textEditor,children:(0,A.jsx)(h.Z,{style:{marginTop:"10px",height:"300px"},value:K,onChange:X})})]})]})]})]}),(0,A.jsx)(a.Z,{className:f.stickyBottom,children:(0,A.jsx)(r.Z,{variant:"contained",color:"primary",className:f.btnGrade,onClick:()=>{console.log("Grade")},children:"L\u01b0u thay \u0111\u1ed5i"})})]})}},33256:(e,s,n)=>{n.d(s,{J:()=>l});var i=n(35662),a=n(66010);const t="https://api.codedynamite.site";class l{static async getSubmissionAssignmentById(e,s){try{const n=await i.Z.get("".concat(t).concat(a.b.COURSE.SUBMISSION_ASSIGNMENT.GET_BY_USER_ID_ASSIGNMENT_ID),{params:{userId:e,assignmentId:s}});if(200===n.status)return n.data}catch(u){var n,l,o,r,d,c;return console.error("Failed to fetch submission assignment by id",u),Promise.reject({code:(null===(n=u.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.code)||503,status:(null===(o=u.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.status)||"Service Unavailable",message:(null===(d=u.response)||void 0===d||null===(c=d.data)||void 0===c?void 0:c.message)||u.message})}}static async getSubmissionAssignmentByAssignmentId(e){try{const s=await i.Z.get("".concat(t).concat(a.b.COURSE.SUBMISSION_ASSIGNMENT.DEFAULT),{params:{assignmentId:e}});if(200===s.status)return s.data}catch(c){var s,n,l,o,r,d;return console.error("Failed to fetch submission assignment by id",c),Promise.reject({code:(null===(s=c.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.code)||503,status:(null===(l=c.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.status)||"Service Unavailable",message:(null===(r=c.response)||void 0===r||null===(d=r.data)||void 0===d?void 0:d.message)||c.message})}}static async countSubmissionToGrade(e){try{const s=await i.Z.get("".concat(t).concat(a.b.COURSE.SUBMISSION_ASSIGNMENT.COUNT_TO_GRADE),{params:{assignmentId:e}});if(200===s.status)return s.data}catch(c){var s,n,l,o,r,d;return console.error("Failed to fetch submission assignment by id",c),Promise.reject({code:(null===(s=c.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.code)||503,status:(null===(l=c.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.status)||"Service Unavailable",message:(null===(r=c.response)||void 0===r||null===(d=r.data)||void 0===d?void 0:d.message)||c.message})}}static async countAllSubmission(e){try{const s=await i.Z.get("".concat(t).concat(a.b.COURSE.SUBMISSION_ASSIGNMENT.COUNT_ALL),{params:{assignmentId:e}});if(200===s.status)return s.data}catch(c){var s,n,l,o,r,d;return console.error("Failed to fetch submission assignment by id",c),Promise.reject({code:(null===(s=c.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.code)||503,status:(null===(l=c.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.status)||"Service Unavailable",message:(null===(r=c.response)||void 0===r||null===(d=r.data)||void 0===d?void 0:d.message)||c.message})}}}}}]);