"use strict";(self.webpackChunkfrontend_app=self.webpackChunkfrontend_app||[]).push([[7389],{91603:(e,n,t)=>{t.d(n,{Z:()=>c});var i=t(9019),s=t(49914),a=t(47313),l=t(82098),r=t(35659),o=t(63408),m=t(46417);const c=(0,a.memo)((e=>{const{title:n,type:t,placeholder:a,name:c,defaultValue:d,value:x,inputRef:u,errorMessage:_,autoComplete:g,readOnly:h,disabled:p,onChange:Z,backgroundColor:j,error:f,tooltipDescription:y,titleRequired:b,fontFamily:v,fontSize:C,fontWeight:S,titleAlignment:w="vertical",widthInput:k}=e,{ref:P,...z}=u||{ref:null};return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(i.ZP,{container:!0,children:["vertical"===w?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(i.ZP,{item:!0,xs:12,children:n&&(0,m.jsx)(r.Z,{title:n,titleRequired:b,tooltipDescription:y})}),(0,m.jsx)(i.ZP,{item:!0,xs:12,children:(0,m.jsx)(s.Z,{placeholder:a,fullWidth:!0,size:"small",readOnly:h,disabled:p,name:c,type:t,error:f,style:{backgroundColor:j||"white"},defaultValue:d,value:x,autoComplete:g,onChange:Z,...z,inputRef:u,sx:{borderRadius:"12px",fontFamily:v||"Roboto,sans-serif",fontSize:C||"14px",fontWeight:S||"400",boxShadow:"0px 1px 2px 0px rgba(21, 21, 21, 0.08)",width:k||"100%"}})})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(i.ZP,{item:!0,xs:3,alignContent:"center",children:n&&(0,m.jsx)(o.Z,{children:n})}),(0,m.jsx)(i.ZP,{item:!0,xs:9,children:(0,m.jsx)(s.Z,{placeholder:a,fullWidth:!0,size:"small",readOnly:h,disabled:p,name:c,type:t,error:f,style:{backgroundColor:j||"white"},defaultValue:d,value:x,autoComplete:g,onChange:Z,...z,inputRef:u,sx:{borderRadius:"12px",fontFamily:v||"Roboto,sans-serif",fontSize:C||"14px",fontWeight:S||"400",boxShadow:"0px 1px 2px 0px rgba(21, 21, 21, 0.08)",width:k||"100%"}})})]}),(0,m.jsx)(i.ZP,{item:!0,xs:n?12:0,md:0,children:(0,m.jsx)(m.Fragment,{})}),(0,m.jsx)(i.ZP,{item:!0,xs:12,children:_&&(0,m.jsx)(l.Z,{children:_})})]})})}))},33060:(e,n,t)=>{t.d(n,{Z:()=>r});var i,s=t(30168),a=t(17592),l=t(61113);const r=(0,a.ZP)(l.Z)(i||(i=(0,s.Z)(['\n  font-family: "Montserrat";\n  font-style: ',";\n  font-weight: 600;\n  font-size: 24px;\n  line-height: 32px;\n  letter-spacing: -0.03em;\n  color: ",";\n  @media only screen and (max-width: 767px) {\n    font-size: ",";\n    line-height: ",";\n  }\n"])),(e=>e.fontStyle||"normal"),(e=>"var(".concat(e.colorname||"--eerie-black",")")),(e=>e.fontSizeMobile||"22px"),(e=>e.$lineHeightMobile||"32px"))},67389:(e,n,t)=>{t.r(n),t.d(n,{default:()=>W});var i=t(96447),s=t(93714),a=t(47313),l=t(9019),r=t(79536),o=t(47825),m=t(9289),c=t(47131),d=t(65033),x=t(19536),u=t(16429),_=t(83929),g=t(44758),h=t(33223),p=t(86138),Z=t(99881),j=t(19860),f=t(90200),y=t(7547),b=t(15535),v=t(37735),C=t(95087),S=t(92556),w=t(63408),k=t(58467),P=t(90469),z=t(38556);const I={root:"styles_root__CJAeV",container:"styles_container__Fnrca",mainContent:"styles_mainContent__bCgCc",generalInfo:"styles_generalInfo__hDgbF",textEditor:"styles_textEditor__IT8I8",submissionTime:"styles_submissionTime__+J8ny",formBody:"styles_formBody__XCHVO",toolBar:"styles_toolBar__qx0RI",breadcumpWrapper:"styles_breadcumpWrapper__u5Y2h",icArrow:"styles_icArrow__0JM2r",cursorPointer:"styles_cursorPointer__9SYmP",drawerBody:"styles_drawerBody__xKnE7",drawerFieldContainer:"styles_drawerFieldContainer__2Qv0Q",action:"styles_action__ebJRQ"};var F=t(47477),B=t(75590),R=t(70816),O=t.n(R),q=t(91603),N=t(33060),M=t(54750),L=t(46417);const D=(0,M.Z)((0,L.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");var E=t(33099),A=t(21933),T=t(62563),U=t(75627),Q=t(23885),V=t(16705);A.Ry().shape({id:A.nK().required(),file:A.nK(),name:A.Z_(),type:A.Z_(),size:A.Rx(),valid:A.O7(),errors:A.IX().of(A.Z_()),uploadStatus:A.nK(),uploadMessage:A.Z_(),imageUrl:A.Z_(),xhr:A.nK(),progress:A.Rx(),extraUploadData:A.Ry(),extraData:A.Ry(),serverResponse:A.nK(),videoUrl:A.Z_(),uploadUrl:A.Z_()});function W(){const{t:e,i18n:n}=(0,B.$G)(),[t,R]=(0,a.useState)((()=>Q.ZP.language)),{width:M}=(0,z.Z)(),W=(0,k.s0)(),[K,H]=((0,j.Z)(),(0,a.useState)(!0)),[Y,J]=(0,a.useState)(!1),[X,$]=(0,a.useState)([]),[G,ee]=(0,a.useState)(!0),[ne,te]=(0,a.useState)(!1),[ie,se]=(0,a.useState)(!1),[ae,le]=(0,a.useState)(!1),[re,oe]=(0,a.useState)(!0),[me,ce]=(0,a.useState)(!0),{courseId:de}=(0,k.UO)();(0,a.useEffect)((()=>{n.language!==t&&null!==he&&void 0!==he&&he.name&&(pe(),R(n.language))}),[n.language]);const xe=(0,a.useMemo)((()=>A.Ry().shape({name:A.Z_().required("assignment_name_required"),intro:A.Z_(),activity:A.Z_(),maxScore:A.Rx().required("assignment_management_max_score_required"),timeOpen:A.Z_().required("assignment_management_allow_submission_from_date_required"),timeClose:A.Z_().required("assignment_management_submission_due_date_required"),wordLimit:A.Z_().test("wordLimit","assignment_management_limit_word_required",(e=>!ae||""!==e||null!==e)),maxUploadedFile:A.Z_().required("assignment_management_max_uploaded_file_required"),maxFileSize:A.Z_().required("assignment_management_max_file_size_required")})),[e]),{control:ue,handleSubmit:_e,watch:ge,formState:{errors:he},trigger:pe,setValue:Ze}=(0,U.cI)({resolver:(0,T.X)(xe),defaultValues:{name:"",intro:"",activity:"",maxScore:100,timeOpen:O().utc().add(0,"days").toISOString(),timeClose:O().utc().add(7,"days").toISOString(),wordLimit:"",maxUploadedFile:"20",maxFileSize:"40000"}}),je=(0,a.useCallback)((async e=>{try{const n=await V.Y.createIntroAttachment(e);if(n)return console.log("Create intro attachment successfully"),n}catch(n){console.log(n)}return null}),[]),fe=(0,a.useCallback)((async(e,n)=>{try{await V.Y.updateIntroAttachment(e,n)&&console.log("Update intro attachment successfully")}catch(t){console.log(t)}}),[]),ye=(0,a.useCallback)((async e=>{try{const n=await V.Y.createAssignment(e);if(n)return console.log("Create assignment successfully"),n}catch(n){console.log(n)}return null}),[]);(0,a.useEffect)((()=>{H(!(M<1080))}),[M]);const be=(0,a.useRef)(null),{height:ve}=(0,F.Z)({ref:be}),Ce=(0,a.useRef)(null),{height:Se}=(0,F.Z)({ref:Ce}),we=Array.from({length:20},((e,n)=>({value:(n+1).toString(),label:(n+1).toString()}))),ke=[{value:"10",label:"10 KB"},{value:"50",label:"50 KB"},{value:"100",label:"100 KB"},{value:"500",label:"500 KB"},{value:"1000",label:"1 MB"},{value:"2000",label:"2 MB"},{value:"5000",label:"5 MB"},{value:"10000",label:"10 MB"},{value:"20000",label:"20 MB"},{value:"40000",label:"40 MB"}],[Pe,ze]=(0,a.useState)(!1),[Ie,Fe]=(0,a.useState)(!1);return(0,L.jsxs)(l.ZP,{className:I.root,children:[(0,L.jsx)(f.Z,{ref:be}),(0,L.jsx)(r.Z,{sx:{marginTop:"".concat(ve,"px")},className:I.container,children:(0,L.jsxs)(o.Z,{children:[(0,L.jsx)(m.Z,{className:I.toolBar,children:(0,L.jsxs)(r.Z,{id:I.breadcumpWrapper,children:[(0,L.jsx)(w.Z,{colorname:"--blue-500",className:I.cursorPointer,onClick:()=>W(P._.lecturer.course.management),"translation-key":"common_course_management",children:e("common_course_management")}),(0,L.jsx)(i.Z,{id:I.icArrow}),(0,L.jsx)(w.Z,{colorname:"--blue-500",className:I.cursorPointer,onClick:()=>W(P._.lecturer.course.information.replace(":courseId",null!==de&&void 0!==de?de:"")),children:"CS202 - Nh\u1eadp m\xf4n l\u1eadp tr\xecnh"}),(0,L.jsx)(i.Z,{id:I.icArrow}),(0,L.jsx)(w.Z,{colorname:"--blue-500",className:I.cursorPointer,onClick:()=>W(P._.lecturer.course.assignment.replace(":courseId",null!==de&&void 0!==de?de:"")),"translation-key":"course_detail_assignment_list",children:e("course_detail_assignment_list")}),(0,L.jsx)(i.Z,{id:I.icArrow}),(0,L.jsx)(w.Z,{colorname:"--blue-500","translation-key":"assignment_management_create_assignment",children:e("assignment_management_create_assignment")})]})}),(0,L.jsxs)("form",{className:I.mainContent,style:{height:"calc(100% - ".concat(Se+ve,"px)"),marginTop:"".concat(Se,"px")},onSubmit:_e((async e=>{J(!0);const n={...e},{name:t,intro:i,activity:s,maxScore:a,timeOpen:l,timeClose:r,wordLimit:o,maxUploadedFile:m,maxFileSize:c}=n;let d=[],x=[];try{for(const n of X){const e={fileName:n.name||"",fileUrl:n.downloadUrl||"",fileSize:n.size||0,mimeType:n.type||"",timeModified:(new Date).toISOString()},t=await je(e);t&&(d.push(e),x.push(t.id))}const e=await ye({courseId:null!==de&&void 0!==de?de:"",title:t,intro:i,activity:s,wordLimit:o,maxUploadFiles:m,maxFileSize:c,maxScore:a,timeOpen:l,timeClose:r,type:ae&&re?"BOTH":ae?"TEXT_ONLINE":"FILE",visible:!0,allowSubmitLate:me});if(e&&d.length>0)for(let n=0;n<d.length;n++){const t={...d[n],assignmentId:e.assignmentId};console.log("temp",t),await fe(t,x[n])}}catch(u){Fe(!0)}finally{J(!1),ze(!0),setTimeout((()=>{W(P._.lecturer.course.assignment.replace(":courseId",null!==de&&void 0!==de?de:""))}),2e3)}})),children:[(0,L.jsx)(N.Z,{"translation-key":"assignment_management_create_assignment",children:e("assignment_management_create_assignment")}),(0,L.jsxs)(r.Z,{className:I.generalInfo,children:[(0,L.jsxs)(r.Z,{display:"flex",alignItems:"center",margin:1,children:[G?(0,L.jsx)(c.Z,{sx:{padding:"5px"},onClick:()=>ee(!G),children:(0,L.jsx)(s.Z,{style:{fontSize:30}})}):(0,L.jsx)(c.Z,{sx:{padding:"5px"},onClick:()=>ee(!G),children:(0,L.jsx)(D,{style:{fontSize:30}})}),(0,L.jsx)(E.Z,{fontWeight:500,"translation-key":"common_general",children:e("common_general")})]}),(0,L.jsx)(d.Z,{in:G,timeout:"auto",unmountOnExit:!0,children:(0,L.jsxs)(r.Z,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,marginLeft:3,marginBottom:2,children:[(0,L.jsx)(U.Qr,{defaultValue:"",control:ue,name:"name",rules:{required:!0},render:n=>{var t;let{field:{ref:i,...s}}=n;return(0,L.jsx)(q.Z,{titleAlignment:"horizontal",error:Boolean(null===he||void 0===he?void 0:he.name),errorMessage:null===(t=he.name)||void 0===t?void 0:t.message,title:e("common_assignment_name"),type:"text",placeholder:e("common_assignment_enter_name"),titleRequired:!0,"translation-key":["common_assignment_name","common_assignment_enter_name","assignment_name_required"],inputRef:i,...s})}}),(0,L.jsxs)(l.ZP,{container:!0,spacing:1,columns:12,children:[(0,L.jsx)(l.ZP,{item:!0,xs:3,children:(0,L.jsx)(w.Z,{"translation-key":"common_assignment_description",children:e("common_assignment_description")})}),(0,L.jsx)(l.ZP,{item:!0,xs:9,className:I.textEditor,"translation-key":"common_enter_description",children:(0,L.jsx)(U.Qr,{control:ue,name:"intro",render:n=>{let{field:t}=n;return(0,L.jsx)(S.Z,{openDialog:!0,roundedBorder:!0,placeholder:e("common_enter_description")+"...",onChange:t.onChange,value:t.value||""})}})})]}),(0,L.jsxs)(l.ZP,{container:!0,spacing:1,columns:12,children:[(0,L.jsx)(l.ZP,{item:!0,xs:3,children:(0,L.jsx)(w.Z,{"translation-key":"common_assignment_guide",children:e("common_assignment_guide")})}),(0,L.jsx)(l.ZP,{item:!0,xs:9,className:I.textEditor,"translation-key":"common_enter_guideline",children:(0,L.jsx)(U.Qr,{control:ue,name:"activity",render:n=>{let{field:t}=n;return(0,L.jsx)(S.Z,{openDialog:!0,roundedBorder:!0,placeholder:e("common_enter_guideline")+"...",...t,value:t.value||""})}})})]}),(0,L.jsxs)(l.ZP,{container:!0,spacing:1,columns:12,children:[(0,L.jsx)(l.ZP,{item:!0,xs:3,children:(0,L.jsx)(w.Z,{"translation-key":"asingment_management_attach_file",children:e("asingment_management_attach_file")})}),(0,L.jsx)(l.ZP,{item:!0,xs:9,children:(0,L.jsx)(C.Z,{extFiles:X,setExtFiles:$})})]})]})})]}),(0,L.jsx)(x.Z,{}),(0,L.jsxs)(r.Z,{className:I.submissionTime,children:[(0,L.jsxs)(r.Z,{display:"flex",alignItems:"center",margin:1,children:[ne?(0,L.jsx)(c.Z,{sx:{padding:"5px"},onClick:()=>te(!ne),children:(0,L.jsx)(s.Z,{style:{fontSize:30}})}):(0,L.jsx)(c.Z,{sx:{padding:"5px"},onClick:()=>te(!ne),children:(0,L.jsx)(D,{style:{fontSize:30}})}),(0,L.jsx)(E.Z,{"translation-key":"common_time_setting",fontWeight:500,children:e("common_time_setting")})]}),(0,L.jsx)(d.Z,{in:ne,timeout:"auto",unmountOnExit:!0,children:(0,L.jsxs)(r.Z,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,marginLeft:3,marginBottom:2,children:[(0,L.jsxs)(l.ZP,{container:!0,spacing:1,columns:12,children:[(0,L.jsx)(l.ZP,{item:!0,xs:3,children:(0,L.jsx)(w.Z,{"translation-key":"asingment_management_allow_time",children:e("asingment_management_allow_time")})}),(0,L.jsx)(l.ZP,{item:!0,xs:9,children:(0,L.jsx)(U.Qr,{control:ue,name:"timeOpen",rules:{required:!0},render:e=>{let{field:{ref:n,...t}}=e;return(0,L.jsx)(b.Z,{value:O()(t.value),onHandleValueChange:e=>{e&&Ze("timeOpen",e.toISOString())}})}})})]}),(0,L.jsxs)(l.ZP,{container:!0,spacing:1,columns:12,children:[(0,L.jsx)(l.ZP,{item:!0,xs:3,children:(0,L.jsx)(w.Z,{"translation-key":"asingment_management_deadline",children:e("asingment_management_deadline")})}),(0,L.jsx)(l.ZP,{item:!0,xs:9,children:(0,L.jsx)(U.Qr,{control:ue,name:"timeClose",rules:{required:!0},render:e=>{let{field:{ref:n,...t}}=e;return(0,L.jsx)(b.Z,{value:O()(t.value),onHandleValueChange:e=>{e&&Ze("timeClose",e.toISOString())}})}})})]}),(0,L.jsxs)(l.ZP,{container:!0,spacing:1,columns:12,children:[(0,L.jsx)(l.ZP,{item:!0,xs:3}),(0,L.jsx)(l.ZP,{item:!0,xs:9,children:(0,L.jsx)(u.Z,{style:{flexDirection:"row"},children:(0,L.jsx)(_.Z,{"translation-key":"common_allow_submission_after_end_time",control:(0,L.jsx)(g.Z,{checked:me,onChange:e=>ce(e.target.checked),name:"textSubmission"}),label:e("common_allow_submission_after_end_time")})})})]})]})})]}),(0,L.jsx)(x.Z,{}),(0,L.jsxs)(r.Z,{className:I.submissionType,children:[(0,L.jsxs)(r.Z,{display:"flex",alignItems:"center",margin:1,children:[ie?(0,L.jsx)(c.Z,{sx:{padding:"5px"},onClick:()=>se(!ie),children:(0,L.jsx)(s.Z,{style:{fontSize:30}})}):(0,L.jsx)(c.Z,{sx:{padding:"5px"},onClick:()=>se(!ie),children:(0,L.jsx)(D,{style:{fontSize:30}})}),(0,L.jsx)(E.Z,{"translation-key":"common_submission_type",fontWeight:500,children:e("common_submission_type")})]}),(0,L.jsx)(d.Z,{in:ie,timeout:"auto",unmountOnExit:!0,children:(0,L.jsxs)(r.Z,{display:"flex",flexDirection:"column",gap:2,marginLeft:3,marginBottom:2,children:[(0,L.jsxs)(l.ZP,{container:!0,children:[(0,L.jsx)(l.ZP,{item:!0,xs:3,alignContent:"center",children:(0,L.jsx)(w.Z,{"translation-key":"common_submission_type",children:e("common_submission_type")})}),(0,L.jsx)(l.ZP,{item:!0,xs:9,children:(0,L.jsxs)(u.Z,{style:{flexDirection:"row"},children:[(0,L.jsx)(_.Z,{"translation-key":"common_submission_type_online_text",control:(0,L.jsx)(g.Z,{checked:ae,onChange:e=>{le(e.target.checked)},name:"textSubmission"}),label:e("common_submission_type_online_text")}),(0,L.jsx)(_.Z,{"translation-key":"common_submission_type_file",control:(0,L.jsx)(g.Z,{checked:re,onChange:e=>{oe(e.target.checked)},name:"fileSubmission"}),label:e("common_submission_type_file")})]})})]}),ae&&(0,L.jsx)(U.Qr,{control:ue,name:"wordLimit",render:n=>{let{field:t}=n;return(0,L.jsx)(q.Z,{"translation-key":"common_enter_word_limit",widthInput:"200px",titleAlignment:"horizontal",title:e("common_word_limit"),type:"number",placeholder:e("common_enter_word_limit"),...t,value:t.value||""})}}),re&&(0,L.jsxs)(l.ZP,{container:!0,children:[(0,L.jsx)(l.ZP,{item:!0,xs:3,alignContent:"center",children:(0,L.jsx)(w.Z,{"translation-key":"common_max_upload_file",children:e("common_max_upload_file")})}),(0,L.jsx)(l.ZP,{item:!0,xs:9,children:(0,L.jsx)(U.Qr,{control:ue,defaultValue:"40000",name:"maxUploadedFile",render:e=>{let{field:{onChange:n,value:t}}=e;return(0,L.jsx)(v.Z,{labelId:"maxUploadedFile",width:"50px",borderRadius:"12px",title:"Max number of uploaded files",onHandleChange:n,value:t,items:we})}})})]}),re&&(0,L.jsxs)(l.ZP,{container:!0,children:[(0,L.jsx)(l.ZP,{item:!0,xs:3,alignContent:"center",children:(0,L.jsx)(w.Z,{"translation-key":"common_max_submission_file_size",children:e("common_max_submission_file_size")})}),(0,L.jsx)(l.ZP,{item:!0,xs:9,children:(0,L.jsx)(U.Qr,{control:ue,name:"maxFileSize",render:e=>{let{field:{onChange:n,value:t}}=e;return(0,L.jsx)(v.Z,{labelId:"maxFileSize",width:"50px",borderRadius:"12px",title:"Maximum submission size",value:t,onHandleChange:n,items:ke})}})})]}),(0,L.jsx)(U.Qr,{control:ue,name:"maxScore",render:n=>{var t;let{field:i}=n;return(0,L.jsx)(q.Z,{widthInput:"200px",titleAlignment:"horizontal",title:e("assignment_management_max_score"),type:"number",placeholder:"Nh\u1eadp \u0111i\u1ec3m t\u1ed1i \u0111a",error:Boolean(he.maxScore),errorMessage:null===(t=he.maxScore)||void 0===t?void 0:t.message,...i})}})]})})]}),(0,L.jsx)(x.Z,{}),(0,L.jsx)(r.Z,{className:I.action,children:(0,L.jsxs)(r.Z,{display:"flex",justifyContent:"center",gap:2,children:[(0,L.jsx)(y.Z,{variant:"contained",loading:Y,type:"submit","translation-key":"common_save",children:e("common_save")}),(0,L.jsx)(h.Z,{type:"button",color:"inherit",onClick:()=>W(P._.lecturer.course.assignment),"translation-key":"common_cancel",children:e("common_cancel")})]})})]})]})}),(0,L.jsx)(p.Z,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Pe,autoHideDuration:6e3,onClose:()=>ze(!1),children:(0,L.jsx)(Z.Z,{severity:"success",sx:{width:"100%"},onClose:()=>ze(!1),children:"T\u1ea1o b\xe0i t\u1eadp th\xe0nh c\xf4ng"})}),(0,L.jsx)(p.Z,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Ie,autoHideDuration:6e3,onClose:()=>Fe(!1),children:(0,L.jsx)(Z.Z,{severity:"error",sx:{width:"100%"},onClose:()=>Fe(!1),children:"T\u1ea1o b\xe0i t\u1eadp th\u1ea5t b\u1ea1i"})})]})}},93714:(e,n,t)=>{var i=t(64836);n.Z=void 0;var s=i(t(45045)),a=t(46417);n.Z=(0,s.default)((0,a.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess")}}]);