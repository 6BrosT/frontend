(self.webpackChunkfrontend_app=self.webpackChunkfrontend_app||[]).push([[8519],{38707:(e,t,s)=>{"use strict";s.d(t,{Z:()=>_});var r=s(94425),n=s(50494),i=s(79536),a=s(65033),l=s(48310),o=s(67216),c=s(89840),d=s(74748),m=s(83213),x=s(47313),u=s(65537),h=s(58467),p=s(6294);const g={sideBar:"styles_sideBar__z5Ask",boxContainer:"styles_boxContainer__bUcnn",item:"styles_item__wkRw1",itemIcon:"styles_itemIcon__n4sFn",childItem:"styles_childItem__LMhub",agentText:"styles_agentText__gIL6y",TitleContainer:"styles_TitleContainer__RwY0K"};var j=s(46417);function _(e){const t=(0,h.s0)(),s=(0,u.I0)(),_=(0,h.TH)().pathname,[Z,f]=(0,x.useState)(e.sideBarItem),[y,b]=(0,x.useState)(null);(0,x.useEffect)((()=>{f(e.sideBarItem)}),[e.sideBarItem]),(0,x.useEffect)((()=>{Z.forEach(((e,t)=>{var r;if(e.children)e.children.forEach(((e,r)=>{if(e.link.includes(_))return s((0,p.h)({parentIndex:t,childIndex:r})),void b(t)}));else if(null!==(r=e.link)&&void 0!==r&&r.includes(_))return void s((0,p.h)({parentIndex:t,childIndex:-1}))}))}),[_]);const v=(0,u.v9)((e=>e.selected));return(0,j.jsx)(i.Z,{className:g.boxContainer,children:(0,j.jsx)(i.Z,{className:g.sideBar,children:(0,j.jsx)(l.Z,{children:Z.map(((i,u)=>(0,j.jsxs)(x.Fragment,{children:[(0,j.jsx)(o.ZP,{disablePadding:!0,children:(0,j.jsxs)(c.Z,{onClick:()=>((r,n,i)=>{void 0===n.children&&(s((0,p.h)({parentIndex:r,childIndex:-1})),t(n.link)),y===r?b(null):(b(r),f(e.sideBarItem),0===i.length&&(f((e=>e.map(((e,t)=>t===r?{...e}:e)))),n&&n.link&&t(n.link)))})(u,i,i.children||[]),className:g.item,selected:v.parentIndex===u&&-1===v.childIndex,children:[(0,j.jsx)(d.Z,{children:i.icon}),(0,j.jsx)(m.Z,{"translation-key":i["translation-key"]?i["translation-key"]:"none",primary:i.name,className:g.itemText}),i.children&&(y===u?(0,j.jsx)(r.Z,{}):(0,j.jsx)(n.Z,{}))]})}),i.children&&(0,j.jsx)(a.Z,{in:y===u,timeout:"auto",unmountOnExit:!0,children:(0,j.jsx)(l.Z,{component:"div",disablePadding:!0,children:i.children.map(((e,r)=>(0,j.jsx)(c.Z,{onClick:()=>((e,r)=>{s((0,p.h)({parentIndex:e,childIndex:r})),t(Z[e].children[r].link)})(u,r),className:g.childItem,selected:v.parentIndex===u&&v.childIndex===r,children:(0,j.jsx)(m.Z,{secondary:e.name})},r)))})})]},u)))})})})}},90317:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>os});var r=s(9019),n=s(79536);const i="styles_root__zeGk-",a="styles_body__qqtSL";var l=s(58467),o=s(15949),c=s(1567),d=s(51997),m=s(65954),x=s(42832),u=s(48119),h=s(44758),p=s(66212),g=s(73428),j=s(19536),_=s(24929),Z=s(81127),f=s(11053),y=s(70501);const b="style_container__doJae",v="style_searchWrapper__7UwoV";var w=s(18413),P=s(75590),C=s(80007),S=s(99140),k=s(37735),N=s(46417);const T=e=>{let{isLoading:t=!1,searchValue:s,setSearchValue:r,onHandleChange:i,numOfResults:a=0,showFilter:l=!0,filterKeyList:o=[],filterValueList:c=[],currentFilterKey:d="",currentFilterValue:m="",handleFilterKeyChange:u=(e=>{}),handleFilterValueChange:h=(e=>{}),onHandleApplyFilter:g=(()=>{}),onHandleCancelFilter:j=(()=>{}),createBtnText:_="",onClickCreate:Z=(()=>{})}=e;const{t:f}=(0,P.$G)();return(0,N.jsxs)(x.Z,{direction:"column",gap:2,children:[l&&o.length>0&&c.length>0&&(0,N.jsxs)(y.Z,{className:b,children:[(0,N.jsx)(n.Z,{sx:{display:"flex",alignItems:"center",height:"60px",margin:"10px",padding:"5px 10px"},children:(0,N.jsxs)(x.Z,{direction:"row",gap:1,display:"flex",alignItems:"center",children:[(0,N.jsx)(C.Z,{width:"80px",children:f("common_filter_by")}),(0,N.jsx)(k.Z,{labelId:"select-assignment-section-label",value:d,onHandleChange:u,width:"fit-content",items:o}),(0,N.jsx)(k.Z,{labelId:"select-assignment-section-label",value:m,onHandleChange:h,width:"fit-content",items:c})]})}),(0,N.jsxs)(x.Z,{direction:"row",gap:2,sx:{padding:"10px"},display:"flex",justifyContent:"flex-end",children:[(0,N.jsx)(S.Z,{btnType:S.s.Outlined,"translate-key":"common_cancel_filter",onClick:j,children:f("common_cancel_filter")}),(0,N.jsx)(S.Z,{btnType:S.s.Primary,"translate-key":"common_apply_filter",onClick:g,children:f("common_apply_filter")})]})]}),(0,N.jsx)(n.Z,{className:v,children:(0,N.jsxs)(x.Z,{direction:"row",gap:2,children:[(0,N.jsx)(w.Z,{value:s,setValue:r,onHandleChange:i,maxWidth:"50%"}),Z&&(0,N.jsx)(n.Z,{sx:{display:"flex",justifyContent:"flex-end",width:"100%"},children:(0,N.jsx)(S.Z,{btnType:S.s.Primary,onClick:Z,children:_})})]})}),t?(0,N.jsx)(N.Fragment,{}):s&&s.length>0&&(0,N.jsx)(p.Z,{size:"small",label:"".concat(a," results found"),variant:"outlined",sx:{padding:"15px 10px",maxWidth:"fit-content",background:"var(--green-500)",border:"none",color:"white"}})]})};var F=s(31845),I=s(68464),A=s(63408),E=s(99221),W=s(23885),R=s(68933),M=s(70816),D=s.n(M),U=s(47313),z=s(65537),L=s(92164),O=s(8344),q=s(90469),G=s(3152),B=s(15162);const H={breadcump:"styles_breadcump__ShexG"};var V=s(56289);const Q=()=>{const e=(0,U.useRef)(null),{t:t}=(0,P.$G)(),s=(0,l.s0)(),[i,a]=(0,U.useState)(""),[o,c]=(0,U.useState)((()=>W.ZP.language)),[y,b]=(0,U.useState)(R.m.ALL),v=(0,z.v9)((e=>e.contest)),w=(0,z.I0)(),C=(0,U.useCallback)((async e=>{let{searchName:t,startTimeFilter:s=R.m.ALL,pageNo:r=0,pageSize:n=10}=e;w((0,L.K4)(!0));try{const e=await G.c.getContestsForAdmin({searchName:t,startTimeFilter:s,pageNo:r,pageSize:n});w((0,L.AF)(e)),w((0,L.K4)(!1))}catch(i){console.error("error",i),401!==i.code&&403!==i.code||w((0,V.lS)("Please sign in to continue")),w((0,L.K4)(!1))}}),[w]),S=(0,U.useCallback)((e=>{C({searchName:e,startTimeFilter:y})}),[C,y]),k=[{field:"name",headerName:t("common_name"),flex:1,renderHeader:()=>(0,N.jsx)(I.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_name")}),renderCell:e=>(0,N.jsxs)(x.Z,{direction:"row",gap:2,alignItems:"center",justifyContent:"flex-start",margin:"5px",children:[(0,N.jsx)(u.Z,{sx:{bgcolor:_.Z[500]},alt:e.row.name,src:e.row.thumbnailUrl,children:e.row.name.charAt(0)}),(0,N.jsx)(A.Z,{width:"auto",fontWeight:500,children:e.row.name})]})},{field:"startTime",headerName:t("common_start_time"),flex:1,renderHeader:()=>(0,N.jsx)(I.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_start_time")}),renderCell:e=>(0,N.jsx)(A.Z,{width:"auto",children:(0,B.J$)(e.row.startTime,o)})},{field:"endTime",headerName:t("common_end_time"),flex:1,renderHeader:()=>(0,N.jsx)(I.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_end_time")}),renderCell:e=>(0,N.jsx)(A.Z,{width:"auto",children:(0,B.J$)(e.row.endTime,o)})},{field:"numOfParticipants",headerName:t("common_num_of_participants"),flex:.4,minWidth:100,renderHeader:()=>(0,N.jsx)(I.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_num_of_participants")}),renderCell:e=>(0,N.jsx)(A.Z,{width:"auto",children:e.row.numOfParticipants})},{field:"isPublic",headerName:t("contest_is_public"),flex:.5,align:"center",renderHeader:()=>(0,N.jsx)(I.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("contest_is_public")}),renderCell:e=>(0,N.jsx)(h.Z,{disableRipple:!0,checked:!0===e.row.isPublic,color:e.row.isPublic?"success":"error",sx:{"&:hover":{backgroundColor:"transparent !important",cursor:"default"}}})},{field:"status",headerName:t("common_status"),flex:.7,renderHeader:()=>(0,N.jsx)(I.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_status")}),renderCell:e=>(0,N.jsx)(p.Z,{size:"small",label:e.row.status===R.m.UPCOMING?t("common_upcoming"):e.row.status===R.m.HAPPENING?t("common_in_progress"):t("common_ended"),variant:"outlined",color:e.row.status===R.m.UPCOMING?"primary":e.row.status===R.m.HAPPENING?"success":"error",component:A.Z})},{field:"action",headerName:t("common_action"),type:"actions",flex:.6,renderHeader:()=>(0,N.jsx)(E.Z,{width:"auto",sx:{textAlign:"left"},children:t("common_action")}),getActions:e=>[(0,N.jsx)(Z.u,{icon:(0,N.jsx)(m.Z,{}),label:"Edit",onClick:()=>{s(q._.admin.contest.edit.details.replace(":contestId",e.row.contestId),{state:{contestName:e.row.name}})}}),(0,N.jsx)(Z.u,{icon:(0,N.jsx)(d.Z,{}),label:"Delete"})]}],[M,Q]=(0,U.useState)(0),[K,$]=(0,U.useState)(10),Y=(0,U.useMemo)((()=>v.contests.totalItems||0),[v.contests]),J=(0,U.useMemo)((()=>v.contests.contests.map((e=>{const t=e.startTime&&D()().utc().isBefore(e.startTime)?R.m.UPCOMING:e.endTime&&D()().utc().isAfter(e.endTime)?R.m.ENDED:R.m.HAPPENING;return{id:e.contestId,contestId:e.contestId,name:e.name,description:e.description,prizes:e.prizes,rules:e.rules,scoring:e.scoring,thumbnailUrl:e.thumbnailUrl,startTime:e.startTime,endTime:e.endTime,questions:e.questions,numOfParticipants:e.numOfParticipants,status:t,isPublic:e.isPublic,isRestrictedForum:e.isRestrictedForum,isDisabledForum:e.isDisabledForum,createdBy:e.createdBy,createdAt:e.createdAt,updatedAt:e.updatedAt,updatedBy:e.updatedBy}}))),[v.contests]),X=(0,U.useCallback)((()=>{C({searchName:i,startTimeFilter:y})}),[C,i,y]),ee=(0,U.useCallback)((()=>{b(R.m.ALL),C({searchName:i,startTimeFilter:R.m.ALL})}),[C,i]);return(0,U.useEffect)((()=>{c(W.ZP.language)}),[W.ZP.language]),(0,U.useEffect)((()=>{(async()=>{w((0,O.K4)(!0)),await C({searchName:"",startTimeFilter:R.m.ALL}),w((0,O.K4)(!1))})()}),[w,C]),(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(g.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"}},children:[(0,N.jsx)(n.Z,{className:H.breadcump,ref:e,children:(0,N.jsx)(n.Z,{id:H.breadcumpWrapper,children:(0,N.jsx)(A.Z,{colorname:"--blue-500","translate-key":"contest_management_title",children:t("contest_management_title")})})}),(0,N.jsx)(j.Z,{}),(0,N.jsxs)(r.ZP,{container:!0,spacing:2,sx:{padding:"20px"},children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(F.Z,{"translate-key":"contest_management_title",children:t("contest_management_title")})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(T,{isLoading:v.isLoading,searchValue:i,setSearchValue:a,onHandleChange:S,createBtnText:t("contest_create"),onClickCreate:()=>{s(q._.admin.contest.create)},numOfResults:Y,filterKeyList:[{label:t("common_status"),value:"Status"}],filterValueList:[{label:t("common_all"),value:R.m.ALL},{label:t("common_upcoming"),value:R.m.UPCOMING},{label:t("common_in_progress"),value:R.m.HAPPENING},{label:t("common_ended"),value:R.m.ENDED}],currentFilterKey:"Status",currentFilterValue:y,handleFilterValueChange:e=>{b(e)},onHandleApplyFilter:X,onHandleCancelFilter:ee})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(f.Z,{loading:v.isLoading,dataList:J,tableHeader:k,onSelectData:(e,t)=>{},dataGridToolBar:{enableToolbar:!0},page:M,pageSize:K,totalElement:Y,onPaginationModelChange:(e,t)=>{$(e.pageSize),Q(e.page),C({searchName:i,startTimeFilter:R.m.ALL,pageNo:e.page,pageSize:e.pageSize})},showVerticalCellBorder:!0,getRowHeight:()=>"auto",onClickRow:e=>{},sx:{"& .MuiDataGrid-cell":{border:"none"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f5f9fb"},"& .MuiDataGrid-toolbarContainer":{backgroundColor:"#f5f9fb"}},personalSx:!0})})]})]})})};var K=s(62563),$=s(96447),Y=s(83929),J=s(27013),X=s(15535),ee=s(16977),te=s(35659),se=s(75627),re=s(21933);const ne="styles_formBody__4S2B5",ie="styles_breadcump__bLd4l",ae="styles_breadcumpWrapper__QNcnk",le="styles_icArrow__tM8ll",oe="styles_cursorPointer__A6Tq+";var ce=s(66565),de=s(82098);const me=()=>{const e=(0,U.useRef)(null),{t:t}=(0,P.$G)(),s=(0,l.s0)(),[i,a]=(0,U.useState)(!1),[o,c]=(0,U.useState)(J.N.INFO),[d,m]=(0,U.useState)(""),[u,p]=(0,U.useState)(!1),_=(0,z.I0)(),Z=(0,U.useMemo)((()=>re.Ry().shape({isNoEndTime:re.O7().required(t("contest_is_no_end_time_required")),name:re.Z_().required(t("contest_name_required")).trim(""),startTime:re.Z_().required(t("contest_start_time_required")).trim("").test("startTime",t("contest_start_time_greater_than_current_time"),(function(e){return D()(e).isAfter(D()().utc())})),endTime:re.Z_().nullable().test("endTime",t("contest_end_time_required"),(function(e){return!!this.parent.isNoEndTime||!!e})).test("endTime",t("contest_end_time_greater_than_start_time"),(function(e){return!!this.parent.isNoEndTime||D()(e).isAfter(this.parent.startTime)}))})),[t]),{control:f,handleSubmit:y,watch:b,formState:{errors:v},setValue:w}=(0,se.cI)({resolver:(0,K.X)(Z),defaultValues:{isNoEndTime:!1,name:"",startTime:D().utc().add(30,"minute").toISOString(),endTime:D().utc().add(1,"hour").toISOString()}}),C=(0,U.useCallback)((async e=>{let{name:r,description:n,thumbnailUrl:i,startTime:l,endTime:o}=e;p(!0);try{const e=await G.c.createContest({name:r,description:n,thumbnailUrl:i,startTime:l,endTime:o});e.name===r&&(a(!0),c(J.N.Success),m(t("contest_create_success")),p(!1),s(q._.admin.contest.edit.details.replace(":contestId",e.contestId)))}catch(d){console.error("error",d),401!==d.code&&403!==d.code||_((0,V.lS)("Please sign in to continue")),p(!1)}}),[_,s,t]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(J.Z,{open:i,setOpen:a,type:o,content:d}),(0,N.jsxs)(g.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"},gap:"20px"},children:[(0,N.jsx)(n.Z,{className:ie,ref:e,children:(0,N.jsxs)(n.Z,{id:ae,children:[(0,N.jsx)(A.Z,{colorname:"--blue-500",className:oe,onClick:()=>s(q._.admin.contest.root),"translation-key":"contest_management_title",children:t("contest_management_title")}),(0,N.jsx)($.Z,{id:le}),(0,N.jsx)(A.Z,{colorname:"--blue-500","translate-key":"contest_create",children:t("contest_create")})]})}),(0,N.jsx)(j.Z,{}),(0,N.jsxs)(n.Z,{sx:{padding:"20px"},children:[(0,N.jsx)(F.Z,{"translate-key":"contest_create",children:t("contest_create")}),(0,N.jsxs)(x.Z,{direction:"column",gap:2,sx:{marginTop:"20px"},children:[(0,N.jsx)(A.Z,{fontStyle:"italic","translate-key":"contest_description_message_1",children:t("contest_description_message_1")}),(0,N.jsx)(A.Z,{fontStyle:"italic","translate-key":"contest_description_message_2",children:t("contest_description_message_2")})]}),(0,N.jsxs)(n.Z,{component:"form",className:ne,onSubmit:y((async e=>{const t={...e},{isNoEndTime:s,name:r,startTime:n,endTime:i}=t;await C({name:r,description:"",thumbnailUrl:"",startTime:n,endTime:s?null:i})})),children:[(0,N.jsx)(se.Qr,{control:f,name:"name",rules:{required:!0},render:e=>{var s;let{field:{ref:r,...n}}=e;return(0,N.jsx)(ee.Z,{error:Boolean(null===v||void 0===v?void 0:v.name),errorMessage:null===(s=v.name)||void 0===s?void 0:s.message,title:"".concat(t("contest_name")),type:"text",placeholder:t("contest_enter_contest_name"),titleRequired:!0,"translation-key":"contest_enter_contest_name",inputRef:r,width:"350px",fullWidth:!0,...n})}}),(0,N.jsx)(r.ZP,{container:!0,spacing:1,columns:12,children:(0,N.jsx)(se.Qr,{control:f,name:"startTime",rules:{required:!0},render:e=>{let{field:{ref:s,...n}}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.ZP,{item:!0,xs:4,children:(0,N.jsx)(te.Z,{"translate-key":"contest_start_time",title:t("contest_start_time"),titleRequired:!0,tooltipDescription:t("contest_start_time_tooltip")})}),(0,N.jsxs)(r.ZP,{item:!0,xs:7,children:[(0,N.jsx)(X.Z,{value:D()(n.value),onHandleValueChange:e=>{e&&w("startTime",e.toISOString())},width:"350px"}),v.startTime&&(0,N.jsx)(r.ZP,{item:!0,xs:12,children:v.startTime.message&&(0,N.jsx)(de.Z,{children:v.startTime.message||""})})]})]})}})}),(0,N.jsx)(se.Qr,{control:f,name:"endTime",rules:{required:!0},render:e=>{let{field:{ref:s,...n}}=e;return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(r.ZP,{container:!0,spacing:1,columns:12,children:[(0,N.jsx)(r.ZP,{item:!0,xs:4,children:(0,N.jsx)(te.Z,{"translate-key":"contest_end_time",title:t("contest_end_time"),titleRequired:!0,tooltipDescription:t("contest_end_time_tooltip")})}),(0,N.jsx)(r.ZP,{item:!0,xs:7,children:(0,N.jsxs)(x.Z,{direction:"column",gap:1,children:[(0,N.jsx)(X.Z,{value:D()(n.value),disabled:b("isNoEndTime"),onHandleValueChange:e=>{e&&w("endTime",e.toISOString())},width:"350px"}),(0,N.jsx)(se.Qr,{control:f,name:"isNoEndTime",render:e=>{let{field:{ref:s,...r}}=e;return(0,N.jsx)(Y.Z,{control:(0,N.jsx)(h.Z,{color:"primary",...r}),label:t("this_contest_has_no_end_time")})}}),v.endTime&&(0,N.jsx)(r.ZP,{item:!0,xs:12,children:v.endTime.message&&(0,N.jsx)(de.Z,{children:v.endTime.message||""})})]})})]})})}}),(0,N.jsx)(r.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:(0,N.jsx)(ce.Z,{loading:u,variant:"solid",type:"submit","translation-key":"common_get_started",children:t("common_get_started")})})]})]})]})]})};var xe=s(95861),ue=s(65280),he=s(38037);const pe={formBody:"styles_formBody__cwJLB"};var ge=s(92556),je=s(95087);const _e=e=>{let{control:t,errors:s,setValue:n,watch:i}=e;const{t:a}=(0,P.$G)(),[l,o]=(0,U.useState)([]);return(0,U.useEffect)((()=>{var e;l.length>0&&n("thumbnailUrl",(null===(e=l[0])||void 0===e?void 0:e.downloadUrl)||"")}),[l,n]),(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(r.ZP,{container:!0,gap:2,direction:"column",className:pe.container,sx:{margin:"0px 20px 20px 20px",width:"calc(100% - 40px)"},children:[(0,N.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,N.jsx)(he.Z,{"translate-key":"contest_details",children:a("contest_details")}),(0,N.jsx)(A.Z,{fontStyle:"italic",sx:{marginTop:"10px"},"translate-key":"contest_details_description",children:a("contest_details_description")})]}),(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsxs)(r.ZP,{container:!0,gap:2,direction:"column",children:[(0,N.jsx)(se.Qr,{control:t,name:"name",rules:{required:!0},render:e=>{var t;let{field:{ref:r,...n}}=e;return(0,N.jsx)(ee.Z,{error:Boolean(null===s||void 0===s?void 0:s.name),errorMessage:null===(t=s.name)||void 0===t?void 0:t.message,title:"".concat(a("contest_name")),type:"text",placeholder:a("contest_enter_contest_name"),titleRequired:!0,"translation-key":"contest_enter_contest_name",inputRef:r,width:"350px",fullWidth:!0,...n})}}),(0,N.jsx)(r.ZP,{container:!0,spacing:2,columns:12,children:(0,N.jsx)(se.Qr,{control:t,name:"startTime",rules:{required:!0},render:e=>{let{field:{ref:t,...i}}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,N.jsx)(te.Z,{"translate-key":"contest_start_time",title:a("contest_start_time"),titleRequired:!0})}),(0,N.jsxs)(r.ZP,{item:!0,xs:12,md:8,children:[(0,N.jsx)(X.Z,{value:D()(i.value),onHandleValueChange:e=>{e&&n("startTime",e.toISOString())},width:"350px"}),s.startTime&&(0,N.jsx)(r.ZP,{item:!0,xs:12,children:s.startTime.message&&(0,N.jsx)(de.Z,{children:s.startTime.message||""})})]})]})}})}),(0,N.jsx)(r.ZP,{container:!0,spacing:2,columns:12,children:(0,N.jsx)(se.Qr,{control:t,name:"endTime",rules:{required:!0},render:e=>{let{field:{ref:l,...o}}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,N.jsx)(te.Z,{"translate-key":"contest_end_time",title:a("contest_end_time"),titleRequired:!0,tooltipDescription:a("contest_end_time_tooltip")})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,md:8,children:(0,N.jsxs)(x.Z,{direction:"column",gap:1,children:[(0,N.jsx)(X.Z,{value:D()(o.value),disabled:i("isNoEndTime"),onHandleValueChange:e=>{e&&n("endTime",e.toISOString())},width:"350px"}),(0,N.jsx)(se.Qr,{control:t,name:"isNoEndTime",render:e=>{let{field:{ref:t,...s}}=e;return(0,N.jsx)(Y.Z,{control:(0,N.jsx)(h.Z,{color:"primary",...s,checked:s.value}),label:a("this_contest_has_no_end_time")})}}),s.endTime&&(0,N.jsx)(r.ZP,{item:!0,xs:12,children:s.endTime.message&&(0,N.jsx)(de.Z,{children:s.endTime.message||""})})]})})]})}})}),(0,N.jsx)(r.ZP,{container:!0,spacing:2,columns:12,children:(0,N.jsx)(se.Qr,{control:t,name:"isPublic",rules:{required:!0},render:e=>{let{field:{ref:n,...i}}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,N.jsx)(te.Z,{"translate-key":"contest_is_public",title:a("contest_is_public"),titleRequired:!0,tooltipDescription:a("contest_is_public_tooltip")})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,md:8,children:(0,N.jsxs)(x.Z,{direction:"column",gap:1,children:[(0,N.jsx)(se.Qr,{control:t,name:"isPublic",render:e=>{let{field:{ref:t,...s}}=e;return(0,N.jsx)(Y.Z,{control:(0,N.jsx)(h.Z,{color:"primary",...s,checked:s.value}),label:""})}}),s.isPublic&&(0,N.jsx)(r.ZP,{item:!0,xs:12,children:s.isPublic.message&&(0,N.jsx)(de.Z,{children:s.isPublic.message||""})})]})})]})}})})]})}),(0,N.jsx)(j.Z,{}),(0,N.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,N.jsx)(he.Z,{"translate-key":"contest_metadata_customization",children:a("contest_metadata_customization")}),(0,N.jsx)(A.Z,{fontStyle:"italic",sx:{marginTop:"10px"},"translate-key":"contest_metadata_customization_description",children:a("contest_metadata_customization_description")})]}),(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsxs)(r.ZP,{container:!0,gap:5,direction:"column",children:[(0,N.jsx)(r.ZP,{container:!0,spacing:2,columns:12,sx:{marginBottom:"-20px"},children:(0,N.jsx)(se.Qr,{control:t,name:"isPublic",rules:{required:!0},render:e=>{let{field:{ref:n,...i}}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,N.jsx)(te.Z,{"translate-key":"contest_thumbnail",title:a("contest_thumbnail"),titleRequired:!0})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,md:7,children:(0,N.jsxs)(x.Z,{direction:"column",gap:1,children:[(0,N.jsx)(se.Qr,{control:t,name:"thumbnailUrl",rules:{required:!0},render:e=>{let{field:{ref:t,...s}}=e;return(0,N.jsx)(je.Z,{extFiles:l,setExtFiles:o,maxFileSize:5242880,accept:".bmp, .gif, .jpeg, .jpg, .png, .svg, .tif, .tiff",maxFiles:1})}}),s.thumbnailUrl&&(0,N.jsx)(r.ZP,{item:!0,xs:12,children:s.thumbnailUrl.message&&(0,N.jsx)(de.Z,{children:s.thumbnailUrl.message||""})})]})})]})}})}),(0,N.jsx)(r.ZP,{container:!0,spacing:2,columns:12,children:(0,N.jsx)(se.Qr,{control:t,name:"isPublic",rules:{required:!0},render:e=>{let{field:{ref:i,...l}}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,N.jsx)(te.Z,{"translate-key":"common_description",title:a("common_description")})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,md:7,children:(0,N.jsxs)(x.Z,{direction:"column",gap:1,children:[(0,N.jsx)(se.Qr,{control:t,name:"description",render:e=>{let{field:{ref:t,...s}}=e;return(0,N.jsx)(ge.Z,{value:s.value,onChange:e=>{n("description",e)},maxLines:10})}}),s.description&&(0,N.jsx)(r.ZP,{item:!0,xs:12,children:s.description.message&&(0,N.jsx)(de.Z,{children:s.description.message||""})})]})})]})}})}),(0,N.jsx)(r.ZP,{container:!0,spacing:2,columns:12,children:(0,N.jsx)(se.Qr,{control:t,name:"isPublic",rules:{required:!0},render:e=>{let{field:{ref:i,...l}}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,N.jsx)(te.Z,{"translate-key":"common_prizes",title:a("common_prizes")})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,md:7,children:(0,N.jsxs)(x.Z,{direction:"column",gap:1,children:[(0,N.jsx)(se.Qr,{control:t,name:"prizes",rules:{required:!0},render:e=>{let{field:{ref:t,...s}}=e;return(0,N.jsx)(ge.Z,{value:s.value,onChange:e=>{n("prizes",e)},maxLines:10})}}),s.prizes&&(0,N.jsx)(r.ZP,{item:!0,xs:12,children:s.prizes.message&&(0,N.jsx)(de.Z,{children:s.prizes.message||""})})]})})]})}})}),(0,N.jsx)(r.ZP,{container:!0,spacing:2,columns:12,children:(0,N.jsx)(se.Qr,{control:t,name:"isPublic",rules:{required:!0},render:e=>{let{field:{ref:i,...l}}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,N.jsx)(te.Z,{"translate-key":"common_rules",title:a("common_rules")})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,md:7,children:(0,N.jsxs)(x.Z,{direction:"column",gap:1,children:[(0,N.jsx)(se.Qr,{control:t,name:"rules",rules:{required:!0},render:e=>{let{field:{ref:t,...s}}=e;return(0,N.jsx)(ge.Z,{value:s.value,onChange:e=>{n("rules",e)},maxLines:10})}}),s.rules&&(0,N.jsx)(r.ZP,{item:!0,xs:12,children:s.rules.message&&(0,N.jsx)(de.Z,{children:s.rules.message||""})})]})})]})}})}),(0,N.jsx)(r.ZP,{container:!0,spacing:2,columns:12,children:(0,N.jsx)(se.Qr,{control:t,name:"isPublic",rules:{required:!0},render:e=>{let{field:{ref:i,...l}}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,N.jsx)(te.Z,{"translate-key":"common_scoring",title:a("common_scoring")})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,md:7,children:(0,N.jsxs)(x.Z,{direction:"column",gap:1,children:[(0,N.jsx)(se.Qr,{control:t,name:"scoring",rules:{required:!0},render:e=>{let{field:{ref:t,...s}}=e;return(0,N.jsx)(ge.Z,{value:s.value,onChange:e=>{n("scoring",e)},maxLines:10})}}),s.scoring&&(0,N.jsx)(r.ZP,{item:!0,xs:12,children:s.scoring.message&&(0,N.jsx)(de.Z,{children:s.scoring.message||""})})]})})]})}})}),(0,N.jsx)(r.ZP,{container:!0,spacing:2,columns:12,height:"70px"})]})})]})})};var Ze=s(51629),fe=s(66835),ye=s(23477),be=s(24076),ve=s(70941),we=s(57861),Pe=s(90891);const Ce={formBody:"styles_formBody__+Pnep",container:"styles_container__SfjDG",icon:"styles_icon__Zatl9",iconCheck:"styles_iconCheck__LD1KI",pagination:"styles_pagination__tt9N9","table-head":"styles_table-head__+4r9Q","table-cell":"styles_table-cell__-Blhe",linkText:"styles_linkText__Nb9Eb",row1:"styles_row1__q+vMZ"};var Se=s(34923),ke=s(2135);const Ne=()=>{const{t:e}=(0,P.$G)(),[t,s]=(0,U.useState)([]);return(0,N.jsxs)(r.ZP,{container:!0,gap:2,direction:"column",className:Ce.container,sx:{margin:"0px 20px 20px 20px",width:"calc(100% - 40px)",minHeight:"600px"},children:[(0,N.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,N.jsx)(he.Z,{"translate-key":"contest_problems",children:e("contest_problems")}),(0,N.jsx)(A.Z,{fontStyle:"italic",sx:{marginTop:"10px"},"translate-key":"contest_problems_description",children:e("contest_problems_description")})]}),(0,N.jsx)(ce.Z,{color:"primary",sx:{width:"150px"},variant:"outlined","translate-key":"contest_add_problem_button",children:e("contest_add_problem_button")}),(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(Ze.Z,{component:y.Z,children:(0,N.jsxs)(fe.Z,{"aria-label":"custom table",children:[(0,N.jsx)(ye.Z,{className:Ce["table-head"],children:(0,N.jsxs)(be.Z,{children:[(0,N.jsx)(ve.Z,{align:"left",sx:{width:"10%"},children:(0,N.jsx)(Se.Z,{fontWeight:"700","translation-key":"common_no",children:e("common_no")})}),(0,N.jsx)(ve.Z,{align:"left",sx:{width:"40%"},children:(0,N.jsx)(Se.Z,{fontWeight:"700","translation-key":"common_name",children:e("common_name")})}),(0,N.jsx)(ve.Z,{align:"left",sx:{width:"20%"},children:(0,N.jsx)(Se.Z,{fontWeight:"700","translation-key":"common_max_score",children:e("common_max_score")})}),(0,N.jsx)(ve.Z,{align:"left",className:Ce.status,sx:{width:"30%"},children:(0,N.jsx)(Se.Z,{fontWeight:"700"})})]})}),(0,N.jsxs)(we.Z,{children:[t&&t.length>0&&t.map(((e,t)=>(0,N.jsxs)(be.Z,{className:t%2===0?Ce.row:Ce.row1,children:[(0,N.jsx)(ve.Z,{align:"center",children:t}),(0,N.jsx)(ve.Z,{className:Ce.tableCell,children:(0,N.jsx)(A.Z,{fontWeight:"500",className:Ce.linkText,children:(0,N.jsx)(Pe.Z,{component:ke.rU,to:q._.user.problem.detail.description.replace(":problemId",e.id),underline:"hover",color:"inherit",children:e.name})})}),(0,N.jsx)(ve.Z,{children:e.level})]},t))),(!t||0===t.length)&&(0,N.jsx)(be.Z,{children:(0,N.jsx)(ve.Z,{colSpan:4,sx:{textAlign:"center"},children:(0,N.jsx)(C.Z,{className:Ce.noList,"translation-key":"list_problem_not_found_data",children:e("list_problem_not_found_data")})})})]})]})})})]})},Te=()=>{const{t:e}=(0,P.$G)(),{contestId:t}=(0,l.UO)(),[s,n]=(0,U.useState)(!1),[i,a]=(0,U.useState)([]),[o,c]=(0,U.useState)((()=>W.ZP.language));(0,U.useEffect)((()=>{c(W.ZP.language)}),[W.ZP.language]);const d=[{field:"no",headerName:e("common_no"),flex:.4,renderHeader:()=>(0,N.jsx)(I.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("common_no")}),renderCell:e=>(0,N.jsx)(A.Z,{width:"auto",children:e.row.no})},{field:"email",headerName:e("common_email"),flex:1,renderHeader:()=>(0,N.jsx)(I.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("common_email")}),renderCell:e=>(0,N.jsxs)(x.Z,{direction:"row",gap:2,alignItems:"center",justifyContent:"flex-start",margin:"5px",children:[(0,N.jsx)(u.Z,{sx:{bgcolor:_.Z[500]},alt:e.row.email,src:e.row.avatarUrl,children:e.row.email.charAt(0)}),(0,N.jsx)(A.Z,{width:"auto",fontWeight:500,children:e.row.email})]})},{field:"createdAt",headerName:e("contest_sign_up_date"),flex:1,renderHeader:()=>(0,N.jsx)(I.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("contest_sign_up_date")}),renderCell:e=>(0,N.jsx)(A.Z,{width:"auto",children:(0,B.J$)(e.row.createdAt,o)})}],m=(0,U.useCallback)((async(e,t,s)=>{n(!0);try{const r=await G.c.getSignUpsOfContest(e,t,s,!1);a(r.contestUsers),n(!1)}catch(r){console.error("error",r),n(!1)}}),[]),[h,p]=(0,U.useState)(0),[g,j]=(0,U.useState)(10),Z=(0,U.useMemo)((()=>i.map(((e,t)=>{var s,r;return{id:"".concat(e.contestId).concat(e.user.userId),no:t+1,email:(null===(s=e.user)||void 0===s?void 0:s.email)||"",createdAt:e.createdAt,avatarUrl:(null===(r=e.user)||void 0===r?void 0:r.avatarUrl)||""}}))),[i]);return(0,U.useEffect)((()=>{t&&m(t,h,g)}),[t,m,h,g]),t?(0,N.jsx)(r.ZP,{container:!0,gap:2,direction:"column",sx:{margin:"0px 20px 20px 20px",width:"calc(100% - 40px)",minHeight:"600px"},children:(0,N.jsx)(r.ZP,{container:!0,spacing:2,sx:{padding:"20px"},children:(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(f.Z,{loading:s,dataList:Z,tableHeader:d,onSelectData:(e,t)=>{},dataGridToolBar:{enableToolbar:!0},page:h,pageSize:g,totalElement:100,onPaginationModelChange:(e,s)=>{t&&(p(e.page),j(e.pageSize),m(t,e.page,e.pageSize))},showVerticalCellBorder:!0,getRowHeight:()=>"auto",onClickRow:e=>{},sx:{"& .MuiDataGrid-cell":{border:"none"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f5f9fb"},"& .MuiDataGrid-toolbarContainer":{backgroundColor:"#f5f9fb"}},personalSx:!0})})})}):null},Fe={},Ie=()=>{const{t:e}=(0,P.$G)();return(0,N.jsx)(r.ZP,{container:!0,gap:2,direction:"column",className:Fe.container,sx:{margin:"0px 20px 20px 20px",width:"calc(100% - 40px)",minHeight:"600px"},children:(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(he.Z,{"translate-key":"common_statistics",children:e("common_statistics")})})})},Ae="styles_formBody__ZSG6f",Ee="styles_breadcump__T7a9E",We="styles_breadcumpWrapper__R7SGo",Re="styles_icArrow__bYt8n",Me="styles_cursorPointer__HLN-2",De="styles_tabs__55ljR",Ue=e=>{let{control:t,errors:s,setValue:n,watch:i}=e;const{t:a}=(0,P.$G)();return(0,N.jsxs)(r.ZP,{container:!0,gap:2,direction:"column",sx:{margin:"0px 20px 20px 20px",width:"calc(100% - 40px)",minHeight:"600px"},children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(he.Z,{"translate-key":"contest_forum",children:a("contest_forum")})}),(0,N.jsxs)(r.ZP,{item:!0,xs:12,sx:{marginTop:"10px"},children:[(0,N.jsx)(r.ZP,{container:!0,spacing:2,columns:12,children:(0,N.jsx)(se.Qr,{control:t,name:"isRestrictedForum",rules:{required:!0},render:e=>{let{field:{ref:n,...i}}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(r.ZP,{item:!0,xs:12,md:4,children:[(0,N.jsx)(te.Z,{"translate-key":"contest_is_restricted_forum",title:a("contest_is_restricted_forum")}),(0,N.jsx)(A.Z,{sx:{marginTop:"5px"},fontStyle:"italic","translate-key":"contest_is_restricted_forum_tooltip",children:a("contest_is_restricted_forum_tooltip")})]}),(0,N.jsx)(r.ZP,{item:!0,xs:12,md:7,children:(0,N.jsxs)(x.Z,{direction:"column",gap:1,children:[(0,N.jsx)(se.Qr,{control:t,name:"isRestrictedForum",render:e=>{let{field:{ref:t,...s}}=e;return(0,N.jsx)(Y.Z,{control:(0,N.jsx)(h.Z,{color:"primary",...s,checked:s.value}),label:""})}}),s.isRestrictedForum&&(0,N.jsx)(r.ZP,{item:!0,xs:12,children:s.isRestrictedForum.message&&(0,N.jsx)(de.Z,{children:s.isRestrictedForum.message||""})})]})})]})}})}),(0,N.jsx)(r.ZP,{container:!0,spacing:2,columns:12,sx:{marginTop:"10px"},children:(0,N.jsx)(se.Qr,{control:t,name:"isDisabledForum",rules:{required:!0},render:e=>{let{field:{ref:n,...i}}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(r.ZP,{item:!0,xs:12,md:4,children:[(0,N.jsx)(te.Z,{"translate-key":"contest_is_disabled_forum",title:a("contest_is_disabled_forum")}),(0,N.jsx)(A.Z,{sx:{marginTop:"5px"},fontStyle:"italic","translate-key":"contest_is_disabled_forum_tooltip",children:a("contest_is_disabled_forum_tooltip")})]}),(0,N.jsx)(r.ZP,{item:!0,xs:12,md:7,children:(0,N.jsxs)(x.Z,{direction:"column",gap:1,children:[(0,N.jsx)(se.Qr,{control:t,name:"isDisabledForum",render:e=>{let{field:{ref:t,...s}}=e;return(0,N.jsx)(Y.Z,{control:(0,N.jsx)(h.Z,{color:"primary",...s,checked:s.value}),label:""})}}),s.isDisabledForum&&(0,N.jsx)(r.ZP,{item:!0,xs:12,children:s.isDisabledForum.message&&(0,N.jsx)(de.Z,{children:s.isDisabledForum.message||""})})]})})]})}})})]})]})};var ze=s(62614);const Le=e=>{let{isDrawerOpen:t}=e;const s=(0,U.useRef)(null),{t:r}=(0,P.$G)(),i=(0,l.s0)(),{pathname:a}=(0,l.TH)(),[o,c]=(0,U.useState)(!1),[d,m]=(0,U.useState)(J.N.INFO),[x,u]=(0,U.useState)(""),{contestId:h}=(0,l.UO)(),[p,_]=(0,U.useState)(!1),[Z,f]=(0,U.useState)(""),y=(0,U.useMemo)((()=>[q._.admin.contest.edit.details,q._.admin.contest.edit.problems,q._.admin.contest.edit.advanced_settings,q._.admin.contest.edit.signups,q._.admin.contest.edit.statistics]),[q._]),b=(0,U.useMemo)((()=>{if(h){const e=y.findIndex((e=>{return t=e.replace(":contestId",h),!!a.startsWith(t);var t}));return-1===e?0:e}}),[a,y]),v=(0,U.useMemo)((()=>re.Ry().shape({isNoEndTime:re.O7().required(r("contest_is_no_end_time_required")),name:re.Z_().required(r("contest_name_required")).trim(""),startTime:re.Z_().required(r("contest_start_time_required")).trim("").test("startTime",r("contest_start_time_greater_than_current_time"),(function(e){return D()(e).isAfter(D()().utc())})),endTime:re.Z_().nullable().test("endTime",r("contest_end_time_required"),(function(e){return!!this.parent.isNoEndTime||!!e})).test("endTime",r("contest_end_time_greater_than_start_time"),(function(e){return!!this.parent.isNoEndTime||D()(e).isAfter(this.parent.startTime)})),thumbnailUrl:re.Z_().trim(""),description:re.Z_().trim(""),prizes:re.Z_().trim(""),rules:re.Z_().trim(""),scoring:re.Z_().trim(""),isPublic:re.O7().required(r("contest_is_public_required")),isRestrictedForum:re.O7().required(r("contest_is_restricted_forum_required")),isDisabledForum:re.O7().required(r("contest_is_disabled_forum_required"))})),[r]),{control:w,handleSubmit:S,watch:k,formState:{errors:T},setValue:I,reset:E}=(0,se.cI)({resolver:(0,K.X)(v),defaultValues:{isNoEndTime:!1,name:"",startTime:D().utc().add(30,"minute").toISOString(),endTime:D().utc().add(1,"hour").toISOString(),thumbnailUrl:"",description:"",prizes:"",rules:"",scoring:"",isPublic:!1,isRestrictedForum:!1,isDisabledForum:!1}}),W=(0,U.useCallback)((async e=>{try{const t=await G.c.getContestById(e);if(t){const e=t.description?t.description:"Please provide a short description of your contest here!",s=t.prizes&&""!==t.prizes?t.prizes:"- Prizes are optional. You may add any prizes that you would like to offer here.",r=t.rules&&""!==t.rules?t.rules:"- Please provide any rules for your contest here.",n=t.scoring&&""!==t.scoring?t.scoring:"- Each challenge has a pre-determined score.<br/>\n              - A participant\u2019s score depends on the number of test cases a participant\u2019s code submission successfully passes.<br/>\n              - If a participant submits more than one solution per challenge, then the participant\u2019s score will reflect the highest score achieved.<br/>\n              - Participants are ranked by score. If two or more participants achieve the same score, then the tie is broken by the total time taken to submit the last solution resulting in a higher score";E({name:t.name,startTime:t.startTime,endTime:t.endTime?t.endTime:null,isNoEndTime:!t.endTime,thumbnailUrl:t.thumbnailUrl,description:e,prizes:s,rules:r,scoring:n,isPublic:t.isPublic,isRestrictedForum:t.isRestrictedForum,isDisabledForum:t.isDisabledForum}),f(t.name)}}catch(t){console.error("error",t)}}),[E]),R=((0,U.useCallback)((async(e,t)=>{try{await G.c.updateContest(e,t)?(c(!0),m(J.N.Success),u("Contest updated successfully")):(c(!0),m(J.N.Error),u("Failed to update contest"))}catch(s){console.error("error",s),401===s.code||s.code}}),[]),async e=>{console.log("submitHandler",e)});return(0,U.useEffect)((()=>{h&&W(h)}),[h,W]),h?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(J.Z,{open:o,setOpen:c,type:d,content:x}),(0,N.jsxs)(n.Z,{component:"form",className:Ae,onSubmit:S(R),children:[(0,N.jsxs)(g.Z,{sx:{"& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"},margin:"20px",gap:"20px"},children:[(0,N.jsx)(n.Z,{className:Ee,ref:s,children:(0,N.jsxs)(n.Z,{id:We,children:[(0,N.jsx)(A.Z,{colorname:"--blue-500",className:Me,onClick:()=>i(q._.admin.contest.root),"translation-key":"contest_management_title",children:r("contest_management_title")}),(0,N.jsx)($.Z,{id:Re}),(0,N.jsx)(A.Z,{colorname:"--blue-500",children:Z})]})}),(0,N.jsx)(j.Z,{}),(0,N.jsx)(n.Z,{sx:{margin:"20px"},children:(0,N.jsx)(F.Z,{children:Z})}),(0,N.jsx)(n.Z,{sx:{margin:"20px",borderRadius:"5px",border:"1px solid #e0e0e0"},children:(0,N.jsxs)(xe.Z,{value:b,onChange:(e,t)=>{h&&i(y[t].replace(":contestId",h))},"aria-label":"basic tabs example",className:De,variant:"fullWidth",children:[(0,N.jsx)(ue.Z,{sx:{textTransform:"none"},label:(0,N.jsx)(C.Z,{"translate-key":"common_details",children:r("common_details")}),value:0}),(0,N.jsx)(ue.Z,{sx:{textTransform:"none"},label:(0,N.jsx)(C.Z,{"translate-key":"common_problems",children:r("common_problems")}),value:1}),(0,N.jsx)(ue.Z,{sx:{textTransform:"none"},label:(0,N.jsx)(C.Z,{"translate-key":"common_advanced_settings",children:r("common_advanced_settings")}),value:2}),(0,N.jsx)(ue.Z,{sx:{textTransform:"none"},label:(0,N.jsx)(C.Z,{"translate-key":"common_signups",children:r("common_signups")}),value:3}),(0,N.jsx)(ue.Z,{sx:{textTransform:"none"},label:(0,N.jsx)(C.Z,{"translate-key":"common_statistics",children:r("common_statistics")}),value:4})]})}),(0,N.jsx)(n.Z,{children:(0,N.jsxs)(l.Z5,{children:[(0,N.jsx)(l.AW,{path:"details",element:(0,N.jsx)(_e,{control:w,errors:T,setValue:I,watch:k})}),(0,N.jsx)(l.AW,{path:"problems",element:(0,N.jsx)(Ne,{})}),(0,N.jsx)(l.AW,{path:"advanced-settings",element:(0,N.jsx)(Ue,{control:w,errors:T,setValue:I,watch:k})}),(0,N.jsx)(l.AW,{path:"signups",element:(0,N.jsx)(Te,{})}),(0,N.jsx)(l.AW,{path:"statistics",element:(0,N.jsx)(Ie,{})}),(0,N.jsx)(l.AW,{path:"*",element:(0,N.jsx)(ze.Z,{})})]})})]}),(0,N.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"space-between",position:"fixed",bottom:"0px",padding:"20px",marginLeft:"-25px",backgroundColor:"white",borderTop:"1px solid #E0E0E0",width:t?"calc(100% - 300px)":"100%"},children:[(0,N.jsx)(ce.Z,{variant:"outlined","translation-key":"contest_preview_contest_details_page",onClick:()=>i(q._.user.contest.detail.information.replace(":contestId",h)),children:r("contest_preview_contest_details_page")}),(0,N.jsx)(ce.Z,{loading:p,variant:"solid",type:"submit","translation-key":"common_save_changes",onClick:S(R),children:r("common_save_changes")})]})]})]}):null};var Oe=s(46923),qe=s(17592),Ge=s(38707);const Be="styles_drawer__nt9TU",He="styles_img__CARKn",Ve="styles_itemIcon__rdsV2";var Qe=s(47477),Ke=s(2535),$e=s(90200),Ye=s(25614),Je=s(11163);const Xe=300,et=(0,qe.ZP)("main",{shouldForwardProp:e=>"open"!==e})((e=>{let{theme:t,open:s}=e;return{flexGrow:1,width:"calc(100% - ".concat(Xe,"px)"),overflow:"auto",padding:t.spacing(3),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(Xe,"px"),...s&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0}}}));function tt(e){let{open:t,toggleDrawer:s,children:r}=e;const{t:i}=(0,P.$G)(),a=[{name:i("common_dashboard"),"translation-key":"common_dashboard",icon:(0,N.jsx)(n.Z,{className:He,children:(0,N.jsx)(Ye.Z,{})}),link:q._.admin.dashboard},{name:i("side_bar_contest_management"),"translation-key":"side_bar_contest_management",icon:(0,N.jsx)(n.Z,{className:He,children:(0,N.jsx)("img",{src:Ke.Z.admin.contest,alt:"contest img"})}),link:q._.admin.contest.root},{name:i("user_management"),"translation-key":"user_management",icon:(0,N.jsx)(Je.Z,{className:Ve}),link:q._.admin.users.root}],l=(0,U.useRef)(null),{height:o}=(0,Qe.Z)({ref:l});return(0,N.jsxs)(n.Z,{sx:{display:"flex",width:"100%",height:"100%"},children:[(0,N.jsx)($e.Z,{toggleDrawer:s,ref:l}),(0,N.jsx)(Oe.ZP,{className:Be,sx:{width:Xe,flexShrink:0,"& .MuiDrawer-paper":{width:Xe,marginTop:"".concat(o+2,"px")}},variant:"persistent",anchor:"left",open:t,children:(0,N.jsx)(Ge.Z,{sideBarItem:a})}),(0,N.jsx)(et,{open:t,sx:{marginTop:"".concat(o,"px"),height:"calc(100% - ".concat(o,"px)")},children:r})]})}var st=s(56835),rt=s(84488),nt=s(2959);const it=e=>{const{title:t,value:s,mainColor:r,icon:i}=e;return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(nt.Z,{variant:"outlined",color:"neutral",sx:{height:"120px",backgroundColor:"#fff",paddingBottom:"0",paddingLeft:"0",paddingRight:"0",display:"flex",flexDirection:"column",justifyContent:"space-between",boxShadow:"lg"},children:[(0,N.jsxs)(x.Z,{direction:"row",spacing:2,margin:"0 1rem",display:"flex",justifyContent:"space-between",children:[(0,N.jsxs)(n.Z,{children:[(0,N.jsx)(C.Z,{letterSpacing:"0.5px",textTransform:"uppercase",colorname:"--gray-40",fontSize:"0.75rem",fontWeight:"500",lineHeight:"2.5",children:t}),(0,N.jsx)(C.Z,{fontSize:"2rem",fontWeight:"500",color:"#212121",children:s})]}),(0,N.jsx)(n.Z,{sx:{borderRadius:"1000px",backgroundColor:r,width:"50px",height:"50px"},display:"flex",justifyContent:"center",alignItems:"center",children:i})]}),(0,N.jsx)(n.Z,{sx:{height:"7px",width:"100%",backgroundColor:r,borderRadius:"0 0 100px 100px"}})]})})};var at=s(72864),lt=s(84915),ot=s(47892),ct=s(70646),dt=s(33099),mt=s(83703),xt=s(5818),ut=s(3948);const ht=e=>{let{label:t,color:s}=e;return(0,N.jsxs)(n.Z,{display:"flex",flexDirection:"row",alignItems:"center",children:[(0,N.jsx)(n.Z,{sx:{height:"10px",width:"10px",marginRight:"5px",backgroundColor:s,borderRadius:"100px"}}),(0,N.jsx)(C.Z,{fontSize:"0.75rem",colorname:"--gray-40",children:t})]})};var pt=s(1229),gt=s(15067),jt=s(68919),_t=s(26568),Zt=s(31279);const ft=e=>{const{scaleType:t,data:s,startGradientColor:r,endGradientColor:n,series:i}=e,a=i.map(((e,t)=>e&&e.data&&0!==e.data.length?{id:t,data:e.data,label:e.label,area:e.area}:{id:t,data:[],label:"",area:!1}));return(0,N.jsx)(jt.w,{sx:{"& .MuiChartsAxis-bottom .MuiChartsAxis-line":{stroke:"var(--gray-40)",strokeWidth:.4},"& .MuiChartsAxis-left .MuiChartsAxis-line":{stroke:"white",strokeWidth:.4},"& .MuiChartsAxis-left .MuiChartsAxis-tickLabel":{strokeWidth:"0.4",fill:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"},"& .MuiChartsAxis-bottom .MuiChartsAxis-tickLabel":{strokeWidth:"0.4",fill:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"},"& .MuiChartsAxis-bottom .MuiChartsAxis-tick":{strokeWidth:"1",stroke:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"},...r.reduce(((e,t,s)=>({...e,["& .MuiAreaElement-series-".concat(s)]:{fill:"url(#swich-color-id-".concat(s,")")}})),{})},colors:r,xAxis:[{scaleType:t,data:0!==s.length?s:[]}],yAxis:[{scaleType:"linear",disableTicks:!0}],series:a,height:320,grid:{horizontal:!0},margin:{left:30,right:20,top:40,bottom:30},slotProps:{legend:{hidden:!0}},children:0!==r.length&&0!==n.length&&r.map(((e,t)=>(0,N.jsx)(yt,{startGradientColor:e,endGradientColor:n[t],threshold:0,id:"swich-color-id-".concat(t)})))})},yt=e=>{let{threshold:t,id:s,endGradientColor:r,startGradientColor:n}=e;const{top:i,height:a,bottom:l}=(0,_t.z)(),o=i+l+a,c=(0,Zt.Ff)()(t),d=void 0!==c?c/o:0;return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("defs",{children:(0,N.jsxs)("linearGradient",{id:s,x1:"0",x2:"0",y1:"0",y2:"".concat(o,"px"),gradientUnits:"userSpaceOnUse",children:[(0,N.jsx)("stop",{offset:d,stopColor:n,stopOpacity:.4}),(0,N.jsx)("stop",{offset:d,stopColor:r,stopOpacity:0})]})})})},bt=["#3498db","#e74c3c","#2ecc71","#f1c40f","#9b59b6"],vt="#1abc9c",wt=()=>{const{t:e}=(0,P.$G)(),[t,s]=((0,pt.Z)(),(0,U.useState)(!0)),[i,a]=(0,U.useState)(0),[l,o]=(0,U.useState)(0),[c,d]=(0,U.useState)(0),m=new Date,u=m.getMonth(),h=m.getFullYear(),[p,g]=(0,U.useState)({totalUsers:0,activeUsers:0,offlineUsers:0,loginToday:0,registerUser:[],userByRole:[]}),[j,_]=(0,U.useState)({activeCourse:0,activeInactiveCourse:[],courseType:[],inactiveCourse:0,newCourses:void 0,recentAssignments:[],recentExam:[],totalCourse:0,totalEnrollments:0,userEnrollments:[]}),[Z,f]=(0,U.useState)(new Date(h,u+1,0).getDate()),y=[e("User"),e("Course"),e("Organization"),e("Contest"),e("Practice"),e("Certificate course")],b=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],v=31===Z?["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"],w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],S=["Title","Course name","Type","Created at"],k=["Exam name","Course name","Created at"];(0,U.useEffect)((()=>{(async()=>{await(async()=>{try{const e=await xt.K.getUserStatistics();g((t=>({...e,registerUser:e.registerUser.map((e=>({...e,area:!0})))})))}catch(e){console.log(e)}})(),await(async()=>{try{const e=await gt.N.getCourseStatistics();_((t=>({...e,userEnrollments:e.userEnrollments.map((e=>({...e,area:!0}))),activeInactiveCourse:e.activeInactiveCourse.map((e=>({...e,area:!0})))})))}catch(e){console.log(e)}})()})(),s(!1)}),[]);Array.from({length:168}).map(((e,t)=>({date:new Date(2022,0,1,t%24),count:Math.floor(10*Math.random())}))),Array.from({length:24}).map(((e,t)=>"".concat(t,":00")));return(0,N.jsxs)(N.Fragment,{children:[t&&(0,N.jsxs)(r.ZP,{container:!0,spacing:2,sx:{padding:3},children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(rt.Z,{variant:"text",sx:{fontSize:"1rem"}})}),(0,N.jsx)(r.ZP,{item:!0,xs:6,children:(0,N.jsx)(rt.Z,{variant:"text",height:50})}),(0,N.jsx)(r.ZP,{item:!0,xs:6}),(0,N.jsx)(r.ZP,{item:!0,xs:5,children:(0,N.jsx)(rt.Z,{variant:"text",sx:{fontSize:"1.5rem"}})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsxs)(r.ZP,{container:!0,spacing:4,children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,N.jsx)(rt.Z,{variant:"rounded",height:100})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,N.jsx)(rt.Z,{variant:"rounded",height:100})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,N.jsx)(rt.Z,{variant:"rounded",height:100})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,N.jsx)(rt.Z,{variant:"rounded",height:100})})]})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,md:12,children:(0,N.jsxs)(r.ZP,{container:!0,spacing:3,children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,md:8,children:(0,N.jsx)(rt.Z,{variant:"rounded",height:400})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,N.jsx)(rt.Z,{variant:"rounded",height:400})})]})})]}),!t&&(0,N.jsxs)(r.ZP,{container:!0,spacing:2,sx:{padding:3},children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(rt.Z,{variant:"text",sx:{fontSize:"1rem"}})}),(0,N.jsx)(r.ZP,{item:!0,xs:6,children:(0,N.jsx)(at.Z,{"aria-label":"tabs",defaultValue:i,value:i,sx:{bgcolor:"transparent"},onChange:(e,t)=>a(Number(t)||0),children:(0,N.jsx)(lt.Z,{disableUnderline:!0,sx:{p:.5,gap:.5,borderRadius:"xl",bgcolor:"background.level1",["& .".concat(ot.Z.root,'[aria-selected="true"]')]:{boxShadow:"sm",bgcolor:"background.surface"}},children:y.map(((e,t)=>(0,N.jsx)(ct.Z,{disableIndicator:!0,children:e},t)))})})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(nt.Z,{children:(0,N.jsx)(C.Z,{children:"Hello, tien"})})}),0===i&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.ZP,{item:!0,xs:5,children:(0,N.jsx)(dt.Z,{children:"User"})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsxs)(r.ZP,{container:!0,spacing:4,children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,N.jsx)(it,{icon:(0,N.jsx)("img",{src:Ke.Z.admin.onlineUser,alt:"online user",style:{width:"35px"}}),title:"Active user",value:p.activeUsers,mainColor:"#28a745"})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,N.jsx)(it,{icon:(0,N.jsx)("img",{src:Ke.Z.admin.offlineUser,alt:"online user",style:{width:"35px"}}),title:"Offline user",value:p.offlineUsers,mainColor:"#dc3545"})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,N.jsx)(it,{icon:(0,N.jsx)("img",{src:Ke.Z.admin.totalUser,alt:"online user",style:{width:"35px"}}),title:"Total user",value:p.totalUsers,mainColor:"#007bff"})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,N.jsx)(it,{icon:(0,N.jsx)("img",{src:Ke.Z.admin.loginTodayUser,alt:"online user",style:{width:"35px"}}),title:"Total login today",value:p.loginToday,mainColor:"#ffc107"})})]})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,md:12,children:(0,N.jsxs)(r.ZP,{container:!0,spacing:4,children:[(0,N.jsxs)(r.ZP,{item:!0,xs:12,md:12,lg:8,children:[(0,N.jsx)(Se.Z,{children:"User register"}),(0,N.jsxs)(nt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",display:"flex",justifyContent:"center",boxShadow:"lg"},children:[(0,N.jsxs)(x.Z,{display:"flex",justifyContent:"flex-end",direction:"row",spacing:2,children:[(0,N.jsx)(ce.Z,{variant:0===l?"outlined":"plain",onClick:()=>{0!==l&&o(0)},size:"sm",children:"Week"}),(0,N.jsx)(ce.Z,{variant:1===l?"outlined":"plain",onClick:()=>{1!==l&&o(1)},size:"sm",children:"Month"}),(0,N.jsx)(ce.Z,{variant:2===l?"outlined":"plain",onClick:()=>{2!==l&&o(2)},size:"sm",children:"Year"})]}),(0,N.jsxs)(x.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:[(0,N.jsx)(ft,{scaleType:"point",data:0===l?b:1===l?v:w,series:0===p.registerUser.length?[]:0===l?[p.registerUser[0]]:1===l?[p.registerUser[1]]:[p.registerUser[2]],startGradientColor:["#11B678"],endGradientColor:["#FF3143"]}),(0,N.jsx)(ht,{label:"New user",color:vt})]})]})]}),(0,N.jsxs)(r.ZP,{item:!0,xs:12,md:12,lg:4,children:[(0,N.jsx)(Se.Z,{children:"User role"}),(0,N.jsxs)(nt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",boxShadow:"lg"},children:[(0,N.jsx)(x.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:(0,N.jsx)(ut.u,{colors:bt,series:[{data:p.userByRole,innerRadius:10,cornerRadius:10}],height:300,sx:{maxWidth:"100%"},margin:{left:0,right:0,top:0,bottom:0},slotProps:{legend:{hidden:!0}}})}),(0,N.jsx)(r.ZP,{container:!0,spacing:2,alignItems:"center",children:["User","Admin","Student Course","Lecturer","Admin course"].map(((e,t)=>(0,N.jsx)(r.ZP,{item:!0,children:(0,N.jsx)(ht,{label:e,color:bt[t]})},t)))})]})]})]})})]}),1===i&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(r.ZP,{item:!0,xs:5,children:(0,N.jsx)(dt.Z,{children:"Course"})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsxs)(r.ZP,{container:!0,spacing:4,children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,N.jsx)(it,{icon:(0,N.jsx)("img",{src:Ke.Z.admin.course,alt:"Total course",style:{width:"35px"}}),title:"Total courses",value:j.totalCourse,mainColor:"#3498db"})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,N.jsx)(it,{icon:(0,N.jsx)("img",{src:Ke.Z.admin.userEnrollment,alt:"Enrolled user",style:{width:"35px"}}),title:"Enrollments",value:j.totalEnrollments,mainColor:"#2ecc71"})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,N.jsx)(it,{icon:(0,N.jsx)("img",{src:Ke.Z.admin.activeCourse,alt:"active course",style:{width:"35px"}}),title:"Active Courses",value:j.activeCourse,mainColor:"#f39c12"})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,N.jsx)(it,{icon:(0,N.jsx)("img",{src:Ke.Z.admin.inactiveCourse,alt:"online user",style:{width:"35px"}}),title:"Inactive courses",value:j.inactiveCourse,mainColor:"#e74c3c"})})]})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,md:12,children:(0,N.jsxs)(r.ZP,{container:!0,spacing:4,children:[(0,N.jsxs)(r.ZP,{item:!0,xs:12,md:12,lg:12,children:[(0,N.jsx)(Se.Z,{children:"Course Enrollment"}),(0,N.jsxs)(nt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",display:"flex",justifyContent:"center",boxShadow:"lg"},children:[(0,N.jsxs)(x.Z,{display:"flex",justifyContent:"flex-end",direction:"row",spacing:2,children:[(0,N.jsx)(ce.Z,{variant:0===c?"outlined":"plain",onClick:()=>{0!==c&&d(0)},size:"sm",children:"Week"}),(0,N.jsx)(ce.Z,{variant:1===c?"outlined":"plain",onClick:()=>{1!==c&&d(1)},size:"sm",children:"Month"}),(0,N.jsx)(ce.Z,{variant:2===c?"outlined":"plain",onClick:()=>{2!==c&&d(2)},size:"sm",children:"Year"})]}),(0,N.jsxs)(x.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:[(0,N.jsx)(ft,{data:0===c?b:1===c?v:w,series:0===j.userEnrollments.length?[]:0===c?[j.userEnrollments[0]]:1===c?[j.userEnrollments[1]]:[j.userEnrollments[2]],scaleType:"point",startGradientColor:["#11B678"],endGradientColor:["#FF3143"]}),(0,N.jsx)(ht,{label:"New user",color:vt})]})]})]}),(0,N.jsxs)(r.ZP,{item:!0,xs:12,md:12,lg:6,children:[(0,N.jsx)(Se.Z,{children:"Active / Inactive course"}),(0,N.jsxs)(nt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",boxShadow:"lg"},children:[(0,N.jsx)(x.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:(0,N.jsx)(ut.u,{colors:bt,series:[{data:j.activeInactiveCourse,innerRadius:10,cornerRadius:10}],height:300,sx:{maxWidth:"100%"},margin:{left:0,right:0,top:0,bottom:0},slotProps:{legend:{hidden:!0}}})}),(0,N.jsxs)(r.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,N.jsx)(r.ZP,{item:!0,children:(0,N.jsx)(ht,{label:"Active",color:bt[0]})}),(0,N.jsx)(r.ZP,{item:!0,children:(0,N.jsx)(ht,{label:"Inactive",color:bt[1]})})]})]})]}),(0,N.jsxs)(r.ZP,{item:!0,xs:12,md:12,lg:6,children:[(0,N.jsx)(Se.Z,{children:"Course type"}),(0,N.jsxs)(nt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",boxShadow:"lg"},children:[(0,N.jsx)(x.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:(0,N.jsx)(ut.u,{colors:bt,series:[{data:j.courseType,innerRadius:10,cornerRadius:10}],height:300,sx:{maxWidth:"100%"},margin:{left:0,right:0,top:0,bottom:0},slotProps:{legend:{hidden:!0}}})}),(0,N.jsx)(r.ZP,{container:!0,spacing:2,alignItems:"center",children:j.courseType.map(((e,t)=>(0,N.jsx)(r.ZP,{item:!0,children:(0,N.jsx)(ht,{label:e.label,color:bt[t]})},t)))})]})]}),(0,N.jsxs)(r.ZP,{item:!0,xs:12,md:12,lg:6,children:[(0,N.jsx)(Se.Z,{children:"Recent assignment"}),(0,N.jsx)(nt.Z,{color:"neutral",variant:"outlined",sx:{boxShadow:"lg",height:"400px"},children:(0,N.jsxs)(mt.Z,{variant:"soft",size:"lg",hoverRow:!0,sx:{backgroundColor:"#FBFCFE","& tbody tr:hover":{backgroundColor:"#f3f3f3"}},children:[(0,N.jsx)("thead",{children:(0,N.jsx)("tr",{children:S.map(((e,t)=>(0,N.jsx)("th",{style:{borderBottom:"2px solid rgb(128,128,128)"},children:(0,N.jsx)(C.Z,{fontSize:"12px",color:"#525151",fontWeight:"500",children:e})},t)))})}),(0,N.jsxs)("tbody",{children:[0!==j.recentAssignments.length&&(0,N.jsx)(N.Fragment,{children:j.recentAssignments.map(((e,t)=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:(0,N.jsx)(C.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:e.title})}),(0,N.jsx)("td",{children:(0,N.jsx)(C.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:e.courseName})}),(0,N.jsx)("td",{children:(0,N.jsx)(C.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:"FILE"===e.type?"File":"TEXT_ONLINE"===e.type?"Text online":"Both"})}),(0,N.jsx)("td",{children:(0,N.jsx)(C.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:new Date(e.createdAt).toLocaleDateString()})})]},t)))}),0===j.recentAssignments.length&&(0,N.jsx)("tr",{children:(0,N.jsx)(ve.Z,{colSpan:S.length,children:(0,N.jsx)(n.Z,{display:"flex",alignItems:"center",justifyContent:"center",height:"300px",children:(0,N.jsx)(C.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:"No data to display"})})})})]})]})})]}),(0,N.jsxs)(r.ZP,{item:!0,xs:12,md:12,lg:6,children:[(0,N.jsx)(Se.Z,{children:"Recent exam"}),(0,N.jsx)(nt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",boxShadow:"lg"},children:(0,N.jsxs)(mt.Z,{variant:"soft",size:"lg",hoverRow:!0,sx:{backgroundColor:"#FBFCFE","& tbody tr:hover":{backgroundColor:"#f3f3f3"}},children:[(0,N.jsx)("thead",{children:(0,N.jsx)("tr",{children:k.map(((e,t)=>(0,N.jsx)("th",{style:{borderBottom:"2px solid rgb(128,128,128)"},children:(0,N.jsx)(C.Z,{fontSize:"12px",color:"#525151",fontWeight:"500",children:e})},t)))})}),(0,N.jsxs)("tbody",{children:[0!==j.recentExam.length&&(0,N.jsx)(N.Fragment,{children:j.recentExam.map(((e,t)=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:(0,N.jsx)(C.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:e.examName})}),(0,N.jsx)("td",{children:(0,N.jsx)(C.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:e.courseName})}),(0,N.jsx)("td",{children:(0,N.jsx)(C.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:new Date(e.createdAt).toLocaleDateString()})})]},t)))}),0===j.recentExam.length&&(0,N.jsx)("tr",{children:(0,N.jsx)(ve.Z,{colSpan:k.length,children:(0,N.jsx)(n.Z,{display:"flex",alignItems:"center",justifyContent:"center",height:"300px",children:(0,N.jsx)(C.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:"No data to display"})})})})]})]})})]})]})})]})]})]})};var Pt=s(16289);const Ct={breadcump:"styles_breadcump__Br1Yd"},St=()=>{const e=(0,U.useRef)(null),{t:t}=(0,P.$G)(),s=(0,l.s0)(),[i,a]=(0,U.useState)(""),[o,h]=(0,U.useState)((()=>W.ZP.language)),p=(0,z.v9)((e=>e.user)),_=(0,z.I0)(),y=(0,U.useCallback)((async e=>{let{searchName:t,pageNo:s=0,pageSize:r=10}=e;_((0,Pt.K4)(!0));try{const e=await xt.K.getAllUser({searchName:t,pageNo:s,pageSize:r});_((0,Pt.HM)(e)),_((0,Pt.K4)(!1))}catch(n){console.error("error",n),401!==n.code&&403!==n.code||_((0,V.lS)("Please sign in to continue")),_((0,Pt.K4)(!1))}}),[_]),b=(0,U.useCallback)((e=>{y({searchName:e})}),[y]),v=[{field:"email",headerName:"Email",flex:2,renderHeader:()=>(0,N.jsx)(I.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:"Email"}),renderCell:e=>(0,N.jsxs)(x.Z,{direction:"row",gap:2,alignItems:"center",justifyContent:"flex-start",margin:"5px",children:[(0,N.jsx)(u.Z,{sx:{bgcolor:"var(--green-500)"},alt:e.row.email,src:e.row.avatarUrl,children:e.row.firstName.charAt(0)}),(0,N.jsx)(A.Z,{width:"auto",fontWeight:500,children:e.row.email})]})},{field:"fullname",headerName:t("common_fullname"),flex:2,renderHeader:()=>(0,N.jsx)(I.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_fullname")}),renderCell:e=>(0,N.jsxs)(A.Z,{width:"auto",children:[e.row.firstName," ",e.row.lastName]})},{field:"lastLogin",headerName:t("common_last_login"),flex:1,renderHeader:()=>(0,N.jsx)(I.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_last_login")}),renderCell:e=>(0,N.jsx)(A.Z,{width:"auto",children:(0,B.J$)(e.row.lastLogin,o)})},{field:"roleName",headerName:t("common_role"),flex:1,renderHeader:()=>(0,N.jsx)(I.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_role")}),renderCell:e=>(0,N.jsx)(A.Z,{width:"auto",children:e.row.roleName})},{field:"action",headerName:t("common_action"),type:"actions",flex:.8,renderHeader:()=>(0,N.jsx)(E.Z,{width:"auto",sx:{textAlign:"left"},children:t("common_action")}),getActions:e=>[(0,N.jsx)(Z.u,{icon:(0,N.jsx)(m.Z,{}),label:"Edit",onClick:()=>{s(q._.admin.users.edit.details.replace(":userId",e.row.userId),{state:{contestName:e.row.name}})}}),(0,N.jsx)(Z.u,{icon:(0,N.jsx)(d.Z,{}),label:"Delete"})]}],[w,C]=(0,U.useState)(0),[S,k]=(0,U.useState)(10),R=(0,U.useMemo)((()=>p.users.totalItems||0),[p.users]),M=(0,U.useMemo)((()=>[{name:c.W.ADMIN,label:t("role_system_admin")},{name:c.W.ADMIN_MOODLE,label:t("role_org_admin")},{name:c.W.LECTURER_MOODLE,label:t("role_lecturer")},{name:c.W.STUDENT_MOODLE,label:t("role_student")}]),[t]),D=(0,U.useCallback)((e=>{const s=M.find((t=>null===e||void 0===e?void 0:e.roles.some((e=>(null===e||void 0===e?void 0:e.name)===t.name))));return s?s.label:t("role_user")}),[M,t]),L=(0,U.useMemo)((()=>p.users.users.map((e=>({id:e.userId,userId:e.userId,email:e.email,firstName:e.firstName,lastName:e.lastName,avatarUrl:e.avatarUrl,lastLogin:e.lastLogin,phone:e.phone,address:e.address,dob:e.dob,isLinkedWithGoogle:e.isLinkedWithGoogle,isLinkedWithMicrosoft:e.isLinkedWithMicrosoft,createdAt:e.createdAt,roleName:D(e)})))),[D,p.users]),G=(0,U.useCallback)((()=>{y({searchName:i})}),[y,i]),H=(0,U.useCallback)((()=>{y({searchName:i})}),[y,i]);(0,U.useEffect)((()=>{h(W.ZP.language)}),[W.ZP.language]),(0,U.useEffect)((()=>{(async()=>{p.users.users.length>0||(_((0,O.K4)(!0)),await y({searchName:""}),_((0,O.K4)(!1)))})()}),[_,y,p.users.users]);return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(g.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"}},children:[(0,N.jsx)(n.Z,{className:Ct.breadcump,ref:e,children:(0,N.jsx)(n.Z,{id:Ct.breadcumpWrapper,children:(0,N.jsx)(A.Z,{colorname:"--blue-500","translate-key":"user_detail_account_management",children:t("user_detail_account_management")})})}),(0,N.jsx)(j.Z,{}),(0,N.jsxs)(r.ZP,{container:!0,spacing:2,sx:{padding:"20px"},children:[(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(F.Z,{"translate-key":"user_management",children:t("user_management")})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(T,{isLoading:p.isLoading,searchValue:i,setSearchValue:a,onHandleChange:b,createBtnText:t("user_create"),onClickCreate:()=>{s(q._.admin.users.create)},numOfResults:R,filterKeyList:[{label:t("common_status"),value:"Status"}],currentFilterKey:"Status",onHandleApplyFilter:G,onHandleCancelFilter:H})}),(0,N.jsx)(r.ZP,{item:!0,xs:12,children:(0,N.jsx)(f.Z,{loading:p.isLoading,dataList:L,tableHeader:v,onSelectData:(e,t)=>{},dataGridToolBar:{enableToolbar:!0},page:w,pageSize:S,totalElement:R,onPaginationModelChange:(e,t)=>{C(e.page),k(e.pageSize),y({searchName:i,pageNo:e.page,pageSize:e.pageSize})},showVerticalCellBorder:!0,getRowHeight:()=>"auto",onClickRow:e=>{console.log(e)},sx:{"& .MuiDataGrid-cell":{border:"none"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f5f9fb"},"& .MuiDataGrid-toolbarContainer":{backgroundColor:"#f5f9fb"}},personalSx:!0})})]})]})})},kt="styles_formBody__JisuN",Nt="styles_breadcump__irmYW",Tt="styles_breadcumpWrapper__UmnNg",Ft="styles_icArrow__iaubJ",It="styles_cursorPointer__fvpAS",At="styles_phoneInput__AtGfs";var Et=s(47006),Wt=s(1550),Rt=s(71281),Mt=s(70874);const Dt="styles_iconOption__Oo+XY",Ut="styles_iconValue__lvQK0",zt="styles_iconPrefix__7BHVk";var Lt=s(29428),Ot=s(3665);const qt=e=>(0,N.jsx)(Rt.c.DropdownIndicator,{...e,children:e.selectProps.menuIsOpen?(0,N.jsx)(Ot.Z,{}):(0,N.jsx)(Lt.Z,{})}),Gt=e=>{var t,s;let{children:r,...n}=e;return(0,N.jsxs)(Rt.c.Option,{...n,children:[(null===(t=n.data)||void 0===t?void 0:t.img)&&(0,N.jsx)("img",{src:n.data.img,alt:"",className:Dt}),(null===(s=n.data)||void 0===s?void 0:s.icon)&&(0,N.jsx)(n.data.icon,{className:zt}),r]})},Bt=e=>{var t,s;let{children:r,...n}=e;return(0,N.jsxs)(Rt.c.SingleValue,{...n,children:[(null===(t=n.data)||void 0===t?void 0:t.img)&&(0,N.jsx)("img",{src:n.data.img,alt:"",className:Ut}),(null===(s=n.data)||void 0===s?void 0:s.icon)&&(0,N.jsx)(n.data.icon,{className:zt}),r]})},Ht=(0,U.memo)((e=>{const{className:t,title:s,errorMessage:i,name:a,control:l,bindKey:o,bindLabel:c,selectProps:d,fullWidth:m,optional:x,toolTipTranslation:u}=e,{t:h}=(0,P.$G)(),p=e=>"translation"===(c||"name")?h(e.translation):e[c||"name"];return(0,N.jsx)(Wt.Z,{className:t,sx:{width:m?"100%":"auto"},children:(0,N.jsxs)(r.ZP,{container:!0,spacing:1,columns:12,children:[(0,N.jsx)(r.ZP,{item:!0,xs:s?12:0,md:s?4:0,children:s&&(0,N.jsx)(n.Z,{sx:{display:"flex",alignItems:"center",gap:"4px"},children:(0,N.jsx)(E.Z,{children:s})})}),(0,N.jsxs)(r.ZP,{item:!0,xs:12,md:s?7:12,children:[l?(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(se.Qr,{name:a,control:l,render:e=>{let{field:t}=e;return(0,N.jsx)(Mt.ZP,{...t,styles:{indicatorSeparator:()=>({display:"none"}),indicatorsContainer:e=>({...e,div:{padding:"6px 8px"}}),option:(e,t)=>({...e,display:"flex",alignItems:"center",fontStyle:"normal",fontWeight:400,fontSize:16,lineHeight:"24px",letterSpacing:"0.015em",color:"var(--eerie-black)",padding:"14px 15px",cursor:t.isDisabled?"not-allowed":"pointer",background:t.isSelected||t.isFocused?"var(--gray-2)":"#FFFFFF"}),placeholder:(e,t)=>({...e,fontSize:16,fontWeight:400,color:t.isFocused?"var(--gray-2)":"var(--gray-90)",whiteSpace:"nowrap"}),valueContainer:e=>({...e,padding:"6px 0 6px 16px",div:{paddingBottom:0}}),singleValue:e=>({...e,display:"flex",fontSize:16,fontWeight:400,alignItems:"center"}),control:(e,t)=>({...e,cursor:t.isDisabled?"not-allowed":"pointer",background:t.isDisabled?"var(--gray-5)":"#FFFFFF",border:t.isFocused?"1px solid var(--gray-30)":"1px solid var(--gray-40)",svg:{color:t.isFocused?"var(--eerie-black)":"var(--gray-60)"},div:{color:t.isFocused?"var(--eerie-black)":"var(--gray-90)"},boxShadow:"0","&:hover":{border:"1px solid var(--gray-30)"},"&:hover svg, &:hover div":{color:"var(--eerie-black)"}})},getOptionValue:e=>e[o||"id"],getOptionLabel:e=>p(e),components:{DropdownIndicator:qt,Option:Gt,SingleValue:Bt},...d})}})}):(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(Mt.ZP,{styles:{indicatorSeparator:()=>({display:"none"}),indicatorsContainer:e=>({...e,div:{padding:"6px 8px"}}),option:(e,t)=>({...e,display:"flex",alignItems:"center",fontStyle:"normal",fontWeight:400,fontSize:16,lineHeight:"24px",letterSpacing:"0.015em",color:"var(--eerie-black)",padding:"14px 15px",cursor:t.isDisabled?"not-allowed":"pointer",background:t.isSelected||t.isFocused?"var(--gray-2)":"#FFFFFF"}),placeholder:(e,t)=>({...e,fontSize:16,fontWeight:400,color:t.isFocused?"var(--gray-2)":"var(--gray-90)",whiteSpace:"nowrap"}),valueContainer:e=>({...e,padding:"6px 0 6px 16px",div:{paddingBottom:0}}),singleValue:e=>({...e,display:"flex",fontSize:16,fontWeight:400,alignItems:"center"}),control:(e,t)=>({...e,cursor:t.isDisabled?"not-allowed":"pointer",background:t.isDisabled?"var(--gray-5)":"#FFFFFF",border:t.isFocused?"1px solid var(--gray-30)":"1px solid var(--gray-40)",svg:{color:t.isFocused?"var(--eerie-black)":"var(--gray-60)"},div:{color:t.isFocused?"var(--eerie-black)":"var(--gray-90)"},boxShadow:"0","&:hover":{border:"1px solid var(--gray-30)"},"&:hover svg, &:hover div":{color:"var(--eerie-black)"}})},getOptionValue:e=>e[o||"id"],getOptionLabel:e=>p(e),components:{DropdownIndicator:qt,Option:Gt,SingleValue:Bt},...d})}),i&&(0,N.jsx)(de.Z,{children:i})]})]})})})),Vt=()=>{var e,t,s,i,a,o,d,m,x;const u=(0,U.useRef)(null),{t:h}=(0,P.$G)(),p=(0,l.s0)(),[_,Z]=(0,U.useState)(!1),f=(0,z.I0)(),y=(0,U.useMemo)((()=>re.Ry().shape({email:re.Z_().required(h("email_required")).email(h("email_invalid")),password:re.Z_().required(h("password_required")).matches(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,h("password_invalid")),confirmPassword:re.Z_().required(h("password_confirm_required")).matches(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,h("password_invalid")).oneOf([re.iH("password")],h("password_confirm_not_match")),firstName:re.Z_().required(h("first_name_required")),lastName:re.Z_().required(h("last_name_required")),roleName:re.Ry().shape({id:re.Z_().required(h("role_required")),name:re.Z_().required(h("role_required"))}).required(h("role_required")),phone:re.Z_().matches(/^\+?[1-9][0-9]{7,14}$/,h("phone_number_invalid")).required(h("phone_required"))})),[h]),{handleSubmit:b,control:v,formState:{errors:w},register:C}=(0,se.cI)({resolver:(0,K.X)(y)}),S=(0,U.useCallback)((async e=>{Z(!0);try{await xt.K.createUserByAdmin(e),Z(!1),f((0,V.kU)("Created user successfully")),f((0,Pt.B4)()),p(q._.admin.users.root)}catch(t){console.error("error",t),f((0,V.lS)("User creation failed!!! please check your input information")),401!==t.code&&403!==t.code||f((0,V.lS)("Please sign in to continue")),Z(!1)}}),[h]),k=(0,U.useMemo)((()=>[{id:c.W.ADMIN,name:h("role_system_admin")},{id:c.W.USER,name:h("role_user")},{id:c.W.LECTURER_MOODLE,name:h("role_lecturer")},{id:c.W.STUDENT_MOODLE,name:h("role_student")},{id:c.W.ADMIN_MOODLE,name:h("role_org_admin")}]),[h]);return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(g.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"},gap:"20px"},children:[(0,N.jsx)(n.Z,{className:Nt,ref:u,children:(0,N.jsxs)(n.Z,{id:Tt,children:[(0,N.jsx)(A.Z,{colorname:"--blue-500",className:It,onClick:()=>p(q._.admin.users.root),"translation-key":"user_management",children:h("user_management")}),(0,N.jsx)($.Z,{id:Ft}),(0,N.jsx)(A.Z,{colorname:"--blue-500","translate-key":"user_create",children:h("user_create")})]})}),(0,N.jsx)(j.Z,{}),(0,N.jsxs)(n.Z,{sx:{padding:"20px"},children:[(0,N.jsx)(F.Z,{"translate-key":"user_create",children:h("user_create")}),(0,N.jsxs)(n.Z,{component:"form",className:kt,onSubmit:b((async e=>{const t={...e},s={email:t.email,password:t.password,firstName:t.firstName,lastName:t.lastName,roleName:t.roleName.id,phone:t.phone};await S(s)})),children:[(0,N.jsx)(Ht,{fullWidth:!0,title:h("common_role"),name:"roleName",control:v,selectProps:{options:k},errorMessage:null===(e=w.roleName)||void 0===e||null===(t=e.id)||void 0===t?void 0:t.message}),(0,N.jsxs)(r.ZP,{container:!0,spacing:1,columns:12,children:[(0,N.jsx)(r.ZP,{item:!0,xs:4,children:(0,N.jsx)(E.Z,{"translation-key":"common_phone",children:h("common_phone")})}),(0,N.jsxs)(r.ZP,{item:!0,xs:7,display:"flex",flexDirection:"column",gap:"10px",children:[(0,N.jsx)(se.Qr,{control:v,name:"phone",render:e=>{let{field:t}=e;return(0,N.jsx)(Et.ZP,{value:t.value,placeholder:"Enter phone number",onChange:t.onChange,className:At,defaultCountry:"VN"})}}),(null===(s=w.phone)||void 0===s?void 0:s.message)&&(0,N.jsx)(de.Z,{children:null===(i=w.phone)||void 0===i?void 0:i.message})]})]}),(0,N.jsx)(ee.Z,{title:h("Email"),type:"text",inputRef:C("email"),errorMessage:null===w||void 0===w||null===(a=w.email)||void 0===a?void 0:a.message,width:"100%"}),(0,N.jsx)(ee.Z,{title:h("first_name"),type:"text",inputRef:C("firstName"),errorMessage:null===w||void 0===w||null===(o=w.firstName)||void 0===o?void 0:o.message,width:"100%"}),(0,N.jsx)(ee.Z,{title:h("last_name"),type:"text",inputRef:C("lastName"),errorMessage:null===w||void 0===w||null===(d=w.lastName)||void 0===d?void 0:d.message,width:"100%"}),(0,N.jsx)(ee.Z,{title:h("common_password"),type:"password",inputRef:C("password"),errorMessage:null===w||void 0===w||null===(m=w.password)||void 0===m?void 0:m.message,width:"100%"}),(0,N.jsx)(ee.Z,{title:h("common_password_confirm"),type:"password",inputRef:C("confirmPassword"),errorMessage:null===w||void 0===w||null===(x=w.confirmPassword)||void 0===x?void 0:x.message,width:"100%"}),(0,N.jsx)(r.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:(0,N.jsx)(ce.Z,{loading:_,variant:"solid",type:"submit","translation-key":"user_create",children:h("user_create")})})]})]})]})})},Qt="styles_formBody__TCInU",Kt="styles_breadcump__49WDQ",$t="styles_breadcumpWrapper__adfuU",Yt="styles_icArrow__Gptv+",Jt="styles_cursorPointer__vGSrT",Xt="styles_phoneInput__rGLcO";var es=s(3185),ts=s(11722),ss=(s(96304),s(23208)),rs=s(53781),ns=s(10658),is=s.n(ns),as=s(45904);const ls=()=>{var e,t,s,i,a,o,d,m;const x=(0,U.useRef)(null),{t:h}=(0,P.$G)(),p=(0,l.s0)(),[_,Z]=(0,U.useState)(!1),f=(0,z.I0)(),y=(0,U.useMemo)((()=>re.Ry().shape({firstName:re.Z_().required(h("first_name_required")),lastName:re.Z_().required(h("last_name_required")),dob:re.Z_(),phone:re.Z_().matches(/^\+?[1-9][0-9]{7,14}$/,h("phone_number_invalid")).required(h("phone_required")),roleName:re.Ry().shape({id:re.Z_().required(),name:re.Z_().required()}).required(h("role_required"))})),[h]),{userId:b}=(0,l.UO)(),[v,w]=(0,U.useState)((()=>W.ZP.language)),[S,k]=(0,U.useState)(),T=(0,U.useMemo)((()=>[{id:c.W.ADMIN,name:h("role_system_admin")},{id:c.W.USER,name:h("role_user")},{id:c.W.LECTURER_MOODLE,name:h("role_lecturer")},{id:c.W.STUDENT_MOODLE,name:h("role_student")},{id:c.W.ADMIN_MOODLE,name:h("role_org_admin")}]),[h]),I=(0,U.useCallback)((e=>{const t=T.find((t=>null===e||void 0===e?void 0:e.roles.some((e=>(null===e||void 0===e?void 0:e.name)===t.id&&(null===e||void 0===e?void 0:e.name)!==c.W.USER))));return t||T.find((e=>e.id===c.W.USER))}),[T]),{handleSubmit:R,control:M,formState:{errors:D},reset:L,register:O}=(0,se.cI)({resolver:(0,K.X)(y)});(0,U.useEffect)((()=>{w(W.ZP.language)}),[W.ZP.language]);const G=(0,U.useCallback)((async e=>{try{const t=await xt.K.getUserById(e),s=I(t);t&&(L({firstName:t.firstName,lastName:t.lastName,dob:(0,es.WU)(t.dob?t.dob:Date.now(),"dd-MM-yyyy"),phone:t.phone,roleName:s}),k(t))}catch(t){console.error("error",t)}}),[L,I]);(0,U.useEffect)((()=>{!S&&b&&G(b)}),[S,G,b]);const H=(0,U.useCallback)((async e=>{Z(!0);try{if(!b)return;await xt.K.updateUserByAdmin(b,e),Z(!1),f((0,V.kU)("Updated user successfully")),f((0,Pt.B4)())}catch(t){console.error("error",t),f((0,V.lS)("User is updated failed!!! please check your input information")),401!==t.code&&403!==t.code||f((0,V.lS)("Please sign in to continue")),Z(!1)}}),[h,b]);return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(g.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"},gap:"20px"},children:[(0,N.jsx)(n.Z,{className:Kt,ref:x,children:(0,N.jsxs)(n.Z,{id:$t,children:[(0,N.jsx)(A.Z,{colorname:"--blue-500",className:Jt,onClick:()=>p(q._.admin.users.root),"translation-key":"user_management",children:h("user_management")}),(0,N.jsx)($.Z,{id:Yt}),(0,N.jsx)(A.Z,{colorname:"--blue-500","translate-key":"common_account_info",children:h("common_account_info")})]})}),(0,N.jsx)(j.Z,{}),(0,N.jsxs)(n.Z,{sx:{padding:"20px"},children:[(0,N.jsx)(F.Z,{"translate-key":"common_account_info",children:h("common_account_info")}),(0,N.jsxs)(n.Z,{component:"form",className:Qt,onSubmit:R((async e=>{const t={...e},s={firstName:t.firstName,lastName:t.lastName,dob:t.dob?(0,ts.Qc)(t.dob,"dd-MM-yyyy",new Date):void 0,roleName:t.roleName.id,phone:t.phone};await H(s)})),children:[(0,N.jsx)(r.ZP,{container:!0,columns:12,justifyContent:"center",children:(0,N.jsx)(u.Z,{sx:{bgcolor:"var(--green-500)",width:150,height:150,fontSize:"60px"},alt:null===S||void 0===S?void 0:S.email,src:null===S||void 0===S?void 0:S.avatarUrl,children:null===S||void 0===S?void 0:S.firstName.charAt(0)})}),(0,N.jsx)(Ht,{fullWidth:!0,title:h("common_role"),name:"roleName",control:M,selectProps:{options:T,placeholder:"Select role name"},errorMessage:null===(e=D.roleName)||void 0===e||null===(t=e.id)||void 0===t?void 0:t.message}),(null===S||void 0===S?void 0:S.organization)&&(0,N.jsx)(ee.Z,{title:h("common_organization"),type:"text",disabled:!0,value:null===S||void 0===S?void 0:S.organization.name,width:"100%"}),(0,N.jsxs)(r.ZP,{container:!0,spacing:1,columns:12,children:[(0,N.jsx)(r.ZP,{item:!0,xs:4,children:(0,N.jsx)(E.Z,{"translation-key":"common_phone",children:h("common_phone")})}),(0,N.jsxs)(r.ZP,{item:!0,xs:7,display:"flex",flexDirection:"column",gap:"10px",children:[(0,N.jsx)(se.Qr,{control:M,name:"phone",render:e=>{let{field:t}=e;return(0,N.jsx)(Et.ZP,{placeholder:"Enter phone number",value:t.value,onChange:t.onChange,className:Xt})}}),(null===(s=D.phone)||void 0===s?void 0:s.message)&&(0,N.jsx)(de.Z,{children:null===(i=D.phone)||void 0===i?void 0:i.message})]})]}),(0,N.jsx)(ee.Z,{title:h("common_last_login"),type:"text",disabled:!0,value:(0,B.J$)(null===S||void 0===S?void 0:S.lastLogin,v),width:"100%"}),(0,N.jsx)(ee.Z,{title:h("Email"),type:"text",disabled:!0,value:null===S||void 0===S?void 0:S.email,width:"100%"}),(0,N.jsx)(ee.Z,{title:h("first_name"),type:"text",inputRef:O("firstName"),errorMessage:null===D||void 0===D||null===(a=D.firstName)||void 0===a?void 0:a.message,width:"100%"}),(0,N.jsx)(ee.Z,{title:h("last_name"),type:"text",inputRef:O("lastName"),errorMessage:null===D||void 0===D||null===(o=D.lastName)||void 0===o?void 0:o.message,width:"100%"}),(0,N.jsxs)(r.ZP,{container:!0,spacing:1,columns:12,children:[(0,N.jsx)(r.ZP,{item:!0,xs:4,children:(0,N.jsx)(E.Z,{"translation-key":"common_DOB",children:h("common_DOB")})}),(0,N.jsxs)(r.ZP,{item:!0,xs:7,children:[(0,N.jsx)(se.Qr,{control:M,name:"dob",render:e=>{let{field:t}=e;return(0,N.jsx)(ss._,{dateAdapter:as.y,children:(0,N.jsx)(rs.M,{label:"Date",value:is()(t.value,"DD/MM/YYYY"),inputRef:t.ref,onChange:e=>{null!==e&&void 0!==e&&e.isValid()&&t.onChange((0,es.WU)(null===e||void 0===e?void 0:e.toDate(),"dd-MM-yyyy"))}})})}}),(null===(d=D.dob)||void 0===d?void 0:d.message)&&(0,N.jsx)(de.Z,{children:null===(m=D.dob)||void 0===m?void 0:m.message})]})]}),S&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(r.ZP,{container:!0,spacing:1,columns:12,children:[(0,N.jsxs)(r.ZP,{item:!0,xs:4,sx:{display:"flex",alignItems:"center"},children:[Ke.Z.logo.moodleLogo&&(0,N.jsx)(u.Z,{alt:"Google",src:Ke.Z.logo.googleLogo,sx:{width:"40px",height:"40px"}}),(0,N.jsx)(C.Z,{sx:{marginLeft:"5px"},children:"Google"})]}),(0,N.jsx)(r.ZP,{item:!0,xs:7,sx:{display:"flex",alignItems:"center"},children:null!==S&&void 0!==S&&S.isLinkedWithGoogle?(0,N.jsx)(C.Z,{"translation-key":"user_detail_dialog_linked",children:h("user_detail_dialog_linked")}):(0,N.jsx)(C.Z,{"translation-key":"user_detail_dialog_not_linked",children:h("user_detail_dialog_not_linked")})})]}),(0,N.jsx)(j.Z,{}),(0,N.jsxs)(r.ZP,{container:!0,spacing:1,columns:12,children:[(0,N.jsxs)(r.ZP,{item:!0,xs:4,sx:{display:"flex",alignItems:"center"},children:[Ke.Z.logo.moodleLogo&&(0,N.jsx)(u.Z,{alt:"Microsoft",src:Ke.Z.logo.microsoftLogo,sx:{width:"40px",height:"40px"}}),(0,N.jsx)(C.Z,{sx:{marginLeft:"5px"},children:"Microsoft"})]}),(0,N.jsx)(r.ZP,{item:!0,xs:7,sx:{display:"flex",alignItems:"center"},children:null!==S&&void 0!==S&&S.isLinkedWithMicrosoft?(0,N.jsx)(C.Z,{"translation-key":"user_detail_dialog_linked",children:h("user_detail_dialog_linked")}):(0,N.jsx)(C.Z,{"translation-key":"user_detail_dialog_not_linked",children:h("user_detail_dialog_not_linked")})})]}),(0,N.jsx)(j.Z,{})]}),(0,N.jsx)(r.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:(0,N.jsx)(ce.Z,{loading:_,variant:"solid",type:"submit","translation-key":"user_update",children:h("user_update")})})]})]})]})})},os=e=>{const[t,s]=U.useState(!0);return(0,N.jsx)(r.ZP,{className:i,children:(0,N.jsx)(tt,{open:t,toggleDrawer:()=>{s((e=>!e))},children:(0,N.jsx)(n.Z,{className:a,children:(0,N.jsx)(l.Z5,{children:(0,N.jsxs)(l.AW,{element:(0,N.jsx)(o.Z,{availableRoles:[c.W.ADMIN]}),children:[(0,N.jsx)(l.AW,{path:"contests",element:(0,N.jsx)(Q,{})}),(0,N.jsx)(l.AW,{path:"contests/create",element:(0,N.jsx)(me,{})}),(0,N.jsx)(l.AW,{path:"contests/edit/:contestId/*",element:(0,N.jsx)(Le,{isDrawerOpen:t})}),(0,N.jsx)(l.AW,{path:"information",element:(0,N.jsx)(st.Z,{})}),(0,N.jsx)(l.AW,{path:"/dashboard",element:(0,N.jsx)(wt,{})}),(0,N.jsx)(l.AW,{path:"users",element:(0,N.jsx)(St,{})}),(0,N.jsx)(l.AW,{path:"users/create",element:(0,N.jsx)(Vt,{})}),(0,N.jsx)(l.AW,{path:"users/edit/:userId/*",element:(0,N.jsx)(ls,{})})]})})})})})}},15067:(e,t,s)=>{"use strict";s.d(t,{N:()=>o});var r=s(35662),n=s(66010),i=s(74776),a=s.n(i);const l="https://api.codedynamite.click";class o{static async getCourses(e){let{search:t="",courseType:s=[],pageNo:i=0,pageSize:o=10}=e;try{const e=await r.Z.get("".concat(l).concat(n.b.COURSE.COURSE.DEFAULT),{params:{search:t,courseType:s,pageNo:i,pageSize:o},paramsSerializer:e=>a().stringify(e,{arrayFormat:"repeat"})});if(200===e.status)return Promise.resolve(e.data)}catch(p){var c,d,m,x,u,h;return console.error("Failed to fetch courses",p),Promise.reject({code:(null===(c=p.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.code)||503,status:(null===(m=p.response)||void 0===m||null===(x=m.data)||void 0===x?void 0:x.status)||"Service Unavailable",message:(null===(u=p.response)||void 0===u||null===(h=u.data)||void 0===h?void 0:h.message)||p.message})}}static async getSectionsByCourseId(e){try{const t=await r.Z.get("".concat(l).concat(n.b.COURSE.COURSE.SECTION,"/").concat(e));if(200===t.status)return t.data}catch(d){var t,s,i,a,o,c;return console.error("Failed to fetch sections by course id",d),Promise.reject({code:(null===(t=d.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.code)||503,status:(null===(i=d.response)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.status)||"Service Unavailable",message:(null===(o=d.response)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.message)||d.message})}}static async getCourseDetail(e){try{await r.Z.get("".concat(l).concat(n.b.COURSE.COURSE.DEFAULT,"/").concat(e))}catch(d){var t,s,i,a,o,c;return console.error("Failed to fetch course detail",d),console.error("Failed to fetch sections by course id",d),Promise.reject({code:(null===(t=d.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.code)||503,status:(null===(i=d.response)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.status)||"Service Unavailable",message:(null===(o=d.response)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.message)||d.message})}}static async getCourseStatistics(){try{const e=await r.Z.get("".concat(l).concat(n.b.COURSE.COURSE.GET_STATISTICS));if(200===e.status)return e.data}catch(c){var e,t,s,i,a,o;return console.error("Failed to fetch course detail",c),Promise.reject({code:(null===(e=c.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.code)||503,status:(null===(s=c.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.status)||"Service Unavailable",message:(null===(a=c.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)||c.message})}}}},24654:()=>{}}]);