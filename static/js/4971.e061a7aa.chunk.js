"use strict";(self.webpackChunkfrontend_app=self.webpackChunkfrontend_app||[]).push([[4971],{33060:(e,t,o)=>{o.d(t,{Z:()=>r});var n,i=o(30168),s=o(17592),a=o(61113);const r=(0,s.ZP)(a.Z)(n||(n=(0,i.Z)(['\n  font-family: "Montserrat";\n  font-style: ',";\n  font-weight: 600;\n  font-size: 24px;\n  line-height: 32px;\n  letter-spacing: -0.03em;\n  color: ",";\n  @media only screen and (max-width: 767px) {\n    font-size: ",";\n    line-height: ",";\n  }\n"])),(e=>e.fontStyle||"normal"),(e=>"var(".concat(e.colorname||"--eerie-black",")")),(e=>e.fontSizeMobile||"22px"),(e=>e.$lineHeightMobile||"32px"))},51928:(e,t,o)=>{o.d(t,{C:()=>s,T:()=>i});var n=o(65537);const i=n.I0.withTypes(),s=n.v9.withTypes()},61332:(e,t,o)=>{o.r(t),o.d(t,{default:()=>xe});var n=o(89790),i=o(54045),s=o(1065),a=o(42766),r=o(78832),l=o(9019),d=o(79536),c=o(62481),u=o(19536),m=o(46923),x=o(48623),p=o(16783),h=o(42832),f=o(19860),g=o(90200),v=o(31845),_=o(99221),j=o(47477),Z=o(38556),q=o(47313),y=o(58467),w=o(2135),b=o(90469),S=o(43750),I=o(92556),D=o(52801),C=o(8479),k=o(75590),z=o(38037),T=o(80007),P=o(15305),E=o(4271),F=o(65537),A=o(95720),R=o(78925),B=o(16031),M=o(39392),L=o(46417);function U(e){const{maxFiles:t,maxFileSize:o,accept:n,stopAutoUpload:i,disableDownload:s,relatedDispatch:a,relatedRemoveDispatch:r,relatedId:l,filesFromUrl:d,relatedRemoveAllDispatch:c}=e,{t:u}=(0,k.$G)(),m=(0,F.I0)(),[x,p]=q.useState([]),[h,f]=q.useState(void 0),[g,v]=q.useState(void 0),_=e=>{var t;let o=null===(t=x.find((t=>t.id===e)))||void 0===t?void 0:t.downloadUrl;m(r({id:l,fileUrl:o})),p(x.filter((t=>t.id!==e)))},j=e=>{f(e)},Z=e=>{v(e)},y=e=>{p(x.map((t=>t.id===e?{...t,uploadStatus:"aborted"}:{...t})))},w=e=>{p(x.map((t=>t.id===e?{...t,uploadStatus:void 0}:{...t})))},b=async e=>{if(void 0===e)return;const t=x.find((t=>t.id===e));if(t)if(t.downloadUrl){const e=await fetch(t.downloadUrl),o=await e.blob();(0,R.saveAs)(o,t.name)}else console.error("File not found")};return q.useEffect((()=>{const e=setInterval((function(){d&&((async()=>{const e=await Promise.all(d.map((e=>W(e.fileUrl,e.fileName))));p(e)})(),clearInterval(e))}),500)}),[]),q.useEffect((()=>{console.log("extFiles",x)}),[x]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(A.fh,{accept:n,minHeight:"195px",value:x,maxFileSize:o||5996e4,maxFiles:-1===t?void 0:t,label:u("drag_drop_file_placeholder"),onUploadStart:e=>{console.log("advanced demo start upload",e)},onUploadFinish:e=>{console.log("advanced demo finish upload",e)},onChange:async e=>{if(0!==e.length){console.log("change to uploading",e),p(e.map((e=>"success"===e.uploadStatus?e:{...e,uploadStatus:"uploading"}))),console.log("advanced upload start",e);for(let o=0;o<e.length;o++){if("success"===e[o].uploadStatus)continue;const n=e[o].file;if(!n)throw new Error("File not found");try{let t="";console.log("file uploader file",n),t=await(0,M.S)(n),l&&m(a({id:l,fileUrl:t,fileName:e[o].name})),console.log("advanced upload success",t),p((e=>{const n=[...e];return n[o]={...n[o],uploadStatus:"success",downloadUrl:t},n}))}catch(t){console.error("advanced upload error",t),p((e=>{const n=[...e];return n[o]={...n[o],uploadStatus:"error",uploadMessage:t.message},n}))}}}else p([]),c&&m(c(l))},onClean:()=>p([]),"translation-key":["drag_drop_file_placeholder"],clickable:-1===t||void 0===t||!(void 0!==t&&x.length>=t),children:x.map((e=>(0,q.createElement)(A.sZ,{...e,key:e.id,onDownload:s?void 0:b,downloadUrl:s?void 0:e.downloadUrl,onDelete:_,onSee:j,onWatch:Z,onAbort:y,onCancel:w,resultOnTooltip:!0,alwaysActive:!0,preview:!0,info:!0})))}),(0,L.jsx)(A.IT,{open:void 0!==h,onClose:()=>f(void 0),children:(0,L.jsx)(A.eT,{src:h})}),(0,L.jsx)(A.IT,{open:void 0!==g,onClose:()=>v(void 0),children:(0,L.jsx)(A.Fo,{src:g,autoPlay:!0,controls:!0})})]})}const W=async(e,t)=>{const o=await fetch(e,{method:"HEAD"});o.headers.get("content-type");if(!o.ok)throw new Error("HTTP error! status: ".concat(o.status));const n=await o.blob(),i=new File([n],t,{type:n.type});return{file:i,uploadStatus:"success",errors:void 0,name:t,size:i.size,type:i.type,id:"".concat(t).concat((0,B.random)(0,1e3)),downloadUrl:e}},H=e=>{const{page:t,questionEssayQuestion:o,questionState:n}=e,i=null===n||void 0===n?void 0:n.flag,[a,r]=(0,q.useState)(""),{t:c}=(0,k.$G)(),m=(0,F.I0)(),x="archive"===o.fileTypesList?".7z, .bdoc, .cdoc, .ddoc, .gtar, .tgz, .gz, .gzip, .hqx, .rar, .sit, .tar, .zip":"document"===o.fileTypesList?".doc, .docx, .epub, .gdoc, .odt, .ott, .oth, .pdf, .rtf":"image"===o.fileTypesList?".bmp, .gif, .jpeg, .jpg, .png, .svg, .tif, .tiff":"video"===o.fileTypesList?".3g2, .3gp, .avi, .flv, .h264, .m4v, .mkv, .mov, .mp4, .mpg, .mpeg .rm .swf .vob .wmv":"audio"===o.fileTypesList?".aif, .cda, .mid, .midi, .mp3, .mpa, .ogg, .wav, .wma":"",p=o.maxBytes?o.maxBytes/1e3*1024*1024:void 0,f=(0,B.debounce)((e=>{let t=!0;""===e&&(t=!1),m((0,E.pz)({id:o.question.id,answered:t,content:e}))}),250);return(0,L.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,L.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,L.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",children:[(0,L.jsx)(z.Z,{children:"".concat(c("common_question")," ").concat(t+1)}),(0,L.jsx)(C.Z,{variant:i?"soft":"outlined",color:"primary",startDecorator:i?(0,L.jsx)(s.Z,{}):(0,L.jsx)(D.Z,{}),onClick:()=>{void 0!==i&&m((0,E.mB)({id:o.question.id,flag:!i}))},children:c(i?"common_remove_flag":"common_flag")})]})}),(0,L.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,L.jsxs)(h.Z,{direction:"row",spacing:2,children:[(0,L.jsx)(d.Z,{sx:{backgroundColor:null!==n&&void 0!==n&&n.answered?"#e6eaf7":"#FDF6EA"},borderRadius:1,padding:".35rem 1rem",children:(0,L.jsx)(T.Z,{fontSize:"12px",color:"#212121",children:null!==n&&void 0!==n&&n.answered?c("common_answer_saved"):c("common_not_answered")})}),(0,L.jsx)(d.Z,{sx:{backgroundColor:"#f5f5f5"},borderRadius:1,padding:".35rem 1rem",children:(0,L.jsxs)(T.Z,{fontSize:"12px",color:"#212121",children:[c("common_score_can_achieve"),": ",o.question.defaultMark]})})]})}),(0,L.jsx)(l.ZP,{item:!0,xs:12,children:(0,L.jsx)(u.Z,{})}),(0,L.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,L.jsxs)(d.Z,{children:[(0,L.jsx)(T.Z,{gutterBottom:!0,fontSize:"1rem",textAlign:"left",fontWeight:"400",color:"#212121",lineHeight:"1.5",children:o.question.questionText}),(0,L.jsx)(T.Z,{fontSize:".875rem",textAlign:"left",fontWeight:"600",color:"#212121",children:c("common_answer")}),"editor"===o.responseFormat&&(0,L.jsx)(I.Z,{value:a,defaultvalue:null===n||void 0===n?void 0:n.content,onChange:e=>{r(e),f(e)},roundedBorder:!0,maxLines:o.responseFieldLines}),"plain"===o.responseFormat&&(0,L.jsx)(P.Z,{minRows:"10",maxRows:o.responseFieldLines})]})}),("no_online"===o.responseFormat||0!==o.attachments)&&(0,L.jsx)(l.ZP,{item:!0,xs:12,children:(0,L.jsx)(U,{maxFileSize:p,accept:x,maxFiles:o.attachments,stopAutoUpload:!0,disableDownload:!0,relatedId:o.question.id,relatedDispatch:E.ln,relatedRemoveDispatch:E.aG,filesFromUrl:null===n||void 0===n?void 0:n.files,relatedRemoveAllDispatch:E.pE})})]})};var N=o(71087),O=o(60551),Q=o(94182);const $=e=>{var t;const{t:o}=(0,k.$G)(),{page:n,questionState:i,questionMultiChoice:a}=e,r=(0,F.I0)(),c=null===i||void 0===i?void 0:i.flag,[m,x]=(0,q.useState)(null===(t=a.question.answers)||void 0===t?void 0:t.map((e=>({value:e.id,label:e.answer})))),p=e=>{let t=null===i||void 0===i?void 0:i.content.split(", ");t=t.filter((e=>""!==e&&"null"!==e)),e.target.checked?t.push(e.target.value):t=t.filter((t=>t!==e.target.value));const o=t.join(", ");r((0,E.pz)({id:a.question.id,content:o,answered:t.length>0})),console.log(t)};return(0,q.useEffect)((()=>{a.shuffleAnswers&&x(function(e){if(!e)return[];for(var t=e.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[o],e[o]=n}return e}(m))}),[]),(0,L.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,L.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,L.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",children:[(0,L.jsx)(z.Z,{children:"".concat(o("common_question")," ").concat(n+1)}),(0,L.jsx)(C.Z,{variant:c?"soft":"outlined",color:"primary",startDecorator:c?(0,L.jsx)(s.Z,{}):(0,L.jsx)(D.Z,{}),onClick:()=>{void 0!==c&&r((0,E.mB)({id:a.question.id,flag:!c}))},children:o(c?"common_remove_flag":"common_flag")})]})}),(0,L.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,L.jsxs)(h.Z,{direction:"row",spacing:2,children:[(0,L.jsx)(d.Z,{sx:{backgroundColor:i.answered?"#e6eaf7":"#FDF6EA"},borderRadius:1,padding:".35rem 1rem",children:(0,L.jsx)(T.Z,{fontSize:"12px",color:"#212121",children:null!==i&&void 0!==i&&i.answered?o("common_answer_saved"):o("common_not_answered")})}),(0,L.jsx)(d.Z,{sx:{backgroundColor:"#f5f5f5"},borderRadius:1,padding:".35rem 1rem",children:(0,L.jsxs)(T.Z,{fontSize:"12px",color:"#212121",children:[o("common_score_can_achieve"),": ",a.question.defaultMark]})})]})}),(0,L.jsx)(l.ZP,{item:!0,xs:12,children:(0,L.jsx)(u.Z,{})}),(0,L.jsxs)(l.ZP,{item:!0,xs:12,md:12,children:[(0,L.jsx)(T.Z,{sx:{padding:0,height:"fit-content"},className:"ql-editor",fontSize:"1rem",textAlign:"left",fontWeight:"400",color:"#212121",lineHeight:"1.5",dangerouslySetInnerHTML:{__html:a.question.questionText}}),Boolean(a.showStandardInstructions)&&(0,L.jsx)(T.Z,{fontSize:".875rem",textAlign:"left",fontWeight:"600",color:"#212121",children:"\n            ".concat(a.single?o("course_management_exam_preview_multichoice"):o("course_management_exam_preview_multichoice_multiple"),":")}),Boolean(a.single)?(0,L.jsx)(N.Z,{color:"primary",value:null===i||void 0===i?void 0:i.content,onChange:e=>{r((0,E.pz)({id:a.question.id,content:e,answered:!0}))},values:m,orientation:"vertical",size:"md",numbering:a.answerNumbering,fontSize:".8rem",fontWeight:"400",overlay:!0}):(0,L.jsx)(d.Z,{sx:{display:"flex",flexDirection:"column",gap:2,"& > div":{p:1,borderRadius:"12px",display:"flex"}},children:null===m||void 0===m?void 0:m.map((e=>(0,L.jsx)(O.Z,{variant:"outlined",children:(0,L.jsx)(Q.Z,{onChange:p,value:e.value,checked:null===i||void 0===i?void 0:i.content.includes(e.value),size:"sm",overlay:!0,label:(0,L.jsx)(T.Z,{textAlign:"center",fontSize:".8rem",fontWeight:"400",children:e.label})})},e.value)))})]})]})},G=e=>{const{page:t,questionShortAnswer:o,questionState:n}=e,{t:i}=(0,k.$G)(),a=(0,F.I0)(),r=null===n||void 0===n?void 0:n.flag,c=(0,B.debounce)((e=>{let t=!0;""===e.target.value&&(t=!1),a((0,E.pz)({id:o.question.id,answered:t,content:e.target.value}))}),250);return(0,L.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,L.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,L.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",children:[(0,L.jsx)(z.Z,{children:"".concat(i("common_question")," ").concat(t+1)}),(0,L.jsx)(C.Z,{variant:r?"soft":"outlined",color:"primary",startDecorator:r?(0,L.jsx)(s.Z,{}):(0,L.jsx)(D.Z,{}),onClick:()=>{void 0!==r&&a((0,E.mB)({id:o.question.id,flag:!r}))},children:i(r?"common_remove_flag":"common_flag")})]})}),(0,L.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,L.jsxs)(h.Z,{direction:"row",spacing:2,children:[(0,L.jsx)(d.Z,{sx:{backgroundColor:null!==n&&void 0!==n&&n.answered?"#e6eaf7":"#FDF6EA"},borderRadius:1,padding:".35rem 1rem",children:(0,L.jsx)(T.Z,{fontSize:"12px",color:"#212121",children:null!==n&&void 0!==n&&n.answered?i("common_answer_saved"):i("common_not_answered")})}),(0,L.jsx)(d.Z,{sx:{backgroundColor:"#f5f5f5"},borderRadius:1,padding:".35rem 1rem",children:(0,L.jsxs)(T.Z,{fontSize:"12px",color:"#212121",children:[i("common_score_can_achieve"),": ",o.question.defaultMark]})})]})}),(0,L.jsx)(l.ZP,{item:!0,xs:12,children:(0,L.jsx)(u.Z,{})}),(0,L.jsxs)(l.ZP,{item:!0,xs:12,md:12,children:[(0,L.jsx)(T.Z,{sx:{padding:0,height:"fit-content"},className:"ql-editor",fontSize:"1rem",textAlign:"left",fontWeight:"400",color:"#212121",lineHeight:"1.5",dangerouslySetInnerHTML:{__html:o.question.questionText}}),(0,L.jsx)(T.Z,{fontSize:".875rem",textAlign:"left",fontWeight:"600",color:"#212121",children:i("common_answer")}),(0,L.jsx)(P.Z,{defaultValue:null===n||void 0===n?void 0:n.content,onChange:c,sx:{marginBottom:1,backgroundColor:"white"},minRows:1,maxRows:1,placeholder:i("common_enter_answer")})]})]})},V=e=>{const{t:t}=(0,k.$G)(),{page:o,questionState:n,questionTrueFalseQuestion:i}=e,a=[{value:"true",label:t("common_true")},{value:"false",label:t("common_false")}],r=(0,F.I0)(),c=null===n||void 0===n?void 0:n.flag;return(0,L.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,L.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,L.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",children:[(0,L.jsx)(z.Z,{children:"".concat(t("common_question")," ").concat(o+1)}),(0,L.jsx)(C.Z,{variant:c?"soft":"outlined",color:"primary",startDecorator:c?(0,L.jsx)(s.Z,{}):(0,L.jsx)(D.Z,{}),onClick:()=>{void 0!==c&&r((0,E.mB)({id:i.question.id,flag:!c}))},children:t(c?"common_remove_flag":"common_flag")})]})}),(0,L.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,L.jsxs)(h.Z,{direction:"row",spacing:2,children:[(0,L.jsx)(d.Z,{sx:{backgroundColor:null!==n&&void 0!==n&&n.answered?"#e6eaf7":"#FDF6EA"},borderRadius:1,padding:".35rem 1rem",children:(0,L.jsx)(T.Z,{fontSize:"12px",color:"#212121",children:null!==n&&void 0!==n&&n.answered?t("common_answer_saved"):t("common_not_answered")})}),(0,L.jsx)(d.Z,{sx:{backgroundColor:"#f5f5f5"},borderRadius:1,padding:".35rem 1rem",children:(0,L.jsxs)(T.Z,{fontSize:"12px",color:"#212121",children:[t("common_score_can_achieve"),": ",i.question.defaultMark]})})]})}),(0,L.jsx)(l.ZP,{item:!0,xs:12,children:(0,L.jsx)(u.Z,{})}),(0,L.jsxs)(l.ZP,{item:!0,xs:12,md:12,children:[(0,L.jsx)(T.Z,{sx:{padding:0,height:"fit-content"},className:"ql-editor",fontSize:"1rem",textAlign:"left",fontWeight:"400",color:"#212121",lineHeight:"1.5",dangerouslySetInnerHTML:{__html:i.question.questionText}}),Boolean(i.showStandardInstructions)&&(0,L.jsx)(T.Z,{fontSize:".875rem",textAlign:"left",fontWeight:"600",color:"#212121",children:t("course_management_exam_preview_multichoice")}),(0,L.jsx)(N.Z,{color:"primary",value:null===n||void 0===n?void 0:n.content,onChange:e=>{r((0,E.pz)({id:i.question.id,content:e,answered:!0}))},values:a,orientation:"vertical",size:"md",fontSize:".8rem",fontWeight:"400",overlay:!0})]})]})},K={root:"styles_root__L+9Ds",container:"styles_container__I1ShF",mainContent:"styles_mainContent__45J3T",formBody:"styles_formBody__CnXML",drawerBody:"styles_drawerBody__RsTWl",drawerFieldContainer:"styles_drawerFieldContainer__Vg671",drawerTextTitle:"styles_drawerTextTitle__7U1Zj",textEditor:"styles_textEditor__H68lk",breadcumpWrapper:"styles_breadcumpWrapper__mRDMS",icArrow:"styles_icArrow__MplBF",cursorPointer:"styles_cursorPointer__KELTm"};var Y=o(47056),J=o(91861),X=o(35659),ee=o(40309),te=o(88999),oe=o(70058),ne=o(38515),ie=o(74512),se=o(37222),ae=o(51928),re=o(65339),le=o(33060),de=o(70816),ce=o.n(de),ue=o(8344);const me=370;function xe(){const e=(0,y.UO)().examId,t=(0,ae.C)((e=>e.takeExam.examId)),[o,I]=q.useState(""),D=(0,y.UO)().courseId,{width:z}=(0,Z.Z)(),T=(0,y.s0)(),[P]=(0,w.lr)(),A=(0,f.Z)(),{t:R}=(0,k.$G)(),B=(0,y.TH)(),[M,U]=q.useState([]);let W=Number(P.get("page"));(isNaN(W)||W<0)&&(W=0);const N=(0,F.I0)(),O=(0,ae.C)((e=>e.takeExam.questionList)),se=q.useRef(O);q.useEffect((()=>{se.current=O}),[O]);const de=(0,ae.C)((e=>e.takeExam.examData)),xe=(0,ae.C)((e=>e.takeExam.startAt)),[he,fe]=q.useState(!0),[ge,ve]=q.useState(!0),[_e,je]=q.useState(z<1080?"temporary":"permanent"),[Ze,qe]=q.useState([]),[ye,we]=q.useState(!1),[be,Se]=q.useState(0),[Ie,De]=q.useState(0),[Ce,ke]=q.useState(0),[ze,Te]=q.useState((()=>{if(!xe)return 0;return new Date(xe).getTime()+1e3*((null===de||void 0===de?void 0:de.timeLimit)||0)}));q.useEffect((()=>{const o=setInterval((()=>(o=>{if(!o)return;const n=ce()(o).diff(ce()().utc(),"milliseconds");if(n<0){N((0,ue.K4)(!0));const o=new Date((new Date).toLocaleString("en",{timeZone:"Asia/Bangkok"})).toISOString();if("AUTOSUBMIT"===de.overdueHanding){const n=se.current.map((e=>{var t;return{questionId:e.questionData.id,content:e.content,numFile:(null===(t=e.files)||void 0===t?void 0:t.length)||0}}));console.log("questions",n);const i=new Date(new Date(xe||"").toLocaleString("en",{timeZone:"Asia/Bangkok"})).toISOString(),s={examId:e||t,userId:"2d7ed5a0-fb21-4927-9a25-647c17d29668",questions:n,startTime:i,submitTime:o};ie.O.submitExam(s).then((t=>{N((0,ue.K4)(!1)),N((0,E.Yq)()),T(b._.student.exam.review.replace(":courseId",D||de.courseId).replace(":examId",e||de.id).replace(":submissionId",t.examSubmissionId))})).catch((e=>{})).finally((()=>{}))}else N((0,E.Yq)()),T(b._.student.exam.detail.replace(":courseId",D||de.courseId).replace(":examId",e||de.id))}else Se(Math.floor(n/36e5%24)),De(Math.floor(n/1e3/60%60)),ke(Math.floor(n/1e3%60))})(ze)),500);return()=>clearInterval(o)}),[ze]);q.useEffect((()=>{je(z<1080?"temporary":"persistent")}),[z]);const Pe=q.useRef(null),{height:Ee}=(0,j.Z)({ref:Pe});q.useEffect((()=>{(void 0===O||(null===O||void 0===O?void 0:O.length)<=0||e!==t)&&ie.O.getExamQuestionById(null!==e&&void 0!==e?e:de.id,null).then((t=>{const o=t.questions.map(((e,t)=>({flag:!1,answered:!1,content:"",questionData:e,files:[]}))),n=new Date;console.log("startTIme",n),Te(n.getTime()+1e3*((null===de||void 0===de?void 0:de.timeLimit)||0)),N((0,E.NI)({examId:null!==e&&void 0!==e?e:de.id,startAt:n.toISOString(),questionList:o}))})).catch((e=>{console.log(e)}))}),[]);const Fe=()=>{T("".concat(b._.student.exam.submitSummary.replace(":courseId",null!==D&&void 0!==D?D:de.courseId).replace(":examId",null!==e&&void 0!==e?e:de.id)),{replace:!0})};q.useEffect((()=>{const e=O.filter((e=>e.questionData.page===W)).map((e=>({questionId:e.questionData.id,qtype:e.questionData.qtype}))),t={questionCommands:e};0!==e.length&&re.a.getQuestionDetail(t).then((e=>{console.log("get current list",e);const t=e.questionResponses.map((e=>({data:e.qtypeEssayQuestion?e.qtypeEssayQuestion:e.qtypeShortAnswerQuestion?e.qtypeShortAnswerQuestion:e.qtypeMultichoiceQuestion?e.qtypeMultichoiceQuestion:e.qtypeTrueFalseQuestion?e.qtypeTrueFalseQuestion:e.qtypeCodeQuestion})));U(t)})).catch((e=>{console.log(e)}))}),[W,t]);const[Ae,Re]=q.useState(!1);return q.useEffect((()=>{if(!Ae)return;Re(!1),console.log("selectedQtype",Ze);const t=O.filter((e=>Ze.includes(e.questionData.qtype))).at(0);T("".concat(b._.student.exam.take.replace(":courseId",null!==D&&void 0!==D?D:de.courseId).replace(":examId",null!==e&&void 0!==e?e:de.id),"?page=").concat((null===t||void 0===t?void 0:t.questionData.page)||0),{replace:!0})}),[Ze]),q.useEffect((()=>{const e=setInterval((function(){const t=B.hash.substring(1),o=document.getElementById(t);o&&(o.scrollIntoView({behavior:"smooth"}),clearInterval(e))}),100)}),[B]),(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(l.ZP,{className:K.root,children:[(0,L.jsx)(g.Z,{ref:Pe}),(0,L.jsxs)(d.Z,{className:K.container,style:{marginTop:"".concat(Ee,"px")},children:[(0,L.jsx)(c.ZP,{}),(0,L.jsx)(C.Z,{onClick:()=>{fe(!0)},sx:{...he&&{display:"none"},position:"fixed",top:"".concat(Ee+10,"px"),right:0,height:"44px",width:"49px"},size:"sm",endDecorator:(0,L.jsx)(Y.Z,{color:"action"}),variant:"soft"}),(0,L.jsxs)(d.Z,{className:K.formBody,width:"100%",children:[(0,L.jsx)(v.Z,{fontWeight:"500",children:de.name}),(0,L.jsx)(le.Z,{children:(0,L.jsx)("div",{dangerouslySetInnerHTML:{__html:de.intro}})}),(0,L.jsx)(C.Z,{onClick:()=>{T(b._.student.exam.detail.replace(":courseId",D||de.courseId).replace(":examId",e||de.id))},startDecorator:(0,L.jsx)(n.Z,{fontSize:"small"}),color:"neutral",variant:"soft",size:"md",sx:{width:"fit-content"},children:R("common_back")}),(0,L.jsx)(d.Z,{sx:{position:"sticky",top:"74px",zIndex:"1020"},children:(0,L.jsx)(d.Z,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:(0,L.jsxs)(d.Z,{sx:{padding:"8px 9px 8px 10px",borderRadius:"40px",display:"flex",alignItems:"center",color:"#005742",backgroundColor:"#EAF4DD",fontWeight:"500",position:"sticky",top:"0"},children:[(0,L.jsx)(te.Z,{fontSize:"medium",sx:{marginRight:"0.5rem !important"}}),ge?"C\xf2n l\u1ea1i: ".concat(be<10?"0".concat(be):be,":").concat(Ie<10?"0".concat(Ie):Ie,":").concat(Ce<10?"0".concat(Ce):Ce):"Th\u1eddi gian c\xf2n l\u1ea1i",(0,L.jsx)(C.Z,{onClick:()=>{ve(!ge)},variant:"soft",color:"neutral",sx:{borderRadius:"40px",marginLeft:"16px",border:"1px solid #bce3da"},children:ge?"\u1ea8n":"Hi\u1ec7n"})]})})}),(0,L.jsx)(d.Z,{sx:{borderRadius:"5px",border:"1px solid #E1E1E1",padding:"20px"},children:(0,L.jsxs)(l.ZP,{container:!0,spacing:7,children:[M.filter((e=>0===Ze.length||Ze.includes(e.data.question.qtype))).map(((e,t)=>(0,L.jsxs)(q.Fragment,{children:[(0,L.jsx)(l.ZP,{item:!0,xs:12,id:pe(e.data.question.id),children:e.data.question.qtype===S.Z.essay.code?(0,L.jsx)(H,{page:O.findIndex((t=>t.questionData.id===e.data.question.id)),questionState:O.find((t=>t.questionData.id===e.data.question.id)),questionEssayQuestion:e.data}):e.data.question.qtype===S.Z.short_answer.code?(0,L.jsx)(G,{page:O.findIndex((t=>t.questionData.id===e.data.question.id)),questionShortAnswer:e.data,questionState:O.find((t=>t.questionData.id===e.data.question.id))}):e.data.question.qtype===S.Z.multiple_choice.code?(0,L.jsx)($,{page:O.findIndex((t=>t.questionData.id===e.data.question.id)),questionMultiChoice:e.data,questionState:O.find((t=>t.questionData.id===e.data.question.id))}):e.data.question.qtype===S.Z.true_false.code?(0,L.jsx)(V,{page:O.findIndex((t=>t.questionData.id===e.data.question.id)),questionTrueFalseQuestion:e.data,questionState:O.find((t=>t.questionData.id===e.data.question.id))}):null}),(0,L.jsx)(l.ZP,{item:!0,xs:12,display:"flex",justifyContent:"center",children:(0,L.jsx)(u.Z,{sx:{width:"100px"}})})]},e.data.question.id))),(0,L.jsxs)(l.ZP,{item:!0,xs:12,display:"flex",justifyContent:"space-between",children:[0!==W?(0,L.jsx)(w.rU,{to:{pathname:b._.student.exam.take.replace(":courseId",null!==D&&void 0!==D?D:de.courseId).replace(":examId",null!==e&&void 0!==e?e:de.id),search:"?page=".concat(W-1)},children:(0,L.jsx)(C.Z,{variant:"soft",color:"neutral",children:"Trang tr\u01b0\u1edbc"})}):(0,L.jsx)(d.Z,{}),W===(O.length>0?O[O.length-1].questionData.page:-1)?(0,L.jsx)(C.Z,{onClick:Fe,variant:"solid",color:"primary",children:"K\u1ebft th\xfac b\xe0i l\xe0m..."}):(0,L.jsx)(w.rU,{to:{pathname:b._.student.exam.take.replace(":courseId",null!==D&&void 0!==D?D:de.courseId).replace(":examId",null!==e&&void 0!==e?e:de.id),search:"?page=".concat(W+1)},children:(0,L.jsx)(C.Z,{onClick:()=>{},variant:"solid",color:"primary",children:"Trang sau"})})]})]})})]}),(0,L.jsxs)(m.ZP,{sx:{display:he?"block":"none",width:me,flexShrink:0,"& .MuiDrawer-paper":{borderTop:"1px solid #E1E1E1",borderRadius:"12px 0px",width:me,top:"".concat(Ee+10,"px ")}},variant:_e,anchor:"right",open:he,children:[(0,L.jsx)(d.Z,{sx:{display:"flex",justifyContent:"flex-end",padding:1},children:(0,L.jsx)(J.ZP,{onClick:()=>{fe(!1)},variant:"soft",children:"rtl"===A.direction?(0,L.jsx)(n.Z,{}):(0,L.jsx)(i.Z,{})})}),(0,L.jsx)(d.Z,{className:K.drawerBody,children:(0,L.jsx)(d.Z,{className:K.drawerFieldContainer,children:(0,L.jsxs)(l.ZP,{container:!0,maxHeight:"80dvh",overflow:"auto",rowSpacing:3,children:[(0,L.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,L.jsx)(_.Z,{className:K.drawerTextTitle,children:R("take_exam_question_navigation_title")}),(0,L.jsx)(X.Z,{title:R("take_exam_question_name"),fontSize:"13px",fontWeight:"500"}),(0,L.jsx)(x.Z,{fullWidth:!0,size:"small",options:O.filter((e=>0===Ze.length||Ze.includes(e.questionData.qtype))),getOptionLabel:e=>e.questionData.name?"".concat(e.questionData.name):"",sx:{marginBottom:"16px",borderRadius:"12px","& .MuiOutlinedInput-root":{borderRadius:"12px"}},renderInput:e=>(0,L.jsx)(p.Z,{...e,placeholder:"Nh\u1eadp c\xe2u h\u1ecfi",size:"small",sx:{borderRadius:"12px"}}),isOptionEqualToValue:(e,t)=>e.questionData.name===t.questionData.name}),(0,L.jsx)(X.Z,{title:R("take_exam_question_sort_question"),fontSize:"13px",fontWeight:"500"}),(0,L.jsx)(x.Z,{disablePortal:!0,fullWidth:!0,multiple:!0,size:"small",limitTags:2,options:[{label:R("common_question_type_essay")},{label:R("common_question_type_multi_choice")},{label:R("common_question_type_yes_no")},{label:R("common_question_type_short")}],renderInput:e=>(0,L.jsx)(p.Z,{...e,sx:{borderRadius:"12px"},InputLabelProps:{shrink:!0}}),sx:{marginBottom:"16px",borderRadius:"12px","& .MuiOutlinedInput-root":{borderRadius:"12px"}},onChange:(e,t)=>{if(0===t.length)qe([]);else{const e=t.map((e=>e.label===R("common_question_type_essay")?S.Z.essay.code:e.label===R("common_question_type_multi_choice")?S.Z.multiple_choice.code:e.label===R("common_question_type_yes_no")?S.Z.true_false.code:e.label===R("common_question_type_short")?S.Z.short_answer.code:""));qe(e)}Re(!0)},isOptionEqualToValue:(e,t)=>e.label===t.label}),(0,L.jsxs)(h.Z,{direction:"row",spacing:1,marginBottom:"16px",children:[(0,L.jsx)(X.Z,{title:R("common_flagged_question"),fontSize:"13px",fontWeight:"500"}),(0,L.jsx)(Q.Z,{onChange:e=>{we(e.target.checked)}})]}),(0,L.jsx)(l.ZP,{container:!0,spacing:1,marginBottom:"10px",sx:{maxHeight:"30dvh"},children:O.filter((e=>(0===Ze.length||Ze.includes(e.questionData.qtype))&&(!ye||e.flag))).map(((t,o)=>(0,L.jsx)(l.ZP,{item:!0,marginTop:"16px",marginRight:"8px",children:(0,L.jsx)(ee.Z,{color:"neutral",variant:"outlined",badgeContent:t.questionData.qtype===S.Z.essay.code?(0,L.jsx)(r.Z,{sx:{width:"15px",height:"15px"}}):t.questionData.qtype===S.Z.short_answer.code?(0,L.jsx)(ne.Z,{sx:{width:"15px",height:"15px"}}):t.questionData.qtype===S.Z.true_false.code?(0,L.jsx)(oe.Z,{sx:{width:"15px",height:"15px"}}):(0,L.jsx)(a.Z,{sx:{width:"15px",height:"15px"}}),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,L.jsx)(ee.Z,{color:"neutral",variant:"outlined",badgeContent:(0,L.jsx)(s.Z,{sx:{width:"10px",height:"15px",color:"red"}}),anchorOrigin:{vertical:"top",horizontal:"right"},invisible:!t.flag,children:(0,L.jsx)(C.Z,{variant:"outlined",sx:{border:M.some((e=>e.data.question.id===t.questionData.id))?"2px solid #002db3":"2px solid #e1e1e1",borderRadius:"1000px",width:"40px",height:"40px",backgroundColor:t.answered?"#e1e1e1":""},color:M.some((e=>e.data.question.id===t.questionData.id))?"primary":"neutral",onClick:()=>(t=>{var o;const n=null===(o=O.find((e=>e.questionData.id===t)))||void 0===o?void 0:o.questionData.page,i=pe(t);if(n===W){const e=document.getElementById(i);null===e||void 0===e||e.scrollIntoView({behavior:"smooth"})}else T("".concat(b._.student.exam.take.replace(":courseId",null!==D&&void 0!==D?D:de.courseId).replace(":examId",null!==e&&void 0!==e?e:de.id),"?page=").concat(n,"#").concat(i),{replace:!0})})(t.questionData.id),children:O.findIndex((e=>e.questionData.id===t.questionData.id))+1})})})},o)))})]}),(0,L.jsx)(l.ZP,{item:!0,xs:12,children:(0,L.jsx)(l.ZP,{container:!0,spacing:1,children:(0,L.jsx)(l.ZP,{item:!0,justifyContent:"center",xs:12,children:(0,L.jsx)(C.Z,{onClick:Fe,variant:"soft",color:"primary",fullWidth:!0,children:"K\u1ebft th\xfac b\xe0i l\xe0m..."})})})})]})})})]})]})]})})}function pe(e){const t=Array.from((0,se.Z)(e));return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}}}]);