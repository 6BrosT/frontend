"use strict";(self.webpackChunkfrontend_app=self.webpackChunkfrontend_app||[]).push([[1332],{71087:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(63994),i=n(45148),a=n(61179),s=n(79536),r=n(46417);function l(e,t){const n=("abc"===t?"a":"A").charCodeAt(0);if(e<26)return String.fromCharCode(n+e);return String.fromCharCode(n+Math.floor(e/26)-1)+String.fromCharCode(n+e%26)}const d=e=>{const{values:t,size:n,variant:d,color:c,orientation:u,fontSize:x,fontWeight:m,fontFamily:p,onChange:h,value:f,numbering:g,overlay:v,disabled:j}=e;return(0,r.jsx)(o.Z,{orientation:u,size:n,variant:d,value:f,children:(0,r.jsx)(s.Z,{sx:{display:"flex",flexDirection:"column",gap:2,"& > div":{p:1,borderRadius:"12px",display:"flex"}},children:null===t||void 0===t?void 0:t.map(((e,t)=>v?(0,r.jsx)(i.Z,{variant:"outlined",children:(0,r.jsx)(a.Z,{disabled:j,overlay:!0,checkedIcon:g&&(0,r.jsx)(s.Z,{sx:{width:"inherit",height:"inherit",backgroundColor:"#e2ecf5"},borderRadius:"1000px",border:"2px solid #0b6bcb",display:"flex",justifyContent:"center",alignItems:"center",padding:"5px",fontWeight:"500",children:(0,r.jsx)(s.Z,{children:"n123"!==g?l(t,g):t+1})}),uncheckedIcon:g&&(0,r.jsx)("span",{children:"n123"!==g?l(t,g):t+1}),value:e.value,label:e.label,onChange:e=>h(e.target.value),color:c,sx:{"& .MuiRadio-label":{fontFamily:p||"Montserrat",fontSize:x||"14px",fontWeight:m||"400"}}})},t):(0,r.jsx)(a.Z,{disabled:j,checked:0===t,checkedIcon:g&&(0,r.jsx)(s.Z,{sx:{width:"inherit",height:"inherit",backgroundColor:"#e2ecf5"},borderRadius:"1000px",border:"2px solid #0b6bcb",display:"flex",justifyContent:"center",alignItems:"center",padding:"5px",fontWeight:"500",children:(0,r.jsx)(s.Z,{children:"n123"!==g?l(t,g):t+1})}),uncheckedIcon:g&&(0,r.jsx)("span",{children:"n123"!==g?l(t,g):t+1}),value:e.value,label:e.label,onChange:e=>h(e.target.value),color:c,sx:{"& .MuiRadio-label":{fontFamily:p||"Montserrat",fontSize:x||"14px",fontWeight:m||"400"}}},t)))})})}},33060:(e,t,n)=>{n.d(t,{Z:()=>r});var o,i=n(30168),a=n(17592),s=n(61113);const r=(0,a.ZP)(s.Z)(o||(o=(0,i.Z)(['\n  font-family: "Montserrat";\n  font-style: ',";\n  font-weight: 600;\n  font-size: 24px;\n  line-height: 32px;\n  letter-spacing: -0.03em;\n  color: ",";\n  @media only screen and (max-width: 767px) {\n    font-size: ",";\n    line-height: ",";\n  }\n"])),(e=>e.fontStyle||"normal"),(e=>"var(".concat(e.colorname||"--eerie-black",")")),(e=>e.fontSizeMobile||"22px"),(e=>e.$lineHeightMobile||"32px"))},38037:(e,t,n)=>{n.d(t,{Z:()=>r});var o,i=n(30168),a=n(17592),s=n(61113);const r=(0,a.ZP)(s.Z)(o||(o=(0,i.Z)(['\n  font-family: "Montserrat";\n  font-style: ',";\n  font-weight: ",";\n  font-size: 18px;\n  line-height: 24px;\n  text-wrap: ",";\n  color: ",";\n  @media only screen and (max-width: 767px) {\n    font-size: ",";\n    line-height: ",";\n  }\n"])),(e=>e.fontStyle||"normal"),(e=>e.fontWeight||600),(e=>e.textWrap||"wrap"),(e=>"var(".concat(e.colorname||"--eerie-black-00",")")),(e=>e.fontSizeMobile||"14px"),(e=>e.$lineHeightMobile||"24px"))},51928:(e,t,n)=>{n.d(t,{C:()=>a,T:()=>i});var o=n(65537);const i=o.I0.withTypes(),a=o.v9.withTypes()},61332:(e,t,n)=>{n.r(t),n.d(t,{default:()=>xe});var o=n(89790),i=n(54045),a=n(1065),s=n(42766),r=n(78832),l=n(9019),d=n(79536),c=n(62481),u=n(19536),x=n(46923),m=n(48623),p=n(16783),h=n(42832),f=n(19860),g=n(90200),v=n(31845),j=n(99221),Z=n(47477),_=n(38556),y=n(47313),q=n(58467),w=n(2135),b=n(90469),S=n(43750),I=n(92556),C=n(52801),k=n(66565),D=n(75590),z=n(38037),T=n(80007),P=n(15305),F=n(4271),E=n(65537),A=n(95720),R=n(78925),M=n(16031),W=n(39392),B=n(46417);function L(e){const{maxFiles:t,maxFileSize:n,accept:o,stopAutoUpload:i,disableDownload:a,relatedDispatch:s,relatedRemoveDispatch:r,relatedId:l,filesFromUrl:d,relatedRemoveAllDispatch:c}=e,{t:u}=(0,D.$G)(),x=(0,E.I0)(),[m,p]=y.useState([]),[h,f]=y.useState(void 0),[g,v]=y.useState(void 0),j=e=>{var t;let n=null===(t=m.find((t=>t.id===e)))||void 0===t?void 0:t.downloadUrl;x(r({id:l,fileUrl:n})),p(m.filter((t=>t.id!==e)))},Z=e=>{f(e)},_=e=>{v(e)},q=e=>{p(m.map((t=>t.id===e?{...t,uploadStatus:"aborted"}:{...t})))},w=e=>{p(m.map((t=>t.id===e?{...t,uploadStatus:void 0}:{...t})))},b=async e=>{if(void 0===e)return;const t=m.find((t=>t.id===e));if(t)if(t.downloadUrl){const e=await fetch(t.downloadUrl),n=await e.blob();(0,R.saveAs)(n,t.name)}else console.error("File not found")};return y.useEffect((()=>{const e=setInterval((function(){d&&((async()=>{const e=await Promise.all(d.map((e=>U(e.fileUrl,e.fileName))));p(e)})(),clearInterval(e))}),500)}),[]),y.useEffect((()=>{console.log("extFiles",m)}),[m]),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(A.fh,{accept:o,minHeight:"195px",value:m,maxFileSize:n||5996e4,maxFiles:-1===t?void 0:t,label:u("drag_drop_file_placeholder"),onUploadStart:e=>{console.log("advanced demo start upload",e)},onUploadFinish:e=>{console.log("advanced demo finish upload",e)},onChange:async e=>{if(0!==e.length){console.log("change to uploading",e),p(e.map((e=>"success"===e.uploadStatus?e:{...e,uploadStatus:"uploading"}))),console.log("advanced upload start",e);for(let n=0;n<e.length;n++){if("success"===e[n].uploadStatus)continue;const o=e[n].file;if(!o)throw new Error("File not found");try{let t="";console.log("file uploader file",o),t=await(0,W.S)(o),l&&x(s({id:l,fileUrl:t,fileName:e[n].name})),console.log("advanced upload success",t),p((e=>{const o=[...e];return o[n]={...o[n],uploadStatus:"success",downloadUrl:t},o}))}catch(t){console.error("advanced upload error",t),p((e=>{const o=[...e];return o[n]={...o[n],uploadStatus:"error",uploadMessage:t.message},o}))}}}else p([]),c&&x(c(l))},onClean:()=>p([]),"translation-key":["drag_drop_file_placeholder"],clickable:-1===t||void 0===t||!(void 0!==t&&m.length>=t),children:m.map((e=>(0,y.createElement)(A.sZ,{...e,key:e.id,onDownload:a?void 0:b,downloadUrl:a?void 0:e.downloadUrl,onDelete:j,onSee:Z,onWatch:_,onAbort:q,onCancel:w,resultOnTooltip:!0,alwaysActive:!0,preview:!0,info:!0})))}),(0,B.jsx)(A.IT,{open:void 0!==h,onClose:()=>f(void 0),children:(0,B.jsx)(A.eT,{src:h})}),(0,B.jsx)(A.IT,{open:void 0!==g,onClose:()=>v(void 0),children:(0,B.jsx)(A.Fo,{src:g,autoPlay:!0,controls:!0})})]})}const U=async(e,t)=>{const n=await fetch(e,{method:"HEAD"});n.headers.get("content-type");if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));const o=await n.blob(),i=new File([o],t,{type:o.type});return{file:i,uploadStatus:"success",errors:void 0,name:t,size:i.size,type:i.type,id:"".concat(t).concat((0,M.random)(0,1e3)),downloadUrl:e}},H=e=>{const{page:t,questionEssayQuestion:n,questionState:o}=e,i=null===o||void 0===o?void 0:o.flag,[s,r]=(0,y.useState)(""),{t:c}=(0,D.$G)(),x=(0,E.I0)(),m="archive"===n.fileTypesList?".7z, .bdoc, .cdoc, .ddoc, .gtar, .tgz, .gz, .gzip, .hqx, .rar, .sit, .tar, .zip":"document"===n.fileTypesList?".doc, .docx, .epub, .gdoc, .odt, .ott, .oth, .pdf, .rtf":"image"===n.fileTypesList?".bmp, .gif, .jpeg, .jpg, .png, .svg, .tif, .tiff":"video"===n.fileTypesList?".3g2, .3gp, .avi, .flv, .h264, .m4v, .mkv, .mov, .mp4, .mpg, .mpeg .rm .swf .vob .wmv":"audio"===n.fileTypesList?".aif, .cda, .mid, .midi, .mp3, .mpa, .ogg, .wav, .wma":"",p=n.maxBytes?n.maxBytes/1e3*1024*1024:void 0,f=(0,M.debounce)((e=>{let t=!0;""===e&&(t=!1),x((0,F.pz)({id:n.question.id,answered:t,content:e}))}),250);return(0,B.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",children:[(0,B.jsx)(z.Z,{children:"".concat(c("common_question")," ").concat(t+1)}),(0,B.jsx)(k.Z,{variant:i?"soft":"outlined",color:"primary",startDecorator:i?(0,B.jsx)(a.Z,{}):(0,B.jsx)(C.Z,{}),onClick:()=>{void 0!==i&&x((0,F.mB)({id:n.question.id,flag:!i}))},children:c(i?"common_remove_flag":"common_flag")})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",spacing:2,children:[(0,B.jsx)(d.Z,{sx:{backgroundColor:null!==o&&void 0!==o&&o.answered?"#e6eaf7":"#FDF6EA"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsx)(T.Z,{fontSize:"12px",color:"#212121",children:null!==o&&void 0!==o&&o.answered?c("common_answer_saved"):c("common_not_answered")})}),(0,B.jsx)(d.Z,{sx:{backgroundColor:"#f5f5f5"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsxs)(T.Z,{fontSize:"12px",color:"#212121",children:[c("common_score_can_achieve"),": ",n.question.defaultMark]})})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,children:(0,B.jsx)(u.Z,{})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(d.Z,{children:[(0,B.jsx)(T.Z,{sx:{padding:0,height:"fit-content"},className:"ql-editor",fontSize:"1rem",textAlign:"left",fontWeight:"400",color:"#212121",lineHeight:"1.5",dangerouslySetInnerHTML:{__html:n.question.questionText}}),(0,B.jsx)(T.Z,{fontSize:".875rem",textAlign:"left",fontWeight:"600",color:"#212121",children:c("common_answer")}),"editor"===n.responseFormat&&(0,B.jsx)(I.Z,{value:s,defaultvalue:null===o||void 0===o?void 0:o.content,onChange:e=>{r(e),f(e)},roundedBorder:!0,maxLines:n.responseFieldLines}),"plain"===n.responseFormat&&(0,B.jsx)(P.Z,{minRows:"10",maxRows:n.responseFieldLines})]})}),("no_online"===n.responseFormat||0!==n.attachments)&&(0,B.jsx)(l.ZP,{item:!0,xs:12,children:(0,B.jsx)(L,{maxFileSize:p,accept:m,maxFiles:n.attachments,stopAutoUpload:!0,disableDownload:!0,relatedId:n.question.id,relatedDispatch:F.ln,relatedRemoveDispatch:F.aG,filesFromUrl:null===o||void 0===o?void 0:o.files,relatedRemoveAllDispatch:F.pE})})]})};var N=n(71087),O=n(45148),Q=n(94182);const V=e=>{var t;const{t:n}=(0,D.$G)(),{page:o,questionState:i,questionMultiChoice:s}=e,r=(0,E.I0)(),c=null===i||void 0===i?void 0:i.flag,[x,m]=(0,y.useState)(null===(t=s.question.answers)||void 0===t?void 0:t.map((e=>({value:e.id,label:e.answer})))),p=e=>{let t=null===i||void 0===i?void 0:i.content.split(", ");t=t.filter((e=>""!==e&&"null"!==e)),e.target.checked?t.push(e.target.value):t=t.filter((t=>t!==e.target.value));const n=t.join(", ");r((0,F.pz)({id:s.question.id,content:n,answered:t.length>0})),console.log(t)};return(0,y.useEffect)((()=>{s.shuffleAnswers&&m(function(e){if(!e)return[];for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),o=e[t];e[t]=e[n],e[n]=o}return e}(x))}),[]),(0,B.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",children:[(0,B.jsx)(z.Z,{children:"".concat(n("common_question")," ").concat(o+1)}),(0,B.jsx)(k.Z,{variant:c?"soft":"outlined",color:"primary",startDecorator:c?(0,B.jsx)(a.Z,{}):(0,B.jsx)(C.Z,{}),onClick:()=>{void 0!==c&&r((0,F.mB)({id:s.question.id,flag:!c}))},children:n(c?"common_remove_flag":"common_flag")})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",spacing:2,children:[(0,B.jsx)(d.Z,{sx:{backgroundColor:null!==i&&void 0!==i&&i.answered?"#e6eaf7":"#FDF6EA"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsx)(T.Z,{fontSize:"12px",color:"#212121",children:null!==i&&void 0!==i&&i.answered?n("common_answer_saved"):n("common_not_answered")})}),(0,B.jsx)(d.Z,{sx:{backgroundColor:"#f5f5f5"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsxs)(T.Z,{fontSize:"12px",color:"#212121",children:[n("common_score_can_achieve"),": ",s.question.defaultMark]})})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,children:(0,B.jsx)(u.Z,{})}),(0,B.jsxs)(l.ZP,{item:!0,xs:12,md:12,children:[(0,B.jsx)(T.Z,{sx:{padding:0,height:"fit-content"},className:"ql-editor",fontSize:"1rem",textAlign:"left",fontWeight:"400",color:"#212121",lineHeight:"1.5",dangerouslySetInnerHTML:{__html:s.question.questionText}}),Boolean(s.showStandardInstructions)&&(0,B.jsx)(T.Z,{fontSize:".875rem",textAlign:"left",fontWeight:"600",color:"#212121",children:"\n            ".concat(s.single?n("course_management_exam_preview_multichoice"):n("course_management_exam_preview_multichoice_multiple"),":")}),Boolean(s.single)?(0,B.jsx)(N.Z,{color:"primary",value:null===i||void 0===i?void 0:i.content,onChange:e=>{r((0,F.pz)({id:s.question.id,content:e,answered:!0}))},values:x,orientation:"vertical",size:"md",numbering:s.answerNumbering,fontSize:".8rem",fontWeight:"400",overlay:!0}):(0,B.jsx)(d.Z,{sx:{display:"flex",flexDirection:"column",gap:2,"& > div":{p:1,borderRadius:"12px",display:"flex"}},children:null===x||void 0===x?void 0:x.map((e=>(0,B.jsx)(O.Z,{variant:"outlined",children:(0,B.jsx)(Q.Z,{onChange:p,value:e.value,checked:null===i||void 0===i?void 0:i.content.includes(e.value),size:"sm",overlay:!0,label:(0,B.jsx)(T.Z,{textAlign:"center",fontSize:".8rem",fontWeight:"400",children:e.label})})},e.value)))})]})]})},$=e=>{const{page:t,questionShortAnswer:n,questionState:o}=e,{t:i}=(0,D.$G)(),s=(0,E.I0)(),r=null===o||void 0===o?void 0:o.flag,c=(0,M.debounce)((e=>{let t=!0;""===e.target.value&&(t=!1),s((0,F.pz)({id:n.question.id,answered:t,content:e.target.value}))}),250);return(0,B.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",children:[(0,B.jsx)(z.Z,{children:"".concat(i("common_question")," ").concat(t+1)}),(0,B.jsx)(k.Z,{variant:r?"soft":"outlined",color:"primary",startDecorator:r?(0,B.jsx)(a.Z,{}):(0,B.jsx)(C.Z,{}),onClick:()=>{void 0!==r&&s((0,F.mB)({id:n.question.id,flag:!r}))},children:i(r?"common_remove_flag":"common_flag")})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",spacing:2,children:[(0,B.jsx)(d.Z,{sx:{backgroundColor:null!==o&&void 0!==o&&o.answered?"#e6eaf7":"#FDF6EA"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsx)(T.Z,{fontSize:"12px",color:"#212121",children:null!==o&&void 0!==o&&o.answered?i("common_answer_saved"):i("common_not_answered")})}),(0,B.jsx)(d.Z,{sx:{backgroundColor:"#f5f5f5"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsxs)(T.Z,{fontSize:"12px",color:"#212121",children:[i("common_score_can_achieve"),": ",n.question.defaultMark]})})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,children:(0,B.jsx)(u.Z,{})}),(0,B.jsxs)(l.ZP,{item:!0,xs:12,md:12,children:[(0,B.jsx)(T.Z,{sx:{padding:0,height:"fit-content"},className:"ql-editor",fontSize:"1rem",textAlign:"left",fontWeight:"400",color:"#212121",lineHeight:"1.5",dangerouslySetInnerHTML:{__html:n.question.questionText}}),(0,B.jsx)(T.Z,{fontSize:".875rem",textAlign:"left",fontWeight:"600",color:"#212121",children:i("common_answer")}),(0,B.jsx)(P.Z,{defaultValue:null===o||void 0===o?void 0:o.content,onChange:c,sx:{marginBottom:1,backgroundColor:"white"},minRows:1,maxRows:1,placeholder:i("common_enter_answer")})]})]})},G=e=>{const{t:t}=(0,D.$G)(),{page:n,questionState:o,questionTrueFalseQuestion:i}=e,s=[{value:"true",label:t("common_true")},{value:"false",label:t("common_false")}],r=(0,E.I0)(),c=null===o||void 0===o?void 0:o.flag;return(0,B.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",children:[(0,B.jsx)(z.Z,{children:"".concat(t("common_question")," ").concat(n+1)}),(0,B.jsx)(k.Z,{variant:c?"soft":"outlined",color:"primary",startDecorator:c?(0,B.jsx)(a.Z,{}):(0,B.jsx)(C.Z,{}),onClick:()=>{void 0!==c&&r((0,F.mB)({id:i.question.id,flag:!c}))},children:t(c?"common_remove_flag":"common_flag")})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",spacing:2,children:[(0,B.jsx)(d.Z,{sx:{backgroundColor:null!==o&&void 0!==o&&o.answered?"#e6eaf7":"#FDF6EA"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsx)(T.Z,{fontSize:"12px",color:"#212121",children:null!==o&&void 0!==o&&o.answered?t("common_answer_saved"):t("common_not_answered")})}),(0,B.jsx)(d.Z,{sx:{backgroundColor:"#f5f5f5"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsxs)(T.Z,{fontSize:"12px",color:"#212121",children:[t("common_score_can_achieve"),": ",i.question.defaultMark]})})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,children:(0,B.jsx)(u.Z,{})}),(0,B.jsxs)(l.ZP,{item:!0,xs:12,md:12,children:[(0,B.jsx)(T.Z,{sx:{padding:0,height:"fit-content"},className:"ql-editor",fontSize:"1rem",textAlign:"left",fontWeight:"400",color:"#212121",lineHeight:"1.5",dangerouslySetInnerHTML:{__html:i.question.questionText}}),Boolean(i.showStandardInstructions)&&(0,B.jsx)(T.Z,{fontSize:".875rem",textAlign:"left",fontWeight:"600",color:"#212121",children:t("course_management_exam_preview_multichoice")}),(0,B.jsx)(N.Z,{color:"primary",value:null===o||void 0===o?void 0:o.content,onChange:e=>{r((0,F.pz)({id:i.question.id,content:e,answered:!0}))},values:s,orientation:"vertical",size:"md",fontSize:".8rem",fontWeight:"400",overlay:!0})]})]})},K={root:"styles_root__3y2Sz",container:"styles_container__dOxUg",mainContent:"styles_mainContent__QJoKL",formBody:"styles_formBody__L20dA",drawerBody:"styles_drawerBody__PDeS6",drawerFieldContainer:"styles_drawerFieldContainer__WmJ7P",drawerTextTitle:"styles_drawerTextTitle__78q8H",textEditor:"styles_textEditor__VDVFF",breadcumpWrapper:"styles_breadcumpWrapper__SV7zL",icArrow:"styles_icArrow__e-us0",cursorPointer:"styles_cursorPointer__LoVHc"};var J=n(47056),Y=n(91861),X=n(35659),ee=n(40309),te=n(88999),ne=n(70058),oe=n(38515),ie=n(74512),ae=n(37222),se=n(51928),re=n(65339),le=n(33060),de=n(70816),ce=n.n(de);const ue=370;function xe(){const e=(0,q.UO)().examId,t=(0,se.C)((e=>e.takeExam.examId)),n=(0,q.UO)().courseId,{width:I}=(0,_.Z)(),C=(0,q.s0)(),[z]=(0,w.lr)(),T=(0,f.Z)(),{t:P}=(0,D.$G)(),A=(0,q.TH)(),[R,M]=y.useState([]);let W=Number(z.get("page"));(isNaN(W)||W<0)&&(W=0);const L=(0,E.I0)(),U=(0,se.C)((e=>e.takeExam.questionList)),N=y.useRef(U);y.useEffect((()=>{N.current=U}),[U]);const O=(0,se.C)((e=>e.takeExam.examData)),ae=(0,se.C)((e=>e.takeExam.startAt)),[de,xe]=y.useState(!0),[pe,he]=y.useState(!0),[fe,ge]=y.useState(I<1080?"temporary":"permanent"),[ve,je]=y.useState([]),[Ze,_e]=y.useState(!1),[ye,qe]=y.useState(0),[we,be]=y.useState(0),[Se,Ie]=y.useState(0),[Ce,ke]=y.useState(!1),[De,ze]=y.useState((()=>{if(!ae)return 0;return new Date(ae).getTime()+1e3*((null===O||void 0===O?void 0:O.timeLimit)||0)}));y.useEffect((()=>{const o=setInterval((()=>(o=>{if(!o)return;const i=ce()(o).diff(ce()().utc(),"milliseconds");if(i<0){const o=new Date((new Date).toLocaleString("en",{timeZone:"Asia/Bangkok"})).toISOString();if("AUTOSUBMIT"!==O.overdueHanding||Ce)console.log("abandon exam"),L((0,F.Yq)()),C(b._.student.exam.detail.replace(":courseId",n||O.courseId).replace(":examId",e||O.id));else{ke(!0);const i=N.current.map((e=>{var t;return{questionId:e.questionData.id,content:e.content,numFile:(null===(t=e.files)||void 0===t?void 0:t.length)||0}}));console.log("questions",i);const a=new Date(new Date(ae||"").toLocaleString("en",{timeZone:"Asia/Bangkok"})).toISOString(),s={examId:e||t,userId:"2d7ed5a0-fb21-4927-9a25-647c17d29668",questions:i,startTime:a,submitTime:o};ie.O.submitExam(s).then((t=>{L((0,F.Yq)()),C(b._.student.exam.review.replace(":courseId",n||O.courseId).replace(":examId",e||O.id).replace(":submissionId",t.examSubmissionId))})).catch((e=>{})).finally((()=>{}))}}else qe(Math.floor(i/36e5%24)),be(Math.floor(i/1e3/60%60)),Ie(Math.floor(i/1e3%60))})(De)),500);return()=>clearInterval(o)}),[De]);y.useEffect((()=>{ge(I<1080?"temporary":"persistent")}),[I]);const Te=y.useRef(null),{height:Pe}=(0,Z.Z)({ref:Te});y.useEffect((()=>{(void 0===U||(null===U||void 0===U?void 0:U.length)<=0||e!==t)&&ie.O.getExamQuestionById(null!==e&&void 0!==e?e:O.id,null).then((t=>{const n=t.questions.map(((e,t)=>({flag:!1,answered:!1,content:"",questionData:e,files:[]}))),o=new Date;console.log("startTIme",o),ze(o.getTime()+1e3*((null===O||void 0===O?void 0:O.timeLimit)||0)),L((0,F.NI)({examId:null!==e&&void 0!==e?e:O.id,startAt:o.toISOString(),questionList:n}))})).catch((e=>{console.log(e)}))}),[]);const Fe=()=>{C("".concat(b._.student.exam.submitSummary.replace(":courseId",null!==n&&void 0!==n?n:O.courseId).replace(":examId",null!==e&&void 0!==e?e:O.id)),{replace:!0})};y.useEffect((()=>{const e=U.filter((e=>e.questionData.page===W)).map((e=>({questionId:e.questionData.id,qtype:e.questionData.qtype}))),t={questionCommands:e};0!==e.length&&re.a.getQuestionDetail(t).then((e=>{console.log("get current list",e);const t=e.questionResponses.map((e=>({data:e.qtypeEssayQuestion?e.qtypeEssayQuestion:e.qtypeShortAnswerQuestion?e.qtypeShortAnswerQuestion:e.qtypeMultichoiceQuestion?e.qtypeMultichoiceQuestion:e.qtypeTrueFalseQuestion?e.qtypeTrueFalseQuestion:e.qtypeCodeQuestion})));M(t)})).catch((e=>{console.log(e)}))}),[W,t]);const[Ee,Ae]=y.useState(!1);return y.useEffect((()=>{if(!Ee)return;Ae(!1),console.log("selectedQtype",ve);const t=U.filter((e=>ve.includes(e.questionData.qtype))).at(0);C("".concat(b._.student.exam.take.replace(":courseId",null!==n&&void 0!==n?n:O.courseId).replace(":examId",null!==e&&void 0!==e?e:O.id),"?page=").concat((null===t||void 0===t?void 0:t.questionData.page)||0),{replace:!0})}),[ve]),y.useEffect((()=>{const e=setInterval((function(){const t=A.hash.substring(1),n=document.getElementById(t);n&&(n.scrollIntoView({behavior:"smooth"}),clearInterval(e))}),100)}),[A]),(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(l.ZP,{className:K.root,children:[(0,B.jsx)(g.Z,{ref:Te}),(0,B.jsxs)(d.Z,{className:K.container,style:{marginTop:"".concat(Pe,"px")},children:[(0,B.jsx)(c.ZP,{}),(0,B.jsx)(k.Z,{onClick:()=>{xe(!0)},sx:{...de&&{display:"none"},position:"fixed",top:"".concat(Pe+10,"px"),right:0,height:"44px",width:"49px"},size:"sm",endDecorator:(0,B.jsx)(J.Z,{color:"action"}),variant:"soft"}),(0,B.jsxs)(d.Z,{className:K.formBody,width:"100%",children:[(0,B.jsx)(v.Z,{fontWeight:"500",children:O.name}),(0,B.jsx)(le.Z,{children:(0,B.jsx)("div",{dangerouslySetInnerHTML:{__html:O.intro}})}),(0,B.jsx)(k.Z,{onClick:()=>{C(b._.student.exam.detail.replace(":courseId",n||O.courseId).replace(":examId",e||O.id))},startDecorator:(0,B.jsx)(o.Z,{fontSize:"small"}),color:"neutral",variant:"soft",size:"md",sx:{width:"fit-content"},children:P("common_back")}),(0,B.jsx)(d.Z,{sx:{position:"sticky",top:"74px",zIndex:"1020"},children:(0,B.jsx)(d.Z,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:(0,B.jsxs)(d.Z,{sx:{padding:"8px 9px 8px 10px",borderRadius:"40px",display:"flex",alignItems:"center",color:"#005742",backgroundColor:"#EAF4DD",fontWeight:"500",position:"sticky",top:"0"},children:[(0,B.jsx)(te.Z,{fontSize:"medium",sx:{marginRight:"0.5rem !important"}}),pe?"C\xf2n l\u1ea1i: ".concat(ye<10?"0".concat(ye):ye,":").concat(we<10?"0".concat(we):we,":").concat(Se<10?"0".concat(Se):Se):"Th\u1eddi gian c\xf2n l\u1ea1i",(0,B.jsx)(k.Z,{onClick:()=>{he(!pe)},variant:"soft",color:"neutral",sx:{borderRadius:"40px",marginLeft:"16px",border:"1px solid #bce3da"},children:pe?"\u1ea8n":"Hi\u1ec7n"})]})})}),(0,B.jsx)(d.Z,{sx:{borderRadius:"5px",border:"1px solid #E1E1E1",padding:"20px"},children:(0,B.jsxs)(l.ZP,{container:!0,spacing:7,children:[R.filter((e=>0===ve.length||ve.includes(e.data.question.qtype))).map(((e,t)=>(0,B.jsxs)(y.Fragment,{children:[(0,B.jsx)(l.ZP,{item:!0,xs:12,id:me(e.data.question.id),children:e.data.question.qtype===S.Z.essay.code?(0,B.jsx)(H,{page:U.findIndex((t=>t.questionData.id===e.data.question.id)),questionState:U.find((t=>t.questionData.id===e.data.question.id)),questionEssayQuestion:e.data}):e.data.question.qtype===S.Z.short_answer.code?(0,B.jsx)($,{page:U.findIndex((t=>t.questionData.id===e.data.question.id)),questionShortAnswer:e.data,questionState:U.find((t=>t.questionData.id===e.data.question.id))}):e.data.question.qtype===S.Z.multiple_choice.code?(0,B.jsx)(V,{page:U.findIndex((t=>t.questionData.id===e.data.question.id)),questionMultiChoice:e.data,questionState:U.find((t=>t.questionData.id===e.data.question.id))}):e.data.question.qtype===S.Z.true_false.code?(0,B.jsx)(G,{page:U.findIndex((t=>t.questionData.id===e.data.question.id)),questionTrueFalseQuestion:e.data,questionState:U.find((t=>t.questionData.id===e.data.question.id))}):null}),(0,B.jsx)(l.ZP,{item:!0,xs:12,display:"flex",justifyContent:"center",children:(0,B.jsx)(u.Z,{sx:{width:"100px"}})})]},e.data.question.id))),(0,B.jsxs)(l.ZP,{item:!0,xs:12,display:"flex",justifyContent:"space-between",children:[0!==W?(0,B.jsx)(w.rU,{to:{pathname:b._.student.exam.take.replace(":courseId",null!==n&&void 0!==n?n:O.courseId).replace(":examId",null!==e&&void 0!==e?e:O.id),search:"?page=".concat(W-1)},children:(0,B.jsx)(k.Z,{variant:"soft",color:"neutral",children:"Trang tr\u01b0\u1edbc"})}):(0,B.jsx)(d.Z,{}),W===(U.length>0?U[U.length-1].questionData.page:-1)?(0,B.jsx)(k.Z,{onClick:Fe,variant:"solid",color:"primary",children:"K\u1ebft th\xfac b\xe0i l\xe0m..."}):(0,B.jsx)(w.rU,{to:{pathname:b._.student.exam.take.replace(":courseId",null!==n&&void 0!==n?n:O.courseId).replace(":examId",null!==e&&void 0!==e?e:O.id),search:"?page=".concat(W+1)},children:(0,B.jsx)(k.Z,{onClick:()=>{},variant:"solid",color:"primary",children:"Trang sau"})})]})]})})]}),(0,B.jsxs)(x.ZP,{sx:{display:de?"block":"none",width:ue,flexShrink:0,"& .MuiDrawer-paper":{borderTop:"1px solid #E1E1E1",borderRadius:"12px 0px",width:ue,top:"".concat(Pe+10,"px ")}},variant:fe,anchor:"right",open:de,children:[(0,B.jsx)(d.Z,{sx:{display:"flex",justifyContent:"flex-end",padding:1},children:(0,B.jsx)(Y.ZP,{onClick:()=>{xe(!1)},variant:"soft",children:"rtl"===T.direction?(0,B.jsx)(o.Z,{}):(0,B.jsx)(i.Z,{})})}),(0,B.jsx)(d.Z,{className:K.drawerBody,children:(0,B.jsx)(d.Z,{className:K.drawerFieldContainer,children:(0,B.jsxs)(l.ZP,{container:!0,maxHeight:"80dvh",overflow:"auto",rowSpacing:3,children:[(0,B.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,B.jsx)(j.Z,{className:K.drawerTextTitle,children:P("take_exam_question_navigation_title")}),(0,B.jsx)(X.Z,{title:P("take_exam_question_name"),fontSize:"13px",fontWeight:"500"}),(0,B.jsx)(m.Z,{fullWidth:!0,size:"small",options:U.filter((e=>0===ve.length||ve.includes(e.questionData.qtype))),getOptionLabel:e=>e.questionData.name?"".concat(e.questionData.name):"",sx:{marginBottom:"16px",borderRadius:"12px","& .MuiOutlinedInput-root":{borderRadius:"12px"}},renderInput:e=>(0,B.jsx)(p.Z,{...e,placeholder:"Nh\u1eadp c\xe2u h\u1ecfi",size:"small",sx:{borderRadius:"12px"}}),isOptionEqualToValue:(e,t)=>e.questionData.name===t.questionData.name}),(0,B.jsx)(X.Z,{title:P("take_exam_question_sort_question"),fontSize:"13px",fontWeight:"500"}),(0,B.jsx)(m.Z,{disablePortal:!0,fullWidth:!0,multiple:!0,size:"small",limitTags:2,options:[{label:P("common_question_type_essay")},{label:P("common_question_type_multi_choice")},{label:P("common_question_type_yes_no")},{label:P("common_question_type_short")}],renderInput:e=>(0,B.jsx)(p.Z,{...e,sx:{borderRadius:"12px"},InputLabelProps:{shrink:!0}}),sx:{marginBottom:"16px",borderRadius:"12px","& .MuiOutlinedInput-root":{borderRadius:"12px"}},onChange:(e,t)=>{if(0===t.length)je([]);else{const e=t.map((e=>e.label===P("common_question_type_essay")?S.Z.essay.code:e.label===P("common_question_type_multi_choice")?S.Z.multiple_choice.code:e.label===P("common_question_type_yes_no")?S.Z.true_false.code:e.label===P("common_question_type_short")?S.Z.short_answer.code:""));je(e)}Ae(!0)},isOptionEqualToValue:(e,t)=>e.label===t.label}),(0,B.jsxs)(h.Z,{direction:"row",spacing:1,marginBottom:"16px",children:[(0,B.jsx)(X.Z,{title:P("common_flagged_question"),fontSize:"13px",fontWeight:"500"}),(0,B.jsx)(Q.Z,{onChange:e=>{_e(e.target.checked)}})]}),(0,B.jsx)(l.ZP,{container:!0,spacing:1,marginBottom:"10px",sx:{maxHeight:"30dvh"},children:U.filter((e=>(0===ve.length||ve.includes(e.questionData.qtype))&&(!Ze||e.flag))).map(((t,o)=>(0,B.jsx)(l.ZP,{item:!0,marginTop:"16px",marginRight:"8px",children:(0,B.jsx)(ee.Z,{color:"neutral",variant:"outlined",badgeContent:t.questionData.qtype===S.Z.essay.code?(0,B.jsx)(r.Z,{sx:{width:"15px",height:"15px"}}):t.questionData.qtype===S.Z.short_answer.code?(0,B.jsx)(oe.Z,{sx:{width:"15px",height:"15px"}}):t.questionData.qtype===S.Z.true_false.code?(0,B.jsx)(ne.Z,{sx:{width:"15px",height:"15px"}}):(0,B.jsx)(s.Z,{sx:{width:"15px",height:"15px"}}),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,B.jsx)(ee.Z,{color:"neutral",variant:"outlined",badgeContent:(0,B.jsx)(a.Z,{sx:{width:"10px",height:"15px",color:"red"}}),anchorOrigin:{vertical:"top",horizontal:"right"},invisible:!t.flag,children:(0,B.jsx)(k.Z,{variant:"outlined",sx:{border:R.some((e=>e.data.question.id===t.questionData.id))?"2px solid #002db3":"2px solid #e1e1e1",borderRadius:"1000px",width:"40px",height:"40px",backgroundColor:t.answered?"#e1e1e1":""},color:R.some((e=>e.data.question.id===t.questionData.id))?"primary":"neutral",onClick:()=>(t=>{var o;const i=null===(o=U.find((e=>e.questionData.id===t)))||void 0===o?void 0:o.questionData.page,a=me(t);if(i===W){const e=document.getElementById(a);null===e||void 0===e||e.scrollIntoView({behavior:"smooth"})}else C("".concat(b._.student.exam.take.replace(":courseId",null!==n&&void 0!==n?n:O.courseId).replace(":examId",null!==e&&void 0!==e?e:O.id),"?page=").concat(i,"#").concat(a),{replace:!0})})(t.questionData.id),children:U.findIndex((e=>e.questionData.id===t.questionData.id))+1})})})},o)))})]}),(0,B.jsx)(l.ZP,{item:!0,xs:12,children:(0,B.jsx)(l.ZP,{container:!0,spacing:1,children:(0,B.jsx)(l.ZP,{item:!0,justifyContent:"center",xs:12,children:(0,B.jsx)(k.Z,{onClick:Fe,variant:"soft",color:"primary",fullWidth:!0,children:"K\u1ebft th\xfac b\xe0i l\xe0m..."})})})})]})})})]})]})]})})}function me(e){const t=Array.from((0,ae.Z)(e));return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}}}]);