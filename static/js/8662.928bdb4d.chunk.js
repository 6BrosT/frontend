"use strict";(self.webpackChunkfrontend_app=self.webpackChunkfrontend_app||[]).push([[8662],{48662:(e,t,o)=>{o.r(t),o.d(t,{default:()=>T});var n=o(47313),s=o(79536);const l={root:"styles_root__v2ejl",container:"styles_container__lMgDs",tabWrapper:"styles_tabWrapper__npC8m",stickyBack:"styles_stickyBack__1A+tu",backButton:"styles_backButton__gLJ3k",backIcon:"styles_backIcon__Dh4wx",titleInput:"styles_titleInput__C-hK8",content:"styles_content__afdkJ",actionBtn:"styles_actionBtn__19qs0",postBtn:"styles_postBtn__gQKer",cancelBtn:"styles_cancelBtn__37BGw",markdownEditor:"styles_markdownEditor__Mf3VP","w-md-editor-toolbar":"styles_w-md-editor-toolbar__YI3Ly",breadCump:"styles_breadCump__FSlJl"};var a=o(47825),i=o(9019),r=o(90200),d=o(58467),c=o(19536),u=o(88797),m=o(49914),p=o(66212),h=o(51405),_=o(16783),f=o(85281),x=o(33223),g=o(19187),k=o(14647),b=o(47477),v=o(75590),y=o(51928),j=o(21933),Z=o(75627),I=o(62563),w=o(74654),B=o.n(w),S=o(60191),C=o(46417);function T(){const e=j.Ry().shape({solution:j.Z_().required("Solution is required").test("not-blank","Solution is required",(e=>void 0!==e&&e.trim().length>0)),title:j.Z_().required("title is required").test("not-blank","title is required",(e=>void 0!==e&&e.trim().length>0))}),{register:t,handleSubmit:o,watch:w,control:T,formState:{errors:N}}=(0,Z.cI)({resolver:(0,I.X)(e)}),{t:E}=(0,v.$G)(),P=(0,d.s0)(),{state:q}=(0,d.TH)(),L=q?q.sourceCode:void 0,M=q?q.title:void 0,H=q?q.content:void 0,V=q?q.tags:void 0,W=q?q.solutionId:void 0,J=q?q.edit:void 0,z=(0,n.useRef)(null),{height:A}=(0,b.Z)({ref:z}),D=(0,y.C)((e=>e.algorithmnTag)),G=B()(D.tagList).sort(((e,t)=>e.name<t.name?1:e.name===t.name?0:-1)),K=new Map;G.forEach((e=>K.set(e.id,e.name)));const[Q,R]=n.useState([]),[U,Y]=n.useState(!1),F={PaperProps:{style:{maxHeight:224,width:250}}};(0,n.useEffect)((()=>{V&&R(V.map((e=>e.id)))}),[V]);const{problemId:O,courseId:X,lessonId:$}=(0,d.UO)(),ee=null!==H&&void 0!==H?H:"**Your solution**\n  ".concat(L?"```\n".concat(L,"\n```"):"","\n  ");return(0,C.jsxs)(i.ZP,{className:l.root,children:[(0,C.jsx)(r.Z,{ref:z}),(0,C.jsxs)(a.Z,{className:l.container,style:{marginTop:"".concat(A,"px"),height:"calc(100% - ".concat(A,"px)")},children:[(0,C.jsx)(s.Z,{className:l.stickyBack,onClick:()=>{P(-1)},children:(0,C.jsxs)(s.Z,{className:l.backButton,children:[(0,C.jsx)(k.Z,{className:l.backIcon}),(0,C.jsx)("span",{"translation-key":"common_back",children:E("common_back")})]})}),(0,C.jsx)(c.Z,{}),(0,C.jsx)(u.Z,{labelId:"demo-multiple-chip-label",id:"demo-multiple-chip",multiple:!0,value:Q,onChange:e=>{const{target:{value:t}}=e;"string"!==typeof t&&R(t)},input:(0,C.jsx)(m.Z,{id:"select-multiple-chip",label:"Chip"}),renderValue:e=>(0,C.jsx)(s.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{var t;return(0,C.jsx)(p.Z,{label:null!==(t=K.get(e))&&void 0!==t?t:""},e)}))}),MenuProps:F,children:G.map((e=>(0,C.jsx)(h.Z,{value:e.id,children:e.name},e.id)))}),(0,C.jsx)("form",{onSubmit:o((e=>{if(void 0!==O)if(Y(!0),J)if(W){const{addedTagId:t,removedTagIds:o}=(()=>{if(void 0===V||0===V.length)return{addedTagId:Q,removedTagIds:[]};{const e=new Set;V.forEach((t=>e.add(t.id)));const t=new Set;Q.forEach((e=>t.add(e)));let o=[],n=[];return V.forEach((e=>{t.has(e.id)||n.push(e.id)})),Q.forEach((t=>{e.has(t)||o.push(t)})),{addedTagId:o,removedTagIds:n}}})();S.T.editSharedSolution(W,e.solution,e.title,o,t).then((e=>{console.log("solution ",e),P(-1)})).catch((e=>{console.log(e),Y(!1)}))}else Y(!1);else S.T.createSharedSolution(O,e.title,e.solution,Q).then((e=>{console.log("solution ",e),P(-1)})).catch((e=>{console.log(e),Y(!1)}))})),children:(0,C.jsxs)(s.Z,{className:l.content,children:[(0,C.jsx)(_.Z,{...t("title"),defaultValue:null!==M&&void 0!==M?M:"",id:"outlined-multiline-static",multiline:!0,rows:2,variant:"standard",InputProps:{disableUnderline:!0,style:{fontSize:"20px"}},placeholder:E("common_title"),"translation-key":"common_title",fullWidth:!0,InputLabelProps:{shrink:!1},className:l.titleInput}),(0,C.jsx)(s.Z,{className:l.actionBtn,children:(0,C.jsx)(x.Z,{variant:"contained",className:l.postBtn,"translation-key":"common_post common_edit",type:"submit",disabled:U,children:U?(0,C.jsx)(f.Z,{sx:{color:"white"}}):E(J?"common_edit":"common_post")})}),(0,C.jsx)(s.Z,{"data-color-mode":"light",children:(0,C.jsx)(Z.Qr,{control:T,name:"solution",defaultValue:ee,render:e=>{let{field:{...t}}=e;return(0,C.jsx)(g.ZP,{...t,className:l.markdownEditor})}})})]})})]})]})}},14647:(e,t,o)=>{var n=o(64836);t.Z=void 0;var s=n(o(45045)),l=o(46417);t.Z=(0,s.default)((0,l.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")}}]);