"use strict";(self.webpackChunkfrontend_app=self.webpackChunkfrontend_app||[]).push([[7844],{96743:(e,n,s)=>{s.d(n,{Z:()=>p});var i=s(79536),t=s(66212),l=s(1550),a=s(15103),r=s(51405),o=s(49914),d=s(88797),c=s(47313);const u="styles_container__Lu+Ak",m="styles_formWrapperContainer__9YqpE",h="styles_selectedChip__dhVt2";var g=s(46417);const _={PaperProps:{style:{maxHeight:224}}},p=e=>{const[n,s]=(0,c.useState)(e.filterList);return(0,g.jsx)("div",{className:u,children:(0,g.jsxs)(l.Z,{className:m,children:[(0,g.jsx)(a.Z,{id:"multipleChipLabel",children:e.label}),(0,g.jsx)(d.Z,{style:{backgroundColor:e.backgroundColor||"white"},id:"multipleChip",labelId:"demo-multipleChipLabel-chip-label",multiple:!0,value:n,onChange:n=>{const{target:{value:i}}=n;s("string"===typeof i?i.split(","):i),e.onFilterListChangeHandler("string"===typeof i?i.split(","):i)},input:(0,g.jsx)(o.Z,{id:"selectMultipleChip",label:e.label}),renderValue:e=>(0,g.jsx)(i.Z,{className:h,children:e.map((e=>(0,g.jsx)(t.Z,{label:e},e)))}),MenuProps:_,fullWidth:!0,readOnly:e.readOnly,children:e.defaultChipList.map((e=>(0,g.jsx)(r.Z,{value:e,children:e},e)))})]})})}},32952:(e,n,s)=>{s.d(n,{Z:()=>m});s(47313);var i=s(79536),t=s(6306),l=s(54045),a=s(99249),r=s(75975),o=s(78925),d=s(23885),c=s(75590),u=s(46417);function m(e){let{files:n=[],treeView:s=!0}=e;const{t:m,i18n:h}=(0,c.$G)(),g=async e=>{if(void 0===e)return;const s=n.find((n=>n.id===e));if(s)if(s.downloadUrl){const e=await fetch(s.downloadUrl),n=await e.blob();(0,o.saveAs)(n,s.name)}else console.error("File not found")};function _(e,n){const s=new Date(e);if(isNaN(s.getTime()))throw new Error("Invalid timestamp");const i={en:{AM:"AM",PM:"PM"},vi:{AM:"SA",PM:"CH"}},t=s.getUTCDate(),l={en:["January","February","March","April","May","June","July","August","September","October","November","December"],vi:["Th\xe1ng M\u1ed9t","Th\xe1ng Hai","Th\xe1ng Ba","Th\xe1ng T\u01b0","Th\xe1ng N\u0103m","Th\xe1ng S\xe1u","Th\xe1ng B\u1ea3y","Th\xe1ng T\xe1m","Th\xe1ng Ch\xedn","Th\xe1ng M\u01b0\u1eddi","Th\xe1ng M\u01b0\u1eddi M\u1ed9t","Th\xe1ng M\u01b0\u1eddi Hai"]}[n][s.getUTCMonth()],a=s.getUTCFullYear();let r=s.getUTCHours();const o=s.getUTCMinutes(),d=r>=12?i[n].PM:i[n].AM;r%=12,r=r||12;const c=o<10?"0"+o:o.toString();return"".concat(t," ").concat(l," ").concat(a,", ").concat(r,":").concat(c," ").concat(d)}return(0,u.jsx)(i.Z,{sx:{flexGrow:1},children:s?(0,u.jsx)(a.L,{"aria-label":"file system navigator",defaultCollapseIcon:(0,u.jsx)(t.Z,{}),defaultExpandIcon:(0,u.jsx)(l.Z,{}),children:0!==n.length&&(0,u.jsx)(r.k,{nodeId:"root",label:"Files",children:n.map(((e,n)=>(0,u.jsx)("div",{className:"thumbnail",children:(0,u.jsx)("a",{href:e.downloadUrl,style:{display:"block",wordBreak:"break-word",whiteSpace:"normal"},onClick:n=>{n.preventDefault(),g(e.id)},children:e.name},e.id)},n)))})}):(0,u.jsx)("div",{className:"thumbnail",children:n.map(((e,n)=>(0,u.jsxs)("div",{style:{display:"flex",gap:"15px"},children:[(0,u.jsx)("a",{href:e.downloadUrl,style:{display:"block",wordBreak:"break-word",whiteSpace:"normal",width:"50%"},onClick:n=>{n.preventDefault(),g(e.id)},children:e.name},e.id),(0,u.jsx)("p",{children:_(e.file.lastModified,"en"===d.ZP.language?"en":"vi")})]})))})})}},77844:(e,n,s)=>{s.r(n),s.d(n,{default:()=>T});var i=s(9019),t=s(79536),l=s(85281),a=s(47825),r=s(33223),o=s(19860),d=s(90200),c=s(96743),u=s(16977),m=s(37735),h=s(92556),g=s(80007),_=s(99221),p=s(47313),f=s(58467),x=s(38556);const b={root:"styles_root__kbPeq",container:"styles_container__Lbkiq",mainContent:"styles_mainContent__vSLXd",formBody:"styles_formBody__xr1lk",drawerBody:"styles_drawerBody__-SHxX",drawerFieldContainer:"styles_drawerFieldContainer__uAvPX",breadcumpWrapper:"styles_breadcumpWrapper__Pd1sy",icArrow:"styles_icArrow__VyZc0",cursorPointer:"styles_cursorPointer__S4KS2",contentContainer:"styles_contentContainer__2f8oO",gradeContainer:"styles_gradeContainer__EvlOf",stickyBottom:"styles_stickyBottom__m1-ko"};var y=s(90469),v=s(47477),C=s(75590),j=s(33256),Z=s(65537),k=s(75948),w=s(32952),N=s(28765),A=s(46417);function T(){var e,n,s,T,S,M,L,I,F;const{t:P}=(0,C.$G)(),{width:B}=(0,x.Z)(),U=(0,f.s0)(),[H,D]=((0,o.Z)(),p.useState(!0)),[E,O]=p.useState(["T\u1ef1 lu\u1eadn","N\u1ed9p t\u1ec7p"]),[G,V]=p.useState(""),[W,q]=p.useState(""),{courseId:J,assignmentId:K,submissionId:X}=(0,f.UO)(),[z,Y]=p.useState(null!==(e=null===X||void 0===X?void 0:X.toString())&&void 0!==e?e:""),$=(0,Z.v9)((e=>e.submissionAssignment)),Q=(0,Z.I0)();p.useEffect((()=>{D(!(B<1080))}),[B]);const R=p.useRef(null),{height:ee}=(0,v.Z)({ref:R}),ne=(0,p.useCallback)((async e=>{Q((0,k.K4)(!0));try{const n=await j.J.getSubmissionAssignmentByAssignmentId(e);Q((0,k.q5)(n))}catch(n){console.error("Failed to fetch submission assignment",n)}finally{Q((0,k.K4)(!1))}}),[Q]);return(0,p.useEffect)((()=>{K&&ne(K)}),[K,ne]),(0,p.useEffect)((()=>{z&&U(y._.lecturer.assignment.grading.replace(":assignmentId",null!==K&&void 0!==K?K:"").replace(":courseId",null!==J&&void 0!==J?J:"").replace(":submissionId",z))}),[z,K,J,U]),(0,p.useEffect)((()=>{if($.submissionAssignments){var e,n,s,i;const t=null!==(e=null===(n=$.submissionAssignments.find((e=>e.id===z)))||void 0===n?void 0:n.grade)&&void 0!==e?e:-1;V(-1===t?"":t.toString()),q(null!==(s=null===(i=$.submissionAssignments.find((e=>e.id===z)))||void 0===i?void 0:i.content)&&void 0!==s?s:"")}}),[$.submissionAssignments,z]),(0,A.jsxs)(i.ZP,{className:b.root,children:[(0,A.jsx)(d.Z,{ref:R}),$.isLoading?(0,A.jsx)(t.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:"10px"},children:(0,A.jsx)(l.Z,{})}):(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(t.Z,{className:b.contentContainer,sx:{marginTop:"".concat(ee,"px")},children:[(0,A.jsx)(a.Z,{sx:{padding:"0",display:"flex",justifyContent:"flex-start"},children:(0,A.jsx)(N.Z,{breadCrumbData:[{navLink:y._.lecturer.course.management,label:"Qu\u1ea3n l\xfd kho\xe1 h\u1ecdc"},{navLink:y._.lecturer.course.information.replace(":courseId",null!==J&&void 0!==J?J:""),label:"CS202 - Nh\u1eadp m\xf4n l\u1eadp tr\xecnh"},{navLink:y._.lecturer.course.assignment.replace(":courseId",null!==J&&void 0!==J?J:""),label:"Danh s\xe1ch b\xe0i t\u1eadp"},{navLink:y._.lecturer.assignment.detail.replace(":assignmentId",null!==K&&void 0!==K?K:"").replace(":courseId",null!==J&&void 0!==J?J:""),label:null===(n=$.submissionAssignments[0])||void 0===n?void 0:n.assignmentName}],lastBreadCrumbLabel:"\u0110\xe1nh gi\xe1"})})," ",(0,A.jsxs)(a.Z,{sx:{backgroundColor:"white",marginTop:"5px",height:"fit-content",padding:"16px"},className:b.gradeContainer,children:[(0,A.jsx)(_.Z,{"translation-key":"common_student",children:P("common_student")}),(0,A.jsx)(m.Z,{labelId:"select-assignment-submission-student-label",value:z,onHandleChange:e=>Y(e),items:$.submissionAssignments.map((e=>({value:e.id,label:e.user.fullName,customNode:(0,A.jsxs)(t.Z,{children:[(0,A.jsx)(_.Z,{fontWeight:"500",children:e.user.fullName}),(0,A.jsx)(g.Z,{colorname:"--gray-500",children:e.user.email})]})}))),backgroundColor:"var(--gray-2)"}),(0,A.jsxs)(t.Z,{className:b.drawerFieldContainer,children:[(0,A.jsx)(_.Z,{"translation-key":"course_lecturer_grading_assignment_type",children:P("course_lecturer_grading_assignment_type")}),(0,A.jsx)(c.Z,{label:"",defaultChipList:["T\u1ef1 lu\u1eadn","N\u1ed9p t\u1ec7p"],filterList:E,onFilterListChangeHandler:O,readOnly:!0,backgroundColor:"white"})]}),(0,A.jsxs)(t.Z,{className:b.drawerFieldContainer,"translation-key":"no_data",children:[(0,A.jsx)(_.Z,{"translation-key":"course_lecturer_submission_online_text",children:P("course_lecturer_submission_online_text")}),(0,A.jsx)("div",{dangerouslySetInnerHTML:{__html:null!==(s=null===(T=$.submissionAssignments.find((e=>e.id===z)))||void 0===T||null===(S=T.submissionAssignmentOnlineText)||void 0===S?void 0:S.content)&&void 0!==s?s:'<span style="color: red;">'.concat(P("no_data"),"</span>")}})]}),(0,A.jsxs)(t.Z,{className:b.drawerFieldContainer,"translation-key":"no_data",children:[(0,A.jsx)(_.Z,{"translation-key":"course_lecturer_submission_file",children:P("course_lecturer_submission_file")}),null!==(M=$.submissionAssignments.find((e=>e.id===z)))&&void 0!==M&&M.submissionAssignmentFiles?(0,A.jsx)(w.Z,{files:null!==(L=null===(I=$.submissionAssignments.find((e=>e.id===z)))||void 0===I||null===(F=I.submissionAssignmentFiles)||void 0===F?void 0:F.map((e=>({id:e.id,name:e.fileName,downloadUrl:e.fileUrl,size:e.fileSize,type:e.mimetype,lastModified:new Date(e.timemodified).toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"})}))))&&void 0!==L?L:[],treeView:!1}):(0,A.jsx)("span",{style:{color:"red"},children:P("no_data")})]}),(0,A.jsxs)(t.Z,{className:b.drawerFieldContainer,children:[(0,A.jsx)(_.Z,{"translation-key":"course_lecturer_score_on_range",children:P("course_lecturer_score_on_range",{range:100})}),(0,A.jsx)(u.Z,{type:"number",value:G,onChange:e=>V(e.target.value),placeholder:"Nh\u1eadp \u0111i\u1ec3m t\u1ed1i \u0111a",backgroundColor:"white"})]}),(0,A.jsxs)(t.Z,{className:b.feedbackContainer,children:[(0,A.jsx)(_.Z,{"translation-key":"course_lecturer_grade_comment",children:P("course_lecturer_grade_comment")}),(0,A.jsx)(t.Z,{className:b.textEditor,children:(0,A.jsx)(h.Z,{style:{marginTop:"10px",height:"300px"},value:W,onChange:q})})]})]})]})}),(0,A.jsx)(t.Z,{className:b.stickyBottom,children:(0,A.jsx)(r.Z,{variant:"contained",color:"primary",className:b.btnGrade,onClick:()=>{console.log("Grade")},children:"L\u01b0u thay \u0111\u1ed5i"})})]})}}}]);