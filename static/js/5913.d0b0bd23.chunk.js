"use strict";(self.webpackChunkfrontend_app=self.webpackChunkfrontend_app||[]).push([[5913],{27013:(e,t,n)=>{n.d(t,{N:()=>s,Z:()=>c});n(47313);var o=n(42832),r=n(86138),i=n(99881),a=n(46417);let s=function(e){return e.Success="success",e.INFO="info",e.Warning="warning",e.Error="error",e}({});function c(e){let{open:t,setOpen:n,content:s,type:c,anchorOrigin:d}=e;const l=e=>{"clickaway"!==e&&n(!1)},x="right";return(0,a.jsx)(o.Z,{spacing:2,sx:{width:"100%"},children:(0,a.jsx)(r.Z,{open:t,autoHideDuration:3e3,onClose:l,anchorOrigin:d||{vertical:"top",horizontal:x},children:(0,a.jsx)(i.Z,{onClose:l,severity:c,children:s})},"top"+x)})}},45913:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var o=n(90200);const r="styles_root__eS-7P",i="styles_container__sFK6V",a="styles_formBody__-9+g9",s="styles_drawerBody__Hon04",c="styles_drawerFieldContainer__Ko6dW",d="styles_drawerTextTitle__-M6ad";var l=n(9019),x=n(79536),m=n(62481),h=n(46923),p=n(19860),u=n(66565),g=n(47313),f=n(47477),j=n(47056),_=n(38556),Z=n(31845),y=n(33060),b=n(89790),w=n(54045),v=n(58467),S=n(75590),k=n(90469),I=n(88999),C=n(91861),D=n(99221),E=n(51928),q=n(40309),O=n(78832),T=n(70058),z=n(38515),N=n(42766),R=n(1065),A=n(83703),F=n(80007),H=n(28538),M=n(62968),P=n(70816),W=n.n(P),B=n(74512),L=n(8344),U=n(65537),K=n(4271),Y=n(27013),$=n(90182),G=n(46417);const V=()=>{const e=(0,U.I0)(),t=(0,v.UO)().examId,n=(0,E.C)((e=>e.takeExam.examId)),P=(0,E.C)((e=>e.takeExam.startAt)),V=(0,E.C)((e=>e.takeExam.examData)),J=new Date(V.timeClose),[Q,X]=g.useState(!1),[ee,te]=g.useState(""),[ne,oe]=g.useState(Y.N.Success),re=(0,v.UO)().courseId,ie=(0,p.Z)(),ae=(0,v.s0)(),{t:se}=(0,S.$G)(),[ce,de]=g.useState((()=>{if(!P)return 0;return new Date(P).getTime()+1e3*((null===V||void 0===V?void 0:V.timeLimit)||0)})),[le,xe]=g.useState(0),me=g.useRef(null),{height:he}=(0,f.Z)({ref:me}),[pe,ue]=g.useState(!0),{width:ge}=(0,_.Z)(),[fe,je]=g.useState(ge<1080?"temporary":"permanent");g.useEffect((()=>{je(ge<1080?"temporary":"persistent")}),[ge]);const[_e,Ze]=g.useState(0),[ye,be]=g.useState(0),[we,ve]=g.useState(0);g.useEffect((()=>{const e=setInterval((()=>(e=>{if(!e)return;const n=W()(e).diff(W()().utc(),"milliseconds");xe(n),n<0?""!==V.id&&"AUTOSUBMIT"===V.overdueHanding?Ee():ae(k._.student.exam.detail.replace(":courseId",re||V.courseId).replace(":examId",t||V.id),{replace:!0}):(Ze(Math.floor(n/36e5%24)),be(Math.floor(n/1e3/60%60)),ve(Math.floor(n/1e3%60)))})(ce)),1e3);return()=>clearInterval(e)}),[ce]),g.useEffect((()=>{""===V.id&&ae(k._.student.exam.detail.replace(":courseId",re||V.courseId).replace(":examId",t||V.id),{replace:!0})}),[]);const Se=(0,E.C)((e=>e.takeExam.questionList)),ke=e=>{const n=(0,M.Z)(e.questionData.id);re&&t&&ae("".concat(k._.student.exam.take.replace(":courseId",re).replace(":examId",t),"?page=").concat(e.questionData.page,"#").concat(n))},[Ie,Ce]=g.useState(!0),De=[{value:se("common_question"),width:"40%"},{value:se("common_status"),width:""}],Ee=async()=>{const o=new Date((new Date).toLocaleString("en",{timeZone:"Asia/Bangkok"})).toISOString();e((0,L.K4)(!0));const r=Se.map((e=>{var t;return{questionId:e.questionData.id,content:e.content,numFile:(null===(t=e.files)||void 0===t?void 0:t.length)||0}})),i=new Date(new Date(P||"").toLocaleString("en",{timeZone:"Asia/Bangkok"})).toISOString();console.log("start at time",new Date(i));const a={examId:t||n,userId:"2d7ed5a0-fb21-4927-9a25-647c17d29668",questions:r,startTime:i,submitTime:o};B.O.submitExam(a).then((n=>{console.log("response",n),e((0,K.Yq)()),te("N\u1ed9p b\xe0i th\xe0nh c\xf4ng"),oe(Y.N.Success),X(!0),ae(k._.student.exam.review.replace(":courseId",re||V.courseId).replace(":examId",t||V.id).replace(":submissionId",n.examSubmissionId),{replace:!0})})).catch((e=>{te("N\u1ed9p b\xe0i th\u1ea5t b\u1ea1i"),oe(Y.N.Error),X(!0)})).finally((()=>{e((0,L.K4)(!1))}))},qe=[se("common_january"),se("common_february"),se("common_march"),se("common_april"),se("common_may"),se("common_june"),se("common_july"),se("common_august"),se("common_september"),se("common_october"),se("common_november"),se("common_december")],Oe=[se("common_sunday"),se("common_monday"),se("common_tuesday"),se("common_wednesday"),se("common_thursday"),se("common_friday"),se("common_saturday")];return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)($.q,{children:(0,G.jsxs)("title",{children:[se("exam_summary")," | ",V.name]})}),(0,G.jsxs)(l.ZP,{className:r,children:[(0,G.jsx)(Y.Z,{open:Q,setOpen:X,content:ee,type:ne,anchorOrigin:{vertical:"bottom",horizontal:"left"}}),(0,G.jsx)(o.Z,{ref:me}),(0,G.jsxs)(x.Z,{className:i,style:{marginTop:"".concat(he,"px")},children:[(0,G.jsx)(m.ZP,{}),(0,G.jsx)(u.Z,{onClick:()=>{ue(!0)},sx:{...pe&&{display:"none"},position:"fixed",top:"".concat(he+10,"px"),right:0,height:"44px",width:"49px"},size:"sm",endDecorator:(0,G.jsx)(j.Z,{color:"action"}),variant:"soft"}),(0,G.jsxs)(x.Z,{className:a,width:"100%",children:[(0,G.jsx)(Z.Z,{fontWeight:"500",children:V.name}),(0,G.jsx)(y.Z,{children:(0,G.jsx)("div",{dangerouslySetInnerHTML:{__html:V.intro}})}),(0,G.jsx)(u.Z,{onClick:()=>{re&&t&&ae(k._.student.exam.take.replace(":courseId",re).replace(":examId",t))},startDecorator:(0,G.jsx)(b.Z,{fontSize:"small"}),color:"neutral",variant:"soft",size:"md",sx:{width:"fit-content"},children:se("common_back")}),(0,G.jsx)(x.Z,{sx:{position:"sticky",top:"74px",zIndex:"1020"},children:(0,G.jsx)(x.Z,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:(0,G.jsxs)(x.Z,{sx:{padding:"8px 9px 8px 10px",borderRadius:"40px",display:"flex",alignItems:"center",color:"#005742",backgroundColor:"#EAF4DD",fontWeight:"500",position:"sticky",top:"0"},children:[(0,G.jsx)(I.Z,{fontSize:"medium",sx:{marginRight:"0.5rem !important"}}),Ie?"C\xf2n l\u1ea1i: ".concat(_e<10?"0".concat(_e):_e,":").concat(ye<10?"0".concat(ye):ye,":").concat(we<10?"0".concat(we):we):"Th\u1eddi gian c\xf2n l\u1ea1i",(0,G.jsx)(u.Z,{onClick:()=>{Ce(!Ie)},variant:"soft",color:"neutral",sx:{borderRadius:"40px",marginLeft:"16px",border:"1px solid #bce3da"},children:Ie?"\u1ea8n":"Hi\u1ec7n"})]})})}),(0,G.jsxs)(x.Z,{sx:{borderRadius:"5px",border:"1px solid #E1E1E1",padding:"20px"},children:[(0,G.jsx)(D.Z,{children:se("exam_summary")}),(0,G.jsxs)(A.Z,{size:"lg",hoverRow:!0,sx:{"& tbody tr:hover":{backgroundColor:"#f3f3f3",cursor:"pointer"}},children:[(0,G.jsx)("thead",{children:(0,G.jsx)("tr",{children:De.map(((e,t)=>(0,G.jsx)("th",{style:{width:e.width,backgroundColor:"white",borderBottom:"2px solid rgb(128,128,128)"},children:(0,G.jsx)(F.Z,{fontSize:"12px",color:"#525151",fontWeight:"500",children:e.value})},t)))})}),(0,G.jsx)("tbody",{children:Se.map(((e,t)=>(0,G.jsxs)("tr",{onClick:()=>ke(e),children:[(0,G.jsx)("td",{children:(0,G.jsx)(x.Z,{sx:{backgroundColor:"#EAF4DD",borderRadius:"16px",width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #e8e0e0"},children:(0,G.jsx)(F.Z,{fontSize:"12px",color:"#212121",fontWeight:"400",children:t+1})})}),(0,G.jsx)("td",{children:(0,G.jsx)(H.Z,{sx:{backgroundColor:e.answered?"#FDF6EA":"#e6eaf7",borderRadius:"4px",border:"1px solid #e8e0e0"},children:(0,G.jsx)(F.Z,{fontSize:"14px",color:"#212121",fontWeight:"400",children:e.answered?se("common_answered"):se("common_not_answered")})})})]},t)))})]})]}),(0,G.jsx)(F.Z,{marginTop:"20px",fontSize:"14px",color:"#212121",fontWeight:"400",children:se("submit_before",{weekDay:Oe[J.getDay()],day:J.getDate(),month:qe[J.getMonth()],year:J.getFullYear(),time:"".concat(J.getHours()<10?"0".concat(J.getHours()):J.getHours(),":").concat(J.getMinutes()<10?"0".concat(J.getMinutes()):J.getMinutes())})}),(0,G.jsx)(u.Z,{sx:{width:"fit-content"},onClick:Ee,children:se("exam_submit_and_finish")})]}),(0,G.jsxs)(h.ZP,{sx:{display:pe?"block":"none",width:370,flexShrink:0,"& .MuiDrawer-paper":{borderTop:"1px solid #E1E1E1",borderRadius:"12px 0px",width:370,top:"".concat(he+10,"px ")}},variant:fe,anchor:"right",open:pe,children:[(0,G.jsx)(x.Z,{sx:{display:"flex",justifyContent:"flex-end",padding:1},children:(0,G.jsx)(C.ZP,{onClick:()=>{ue(!1)},variant:"soft",children:"rtl"===ie.direction?(0,G.jsx)(b.Z,{}):(0,G.jsx)(w.Z,{})})}),(0,G.jsx)(x.Z,{className:s,children:(0,G.jsx)(x.Z,{className:c,children:(0,G.jsx)(l.ZP,{container:!0,maxHeight:"80dvh",overflow:"auto",rowSpacing:3,children:(0,G.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,G.jsx)(D.Z,{className:d,children:se("take_exam_question_navigation_title")}),(0,G.jsx)(l.ZP,{container:!0,spacing:1,marginBottom:"10px",sx:{maxHeight:"30dvh"},children:Se.map(((e,t)=>(0,G.jsx)(l.ZP,{item:!0,marginTop:"16px",marginRight:"8px",children:(0,G.jsx)(q.Z,{color:"neutral",variant:"outlined",badgeContent:"ESSAY"===e.questionData.qtype?(0,G.jsx)(O.Z,{sx:{width:"15px",height:"15px"}}):"SHORT_ANSWER"===e.questionData.qtype?(0,G.jsx)(z.Z,{sx:{width:"15px",height:"15px"}}):"TRUE_FALSE"===e.questionData.qtype?(0,G.jsx)(T.Z,{sx:{width:"15px",height:"15px"}}):(0,G.jsx)(N.Z,{sx:{width:"15px",height:"15px"}}),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,G.jsx)(q.Z,{color:"neutral",variant:"outlined",badgeContent:(0,G.jsx)(R.Z,{sx:{width:"10px",height:"15px",color:"red"}}),anchorOrigin:{vertical:"top",horizontal:"right"},invisible:!e.flag,children:(0,G.jsx)(u.Z,{variant:"outlined",sx:{borderRadius:"1000px",width:"40px",height:"40px",backgroundColor:e.answered?"#e1e1e1":""},onClick:()=>ke(e),children:Se.findIndex((t=>t.questionData.id===e.questionData.id))+1})})})},t)))})]})})})})]})]})]})]})}},62968:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(37222);function r(e){const t=Array.from((0,o.Z)(e));return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}}}]);