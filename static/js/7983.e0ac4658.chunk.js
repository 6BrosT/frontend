"use strict";(self.webpackChunkfrontend_app=self.webpackChunkfrontend_app||[]).push([[7983],{85774:(e,t,o)=>{o.d(t,{Z:()=>u});var n=o(95720),i=o(78925),s=o(16031),a=o(47313),r=o(75590),l=o(65537),d=o(39392),c=o(46417);function u(e){const{maxFiles:t,maxFileSize:o,accept:s,stopAutoUpload:u,disableDownload:x,relatedDispatch:p,relatedRemoveDispatch:h,relatedId:f,filesFromUrl:g,relatedRemoveAllDispatch:v}=e,{t:_}=(0,r.$G)(),j=(0,l.I0)(),[Z,q]=a.useState([]),[y,w]=a.useState(void 0),[b,S]=a.useState(void 0),I=e=>{var t;let o=null===(t=Z.find((t=>t.id===e)))||void 0===t?void 0:t.downloadUrl;j(h({id:f,fileUrl:o})),q(Z.filter((t=>t.id!==e)))},D=e=>{w(e)},C=e=>{S(e)},k=e=>{q(Z.map((t=>t.id===e?{...t,uploadStatus:"aborted"}:{...t})))},z=e=>{q(Z.map((t=>t.id===e?{...t,uploadStatus:void 0}:{...t})))},T=async e=>{if(void 0===e)return;const t=Z.find((t=>t.id===e));if(t)if(t.downloadUrl){const e=await fetch(t.downloadUrl),o=await e.blob();(0,i.saveAs)(o,t.name)}else console.error("File not found")};return a.useEffect((()=>{const e=setInterval((function(){g&&((async()=>{const e=await Promise.all(g.map((e=>m(e.fileUrl,e.fileName))));q(e)})(),clearInterval(e))}),500)}),[]),a.useEffect((()=>{console.log("extFiles",Z)}),[Z]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.fh,{accept:s,minHeight:"195px",value:Z,maxFileSize:o||5996e4,maxFiles:-1===t?void 0:t,label:_("drag_drop_file_placeholder"),onUploadStart:e=>{console.log("advanced demo start upload",e)},onUploadFinish:e=>{console.log("advanced demo finish upload",e)},onChange:async e=>{if(0!==e.length){console.log("change to uploading",e),q(e.map((e=>"success"===e.uploadStatus?e:{...e,uploadStatus:"uploading"}))),console.log("advanced upload start",e);for(let o=0;o<e.length;o++){if("success"===e[o].uploadStatus)continue;const n=e[o].file;if(!n)throw new Error("File not found");try{let t="";console.log("file uploader file",n),t=await(0,d.S)(n),f&&j(p({id:f,fileUrl:t,fileName:e[o].name})),console.log("advanced upload success",t),q((e=>{const n=[...e];return n[o]={...n[o],uploadStatus:"success",downloadUrl:t},n}))}catch(t){console.error("advanced upload error",t),q((e=>{const n=[...e];return n[o]={...n[o],uploadStatus:"error",uploadMessage:t.message},n}))}}}else q([]),v&&j(v(f))},onClean:()=>q([]),"translation-key":["drag_drop_file_placeholder"],clickable:-1===t||void 0===t||!(void 0!==t&&Z.length>=t),children:Z.map((e=>(0,a.createElement)(n.sZ,{...e,key:e.id,onDownload:x?void 0:T,downloadUrl:x?void 0:e.downloadUrl,onDelete:I,onSee:D,onWatch:C,onAbort:k,onCancel:z,resultOnTooltip:!0,alwaysActive:!0,preview:!0,info:!0})))}),(0,c.jsx)(n.IT,{open:void 0!==y,onClose:()=>w(void 0),children:(0,c.jsx)(n.eT,{src:y})}),(0,c.jsx)(n.IT,{open:void 0!==b,onClose:()=>S(void 0),children:(0,c.jsx)(n.Fo,{src:b,autoPlay:!0,controls:!0})})]})}const m=async(e,t)=>{const o=await fetch(e,{method:"HEAD"});o.headers.get("content-type");if(!o.ok)throw new Error("HTTP error! status: ".concat(o.status));const n=await o.blob(),i=new File([n],t,{type:n.type});return{file:i,uploadStatus:"success",errors:void 0,name:t,size:i.size,type:i.type,id:"".concat(t).concat((0,s.random)(0,1e3)),downloadUrl:e}}},37983:(e,t,o)=>{o.r(t),o.d(t,{default:()=>de});var n=o(89790),i=o(54045),s=o(1065),a=o(42766),r=o(78832),l=o(9019),d=o(79536),c=o(62481),u=o(19536),m=o(46923),x=o(48623),p=o(16783),h=o(42832),f=o(19860),g=o(90200),v=o(31845),_=o(99221),j=o(47477),Z=o(38556),q=o(47313),y=o(58467),w=o(2135),b=o(90469),S=o(43750),I=o(92556),D=o(52801),C=o(65898),k=o(75590),z=o(38037),T=o(80007),P=o(15305),E=o(4271),F=o(65537),A=o(85774),R=o(16031),B=o(46417);const L=e=>{const{page:t,questionEssayQuestion:o,questionState:n}=e,i=null===n||void 0===n?void 0:n.flag,[a,r]=(0,q.useState)(""),{t:c}=(0,k.$G)(),m=(0,F.I0)(),x="archive"===o.fileTypesList?".7z, .bdoc, .cdoc, .ddoc, .gtar, .tgz, .gz, .gzip, .hqx, .rar, .sit, .tar, .zip":"document"===o.fileTypesList?".doc, .docx, .epub, .gdoc, .odt, .ott, .oth, .pdf, .rtf":"image"===o.fileTypesList?".bmp, .gif, .jpeg, .jpg, .png, .svg, .tif, .tiff":"video"===o.fileTypesList?".3g2, .3gp, .avi, .flv, .h264, .m4v, .mkv, .mov, .mp4, .mpg, .mpeg .rm .swf .vob .wmv":"audio"===o.fileTypesList?".aif, .cda, .mid, .midi, .mp3, .mpa, .ogg, .wav, .wma":"",p=o.maxBytes?o.maxBytes/1e3*1024*1024:void 0,f=(0,R.debounce)((e=>{let t=!0;""===e&&(t=!1),m((0,E.pz)({id:o.question.id,answered:t,content:e}))}),250);return(0,B.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",children:[(0,B.jsx)(z.Z,{children:"".concat(c("common_question")," ").concat(t+1)}),(0,B.jsx)(C.Z,{variant:i?"soft":"outlined",color:"primary",startDecorator:i?(0,B.jsx)(s.Z,{}):(0,B.jsx)(D.Z,{}),onClick:()=>{void 0!==i&&m((0,E.mB)({id:o.question.id,flag:!i}))},children:c(i?"common_remove_flag":"common_flag")})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",spacing:2,children:[(0,B.jsx)(d.Z,{sx:{backgroundColor:null!==n&&void 0!==n&&n.answered?"#e6eaf7":"#FDF6EA"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsx)(T.Z,{fontSize:"12px",color:"#212121",children:null!==n&&void 0!==n&&n.answered?c("common_answer_saved"):c("common_not_answered")})}),(0,B.jsx)(d.Z,{sx:{backgroundColor:"#f5f5f5"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsxs)(T.Z,{fontSize:"12px",color:"#212121",children:[c("common_score_can_achieve"),": ",o.question.defaultMark]})})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,children:(0,B.jsx)(u.Z,{})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(d.Z,{children:[(0,B.jsx)(T.Z,{sx:{padding:0,height:"fit-content"},className:"ql-editor",fontSize:"1rem",textAlign:"left",fontWeight:"400",color:"#212121",lineHeight:"1.5",dangerouslySetInnerHTML:{__html:o.question.questionText}}),(0,B.jsx)(T.Z,{fontSize:".875rem",textAlign:"left",fontWeight:"600",color:"#212121",children:c("common_answer")}),"editor"===o.responseFormat&&(0,B.jsx)(I.Z,{value:a,defaultvalue:null===n||void 0===n?void 0:n.content,onChange:e=>{r(e),f(e)},roundedBorder:!0,maxLines:o.responseFieldLines}),"plain"===o.responseFormat&&(0,B.jsx)(P.Z,{minRows:"10",maxRows:o.responseFieldLines})]})}),("no_online"===o.responseFormat||0!==o.attachments)&&(0,B.jsx)(l.ZP,{item:!0,xs:12,children:(0,B.jsx)(A.Z,{maxFileSize:p,accept:x,maxFiles:o.attachments,stopAutoUpload:!0,disableDownload:!0,relatedId:o.question.id,relatedDispatch:E.ln,relatedRemoveDispatch:E.aG,filesFromUrl:null===n||void 0===n?void 0:n.files,relatedRemoveAllDispatch:E.pE})})]})};var M=o(56623),U=o(45148),W=o(94182);const H=e=>{var t;const{t:o}=(0,k.$G)(),{page:n,questionState:i,questionMultiChoice:a}=e,r=(0,F.I0)(),c=null===i||void 0===i?void 0:i.flag,[m,x]=(0,q.useState)(null===(t=a.question.answers)||void 0===t?void 0:t.map((e=>({value:e.id,label:e.answer})))),p=e=>{let t=null===i||void 0===i?void 0:i.content.split(", ");t=t.filter((e=>""!==e&&"null"!==e)),e.target.checked?t.push(e.target.value):t=t.filter((t=>t!==e.target.value));const o=t.join(", ");r((0,E.pz)({id:a.question.id,content:o,answered:t.length>0})),console.log(t)};return(0,q.useEffect)((()=>{a.shuffleAnswers&&x(function(e){if(!e)return[];for(var t=e.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[o],e[o]=n}return e}(m))}),[]),(0,B.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",children:[(0,B.jsx)(z.Z,{children:"".concat(o("common_question")," ").concat(n+1)}),(0,B.jsx)(C.Z,{variant:c?"soft":"outlined",color:"primary",startDecorator:c?(0,B.jsx)(s.Z,{}):(0,B.jsx)(D.Z,{}),onClick:()=>{void 0!==c&&r((0,E.mB)({id:a.question.id,flag:!c}))},children:o(c?"common_remove_flag":"common_flag")})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",spacing:2,children:[(0,B.jsx)(d.Z,{sx:{backgroundColor:null!==i&&void 0!==i&&i.answered?"#e6eaf7":"#FDF6EA"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsx)(T.Z,{fontSize:"12px",color:"#212121",children:null!==i&&void 0!==i&&i.answered?o("common_answer_saved"):o("common_not_answered")})}),(0,B.jsx)(d.Z,{sx:{backgroundColor:"#f5f5f5"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsxs)(T.Z,{fontSize:"12px",color:"#212121",children:[o("common_score_can_achieve"),": ",a.question.defaultMark]})})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,children:(0,B.jsx)(u.Z,{})}),(0,B.jsxs)(l.ZP,{item:!0,xs:12,md:12,children:[(0,B.jsx)(T.Z,{sx:{padding:0,height:"fit-content"},className:"ql-editor",fontSize:"1rem",textAlign:"left",fontWeight:"400",color:"#212121",lineHeight:"1.5",dangerouslySetInnerHTML:{__html:a.question.questionText}}),Boolean(a.showStandardInstructions)&&(0,B.jsx)(T.Z,{fontSize:".875rem",textAlign:"left",fontWeight:"600",color:"#212121",children:"\n            ".concat(a.single?o("course_management_exam_preview_multichoice"):o("course_management_exam_preview_multichoice_multiple"),":")}),Boolean(a.single)?(0,B.jsx)(M.Z,{color:"primary",value:null===i||void 0===i?void 0:i.content,onChange:e=>{r((0,E.pz)({id:a.question.id,content:e,answered:!0}))},values:m,orientation:"vertical",size:"md",numbering:a.answerNumbering,fontSize:".8rem",fontWeight:"400",overlay:!0}):(0,B.jsx)(d.Z,{sx:{display:"flex",flexDirection:"column",gap:2,"& > div":{p:1,borderRadius:"12px",display:"flex"}},children:null===m||void 0===m?void 0:m.map((e=>(0,B.jsx)(U.Z,{variant:"outlined",children:(0,B.jsx)(W.Z,{onChange:p,value:e.value,checked:null===i||void 0===i?void 0:i.content.includes(e.value),size:"sm",overlay:!0,label:(0,B.jsx)(T.Z,{textAlign:"center",fontSize:".8rem",fontWeight:"400",children:e.label})})},e.value)))})]})]})},N=e=>{const{page:t,questionShortAnswer:o,questionState:n}=e,{t:i}=(0,k.$G)(),a=(0,F.I0)(),r=null===n||void 0===n?void 0:n.flag,c=(0,R.debounce)((e=>{let t=!0;""===e.target.value&&(t=!1),a((0,E.pz)({id:o.question.id,answered:t,content:e.target.value}))}),250);return(0,B.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",children:[(0,B.jsx)(z.Z,{children:"".concat(i("common_question")," ").concat(t+1)}),(0,B.jsx)(C.Z,{variant:r?"soft":"outlined",color:"primary",startDecorator:r?(0,B.jsx)(s.Z,{}):(0,B.jsx)(D.Z,{}),onClick:()=>{void 0!==r&&a((0,E.mB)({id:o.question.id,flag:!r}))},children:i(r?"common_remove_flag":"common_flag")})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",spacing:2,children:[(0,B.jsx)(d.Z,{sx:{backgroundColor:null!==n&&void 0!==n&&n.answered?"#e6eaf7":"#FDF6EA"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsx)(T.Z,{fontSize:"12px",color:"#212121",children:null!==n&&void 0!==n&&n.answered?i("common_answer_saved"):i("common_not_answered")})}),(0,B.jsx)(d.Z,{sx:{backgroundColor:"#f5f5f5"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsxs)(T.Z,{fontSize:"12px",color:"#212121",children:[i("common_score_can_achieve"),": ",o.question.defaultMark]})})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,children:(0,B.jsx)(u.Z,{})}),(0,B.jsxs)(l.ZP,{item:!0,xs:12,md:12,children:[(0,B.jsx)(T.Z,{sx:{padding:0,height:"fit-content"},className:"ql-editor",fontSize:"1rem",textAlign:"left",fontWeight:"400",color:"#212121",lineHeight:"1.5",dangerouslySetInnerHTML:{__html:o.question.questionText}}),(0,B.jsx)(T.Z,{fontSize:".875rem",textAlign:"left",fontWeight:"600",color:"#212121",children:i("common_answer")}),(0,B.jsx)(P.Z,{defaultValue:null===n||void 0===n?void 0:n.content,onChange:c,sx:{marginBottom:1,backgroundColor:"white"},minRows:1,maxRows:1,placeholder:i("common_enter_answer")})]})]})},O=e=>{const{t:t}=(0,k.$G)(),{page:o,questionState:n,questionTrueFalseQuestion:i}=e,a=[{value:"true",label:t("common_true")},{value:"false",label:t("common_false")}],r=(0,F.I0)(),c=null===n||void 0===n?void 0:n.flag;return(0,B.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",children:[(0,B.jsx)(z.Z,{children:"".concat(t("common_question")," ").concat(o+1)}),(0,B.jsx)(C.Z,{variant:c?"soft":"outlined",color:"primary",startDecorator:c?(0,B.jsx)(s.Z,{}):(0,B.jsx)(D.Z,{}),onClick:()=>{void 0!==c&&r((0,E.mB)({id:i.question.id,flag:!c}))},children:t(c?"common_remove_flag":"common_flag")})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,B.jsxs)(h.Z,{direction:"row",spacing:2,children:[(0,B.jsx)(d.Z,{sx:{backgroundColor:null!==n&&void 0!==n&&n.answered?"#e6eaf7":"#FDF6EA"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsx)(T.Z,{fontSize:"12px",color:"#212121",children:null!==n&&void 0!==n&&n.answered?t("common_answer_saved"):t("common_not_answered")})}),(0,B.jsx)(d.Z,{sx:{backgroundColor:"#f5f5f5"},borderRadius:1,padding:".35rem 1rem",children:(0,B.jsxs)(T.Z,{fontSize:"12px",color:"#212121",children:[t("common_score_can_achieve"),": ",i.question.defaultMark]})})]})}),(0,B.jsx)(l.ZP,{item:!0,xs:12,children:(0,B.jsx)(u.Z,{})}),(0,B.jsxs)(l.ZP,{item:!0,xs:12,md:12,children:[(0,B.jsx)(T.Z,{sx:{padding:0,height:"fit-content"},className:"ql-editor",fontSize:"1rem",textAlign:"left",fontWeight:"400",color:"#212121",lineHeight:"1.5",dangerouslySetInnerHTML:{__html:i.question.questionText}}),Boolean(i.showStandardInstructions)&&(0,B.jsx)(T.Z,{fontSize:".875rem",textAlign:"left",fontWeight:"600",color:"#212121",children:t("course_management_exam_preview_multichoice")}),(0,B.jsx)(M.Z,{color:"primary",value:null===n||void 0===n?void 0:n.content,onChange:e=>{r((0,E.pz)({id:i.question.id,content:e,answered:!0}))},values:a,orientation:"vertical",size:"md",fontSize:".8rem",fontWeight:"400",overlay:!0})]})]})},Q={root:"styles_root__3y2Sz",container:"styles_container__dOxUg",mainContent:"styles_mainContent__QJoKL",formBody:"styles_formBody__L20dA",drawerBody:"styles_drawerBody__PDeS6",drawerFieldContainer:"styles_drawerFieldContainer__WmJ7P",drawerTextTitle:"styles_drawerTextTitle__78q8H",textEditor:"styles_textEditor__VDVFF",breadcumpWrapper:"styles_breadcumpWrapper__SV7zL",icArrow:"styles_icArrow__e-us0",cursorPointer:"styles_cursorPointer__LoVHc"};var V=o(47056),G=o(34105),$=o(82793),K=o(40309),J=o(88999),Y=o(70058),X=o(38515),ee=o(74512),te=o(37222),oe=o(51928),ne=o(65339),ie=o(33060),se=o(70816),ae=o.n(se),re=o(90182);const le=370;function de(){const e=(0,y.UO)().examId,t=(0,oe.C)((e=>e.takeExam.examId)),o=(0,y.UO)().courseId,{width:I}=(0,Z.Z)(),D=(0,y.s0)(),[z]=(0,w.lr)(),T=(0,f.Z)(),{t:P}=(0,k.$G)(),A=(0,y.TH)(),[R,M]=q.useState([]);let U=Number(z.get("page"));(isNaN(U)||U<0)&&(U=0);const te=(0,F.I0)(),se=(0,oe.C)((e=>e.takeExam.questionList)),de=q.useRef(se);q.useEffect((()=>{de.current=se}),[se]);const ue=(0,oe.C)((e=>e.takeExam.examData)),me=(0,oe.C)((e=>e.takeExam.startAt)),[xe,pe]=q.useState(!0),[he,fe]=q.useState(!0),[ge,ve]=q.useState(I<1080?"temporary":"permanent"),[_e,je]=q.useState([]),[Ze,qe]=q.useState(!1),[ye,we]=q.useState(0),[be,Se]=q.useState(0),[Ie,De]=q.useState(0),[Ce,ke]=q.useState(!1),[ze,Te]=q.useState((()=>{if(!me)return 0;return new Date(me).getTime()+1e3*((null===ue||void 0===ue?void 0:ue.timeLimit)||0)}));q.useEffect((()=>{const n=setInterval((()=>(n=>{if(!n)return;const i=ae()(n).diff(ae()().utc(),"milliseconds");if(i<0){const n=new Date((new Date).toLocaleString("en",{timeZone:"Asia/Bangkok"})).toISOString();if("AUTOSUBMIT"!==ue.overdueHanding||Ce)console.log("abandon exam"),te((0,E.Yq)()),D(b._.student.exam.detail.replace(":courseId",o||ue.courseId).replace(":examId",e||ue.id));else{ke(!0);const i=de.current.map((e=>{var t;return{questionId:e.questionData.id,content:e.content,numFile:(null===(t=e.files)||void 0===t?void 0:t.length)||0}}));console.log("questions",i);const s=new Date(new Date(me||"").toLocaleString("en",{timeZone:"Asia/Bangkok"})).toISOString(),a={examId:e||t,userId:"2d7ed5a0-fb21-4927-9a25-647c17d29668",questions:i,startTime:s,submitTime:n};ee.O.submitExam(a).then((t=>{te((0,E.Yq)()),D(b._.student.exam.review.replace(":courseId",o||ue.courseId).replace(":examId",e||ue.id).replace(":submissionId",t.examSubmissionId))})).catch((e=>{})).finally((()=>{}))}}else we(Math.floor(i/36e5%24)),Se(Math.floor(i/1e3/60%60)),De(Math.floor(i/1e3%60))})(ze)),500);return()=>clearInterval(n)}),[ze]);q.useEffect((()=>{ve(I<1080?"temporary":"persistent")}),[I]);const Pe=q.useRef(null),{height:Ee}=(0,j.Z)({ref:Pe});q.useEffect((()=>{(void 0===se||(null===se||void 0===se?void 0:se.length)<=0||e!==t)&&ee.O.getExamQuestionById(null!==e&&void 0!==e?e:ue.id,null).then((t=>{const o=t.questions.map(((e,t)=>({flag:!1,answered:!1,content:"",questionData:e,files:[]}))),n=new Date;console.log("startTIme",n),Te(n.getTime()+1e3*((null===ue||void 0===ue?void 0:ue.timeLimit)||0)),te((0,E.NI)({examId:null!==e&&void 0!==e?e:ue.id,startAt:n.toISOString(),questionList:o}))})).catch((e=>{console.log(e)}))}),[]);const Fe=()=>{D("".concat(b._.student.exam.submitSummary.replace(":courseId",null!==o&&void 0!==o?o:ue.courseId).replace(":examId",null!==e&&void 0!==e?e:ue.id)),{replace:!0})};q.useEffect((()=>{const e=se.filter((e=>e.questionData.page===U)).map((e=>({questionId:e.questionData.id,qtype:e.questionData.qtype}))),t={questionCommands:e};0!==e.length&&ne.a.getQuestionDetail(t).then((e=>{console.log("get current list",e);const t=e.questionResponses.map((e=>({data:e.qtypeEssayQuestion?e.qtypeEssayQuestion:e.qtypeShortAnswerQuestion?e.qtypeShortAnswerQuestion:e.qtypeMultichoiceQuestion?e.qtypeMultichoiceQuestion:e.qtypeTrueFalseQuestion?e.qtypeTrueFalseQuestion:e.qtypeCodeQuestion})));M(t)})).catch((e=>{console.log(e)}))}),[U,t]);const[Ae,Re]=q.useState(!1);return q.useEffect((()=>{if(!Ae)return;Re(!1),console.log("selectedQtype",_e);const t=se.filter((e=>_e.includes(e.questionData.qtype))).at(0);D("".concat(b._.student.exam.take.replace(":courseId",null!==o&&void 0!==o?o:ue.courseId).replace(":examId",null!==e&&void 0!==e?e:ue.id),"?page=").concat((null===t||void 0===t?void 0:t.questionData.page)||0),{replace:!0})}),[_e]),q.useEffect((()=>{const e=setInterval((function(){const t=A.hash.substring(1),o=document.getElementById(t);o&&(o.scrollIntoView({behavior:"smooth"}),clearInterval(e))}),100);return()=>clearInterval(e)}),[A]),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(re.q,{children:(0,B.jsxs)("title",{children:[P("exam_take_exam_title")," | ",ue.name]})}),(0,B.jsxs)(l.ZP,{className:Q.root,children:[(0,B.jsx)(g.Z,{ref:Pe}),(0,B.jsxs)(d.Z,{className:Q.container,style:{marginTop:"".concat(Ee,"px")},children:[(0,B.jsx)(c.ZP,{}),(0,B.jsx)(C.Z,{onClick:()=>{pe(!0)},sx:{...xe&&{display:"none"},position:"fixed",top:"".concat(Ee+10,"px"),right:0,height:"44px",width:"49px"},size:"sm",endDecorator:(0,B.jsx)(V.Z,{color:"action"}),variant:"soft"}),(0,B.jsxs)(d.Z,{className:Q.formBody,width:"100%",children:[(0,B.jsx)(v.Z,{fontWeight:"500",children:ue.name}),(0,B.jsx)(ie.Z,{children:(0,B.jsx)("div",{dangerouslySetInnerHTML:{__html:ue.intro}})}),(0,B.jsx)(C.Z,{onClick:()=>{D(b._.student.exam.detail.replace(":courseId",o||ue.courseId).replace(":examId",e||ue.id))},startDecorator:(0,B.jsx)(n.Z,{fontSize:"small"}),color:"neutral",variant:"soft",size:"md",sx:{width:"fit-content"},children:P("common_back")}),(0,B.jsx)(d.Z,{sx:{position:"sticky",top:"74px",zIndex:"1020"},children:(0,B.jsx)(d.Z,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:(0,B.jsxs)(d.Z,{sx:{padding:"8px 9px 8px 10px",borderRadius:"40px",display:"flex",alignItems:"center",color:"#005742",backgroundColor:"#EAF4DD",fontWeight:"500",position:"sticky",top:"0"},children:[(0,B.jsx)(J.Z,{fontSize:"medium",sx:{marginRight:"0.5rem !important"}}),he?"C\xf2n l\u1ea1i: ".concat(ye<10?"0".concat(ye):ye,":").concat(be<10?"0".concat(be):be,":").concat(Ie<10?"0".concat(Ie):Ie):"Th\u1eddi gian c\xf2n l\u1ea1i",(0,B.jsx)(C.Z,{onClick:()=>{fe(!he)},variant:"soft",color:"neutral",sx:{borderRadius:"40px",marginLeft:"16px",border:"1px solid #bce3da"},children:he?"\u1ea8n":"Hi\u1ec7n"})]})})}),(0,B.jsx)(d.Z,{sx:{borderRadius:"5px",border:"1px solid #E1E1E1",padding:"20px"},children:(0,B.jsxs)(l.ZP,{container:!0,spacing:7,children:[R.filter((e=>0===_e.length||_e.includes(e.data.question.qtype))).map(((e,t)=>(0,B.jsxs)(q.Fragment,{children:[(0,B.jsx)(l.ZP,{item:!0,xs:12,id:ce(e.data.question.id),children:e.data.question.qtype===S.Z.essay.code?(0,B.jsx)(L,{page:se.findIndex((t=>t.questionData.id===e.data.question.id)),questionState:se.find((t=>t.questionData.id===e.data.question.id)),questionEssayQuestion:e.data}):e.data.question.qtype===S.Z.short_answer.code?(0,B.jsx)(N,{page:se.findIndex((t=>t.questionData.id===e.data.question.id)),questionShortAnswer:e.data,questionState:se.find((t=>t.questionData.id===e.data.question.id))}):e.data.question.qtype===S.Z.multiple_choice.code?(0,B.jsx)(H,{page:se.findIndex((t=>t.questionData.id===e.data.question.id)),questionMultiChoice:e.data,questionState:se.find((t=>t.questionData.id===e.data.question.id))}):e.data.question.qtype===S.Z.true_false.code?(0,B.jsx)(O,{page:se.findIndex((t=>t.questionData.id===e.data.question.id)),questionTrueFalseQuestion:e.data,questionState:se.find((t=>t.questionData.id===e.data.question.id))}):null}),(0,B.jsx)(l.ZP,{item:!0,xs:12,display:"flex",justifyContent:"center",children:(0,B.jsx)(u.Z,{sx:{width:"100px"}})})]},e.data.question.id))),(0,B.jsxs)(l.ZP,{item:!0,xs:12,display:"flex",justifyContent:"space-between",children:[0!==U?(0,B.jsx)(w.rU,{to:{pathname:b._.student.exam.take.replace(":courseId",null!==o&&void 0!==o?o:ue.courseId).replace(":examId",null!==e&&void 0!==e?e:ue.id),search:"?page=".concat(U-1)},children:(0,B.jsx)(C.Z,{variant:"soft",color:"neutral",children:"Trang tr\u01b0\u1edbc"})}):(0,B.jsx)(d.Z,{}),U===(se.length>0?se[se.length-1].questionData.page:-1)?(0,B.jsx)(C.Z,{onClick:Fe,variant:"solid",color:"primary",children:"K\u1ebft th\xfac b\xe0i l\xe0m..."}):(0,B.jsx)(w.rU,{to:{pathname:b._.student.exam.take.replace(":courseId",null!==o&&void 0!==o?o:ue.courseId).replace(":examId",null!==e&&void 0!==e?e:ue.id),search:"?page=".concat(U+1)},children:(0,B.jsx)(C.Z,{onClick:()=>{},variant:"solid",color:"primary",children:"Trang sau"})})]})]})})]}),(0,B.jsxs)(m.ZP,{sx:{display:xe?"block":"none",width:le,flexShrink:0,"& .MuiDrawer-paper":{borderTop:"1px solid #E1E1E1",borderRadius:"12px 0px",width:le,top:"".concat(Ee+10,"px ")}},variant:ge,anchor:"right",open:xe,children:[(0,B.jsx)(d.Z,{sx:{display:"flex",justifyContent:"flex-end",padding:1},children:(0,B.jsx)(G.ZP,{onClick:()=>{pe(!1)},variant:"soft",children:"rtl"===T.direction?(0,B.jsx)(n.Z,{}):(0,B.jsx)(i.Z,{})})}),(0,B.jsx)(d.Z,{className:Q.drawerBody,children:(0,B.jsx)(d.Z,{className:Q.drawerFieldContainer,children:(0,B.jsxs)(l.ZP,{container:!0,maxHeight:"80dvh",overflow:"auto",rowSpacing:3,children:[(0,B.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,B.jsx)(_.Z,{className:Q.drawerTextTitle,children:P("take_exam_question_navigation_title")}),(0,B.jsx)($.Z,{title:P("take_exam_question_name"),fontSize:"13px",fontWeight:"500"}),(0,B.jsx)(x.Z,{fullWidth:!0,size:"small",options:se.filter((e=>0===_e.length||_e.includes(e.questionData.qtype))),getOptionLabel:e=>e.questionData.name?"".concat(e.questionData.name):"",sx:{marginBottom:"16px",borderRadius:"12px","& .MuiOutlinedInput-root":{borderRadius:"12px"}},renderInput:e=>(0,B.jsx)(p.Z,{...e,placeholder:"Nh\u1eadp c\xe2u h\u1ecfi",size:"small",sx:{borderRadius:"12px"}}),isOptionEqualToValue:(e,t)=>e.questionData.name===t.questionData.name}),(0,B.jsx)($.Z,{title:P("take_exam_question_sort_question"),fontSize:"13px",fontWeight:"500"}),(0,B.jsx)(x.Z,{disablePortal:!0,fullWidth:!0,multiple:!0,size:"small",limitTags:2,options:[{label:P("common_question_type_essay")},{label:P("common_question_type_multi_choice")},{label:P("common_question_type_yes_no")},{label:P("common_question_type_short")}],renderInput:e=>(0,B.jsx)(p.Z,{...e,sx:{borderRadius:"12px"},InputLabelProps:{shrink:!0}}),sx:{marginBottom:"16px",borderRadius:"12px","& .MuiOutlinedInput-root":{borderRadius:"12px"}},onChange:(e,t)=>{if(0===t.length)je([]);else{const e=t.map((e=>e.label===P("common_question_type_essay")?S.Z.essay.code:e.label===P("common_question_type_multi_choice")?S.Z.multiple_choice.code:e.label===P("common_question_type_yes_no")?S.Z.true_false.code:e.label===P("common_question_type_short")?S.Z.short_answer.code:""));je(e)}Re(!0)},isOptionEqualToValue:(e,t)=>e.label===t.label}),(0,B.jsxs)(h.Z,{direction:"row",spacing:1,marginBottom:"16px",children:[(0,B.jsx)($.Z,{title:P("common_flagged_question"),fontSize:"13px",fontWeight:"500"}),(0,B.jsx)(W.Z,{onChange:e=>{qe(e.target.checked)}})]}),(0,B.jsx)(l.ZP,{container:!0,spacing:1,marginBottom:"10px",sx:{maxHeight:"30dvh"},children:se.filter((e=>(0===_e.length||_e.includes(e.questionData.qtype))&&(!Ze||e.flag))).map(((t,n)=>(0,B.jsx)(l.ZP,{item:!0,marginTop:"16px",marginRight:"8px",children:(0,B.jsx)(K.Z,{color:"neutral",variant:"outlined",badgeContent:t.questionData.qtype===S.Z.essay.code?(0,B.jsx)(r.Z,{sx:{width:"15px",height:"15px"}}):t.questionData.qtype===S.Z.short_answer.code?(0,B.jsx)(X.Z,{sx:{width:"15px",height:"15px"}}):t.questionData.qtype===S.Z.true_false.code?(0,B.jsx)(Y.Z,{sx:{width:"15px",height:"15px"}}):(0,B.jsx)(a.Z,{sx:{width:"15px",height:"15px"}}),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,B.jsx)(K.Z,{color:"neutral",variant:"outlined",badgeContent:(0,B.jsx)(s.Z,{sx:{width:"10px",height:"15px",color:"red"}}),anchorOrigin:{vertical:"top",horizontal:"right"},invisible:!t.flag,children:(0,B.jsx)(C.Z,{variant:"outlined",sx:{border:R.some((e=>e.data.question.id===t.questionData.id))?"2px solid #002db3":"2px solid #e1e1e1",borderRadius:"1000px",width:"40px",height:"40px",backgroundColor:t.answered?"#e1e1e1":""},color:R.some((e=>e.data.question.id===t.questionData.id))?"primary":"neutral",onClick:()=>(t=>{var n;const i=null===(n=se.find((e=>e.questionData.id===t)))||void 0===n?void 0:n.questionData.page,s=ce(t);if(i===U){const e=document.getElementById(s);null===e||void 0===e||e.scrollIntoView({behavior:"smooth"})}else D("".concat(b._.student.exam.take.replace(":courseId",null!==o&&void 0!==o?o:ue.courseId).replace(":examId",null!==e&&void 0!==e?e:ue.id),"?page=").concat(i,"#").concat(s),{replace:!0})})(t.questionData.id),children:se.findIndex((e=>e.questionData.id===t.questionData.id))+1})})})},n)))})]}),(0,B.jsx)(l.ZP,{item:!0,xs:12,children:(0,B.jsx)(l.ZP,{container:!0,spacing:1,children:(0,B.jsx)(l.ZP,{item:!0,justifyContent:"center",xs:12,children:(0,B.jsx)(C.Z,{onClick:Fe,variant:"soft",color:"primary",fullWidth:!0,children:"K\u1ebft th\xfac b\xe0i l\xe0m..."})})})})]})})})]})]})]})]})}function ce(e){const t=Array.from((0,te.Z)(e));return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}}}]);