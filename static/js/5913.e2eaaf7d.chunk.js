"use strict";(self.webpackChunkfrontend_app=self.webpackChunkfrontend_app||[]).push([[5913],{27013:(e,t,n)=>{n.d(t,{N:()=>s,Z:()=>c});n(47313);var o=n(42832),i=n(36373),r=n(99881),a=n(46417);let s=function(e){return e.Success="success",e.INFO="info",e.Warning="warning",e.Error="error",e}({});function c(e){let{open:t,setOpen:n,content:s,type:c,anchorOrigin:d}=e;const l=e=>{"clickaway"!==e&&n(!1)},x="right";return(0,a.jsx)(o.Z,{spacing:2,sx:{width:"100%"},children:(0,a.jsx)(i.Z,{open:t,autoHideDuration:3e3,onClose:l,anchorOrigin:d||{vertical:"top",horizontal:x},children:(0,a.jsx)(r.Z,{onClose:l,severity:c,children:s})},"top"+x)})}},33060:(e,t,n)=>{n.d(t,{Z:()=>s});var o,i=n(30168),r=n(17592),a=n(61113);const s=(0,r.ZP)(a.Z)(o||(o=(0,i.Z)(['\n  font-family: "Montserrat";\n  font-style: ',";\n  font-weight: 600;\n  font-size: 24px;\n  line-height: 32px;\n  letter-spacing: -0.03em;\n  color: ",";\n  @media only screen and (max-width: 767px) {\n    font-size: ",";\n    line-height: ",";\n  }\n"])),(e=>e.fontStyle||"normal"),(e=>"var(".concat(e.colorname||"--eerie-black",")")),(e=>e.fontSizeMobile||"22px"),(e=>e.$lineHeightMobile||"32px"))},51928:(e,t,n)=>{n.d(t,{C:()=>r,T:()=>i});var o=n(65537);const i=o.I0.withTypes(),r=o.v9.withTypes()},45913:(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var o=n(90200);const i="styles_root__eS-7P",r="styles_container__sFK6V",a="styles_formBody__-9+g9",s="styles_drawerBody__Hon04",c="styles_drawerFieldContainer__Ko6dW",d="styles_drawerTextTitle__-M6ad";var l=n(9019),x=n(79536),m=n(62481),h=n(46923),p=n(19860),u=n(8479),g=n(47313),f=n(47477),j=n(47056),_=n(38556),Z=n(31845),y=n(33060),b=n(89790),w=n(54045),v=n(58467),S=n(75590),k=n(90469),I=n(88999),C=n(91861),D=n(99221),E=n(51928),T=n(40309),q=n(78832),z=n(70058),O=n(38515),M=n(42766),N=n(1065),R=n(83703),H=n(80007),A=n(28538),F=n(62968),P=n(70816),W=n.n(P),B=n(74512),L=n(8344),U=n(65537),K=n(4271),Y=n(27013),$=n(46417);const G=()=>{const e=(0,U.I0)(),t=(0,v.UO)().examId,n=(0,E.C)((e=>e.takeExam.examId)),P=(0,E.C)((e=>e.takeExam.startAt)),G=(0,E.C)((e=>e.takeExam.examData)),V=new Date(G.timeClose),[J,Q]=g.useState(!1),[X,ee]=g.useState(""),[te,ne]=g.useState(Y.N.Success),oe=(0,v.UO)().courseId,ie=(0,p.Z)(),re=(0,v.s0)(),{t:ae}=(0,S.$G)(),[se,ce]=g.useState((()=>{if(!P)return 0;return new Date(P).getTime()+1e3*((null===G||void 0===G?void 0:G.timeLimit)||0)})),[de,le]=g.useState(0),xe=g.useRef(null),{height:me}=(0,f.Z)({ref:xe}),[he,pe]=g.useState(!0),{width:ue}=(0,_.Z)(),[ge,fe]=g.useState(ue<1080?"temporary":"permanent");g.useEffect((()=>{fe(ue<1080?"temporary":"persistent")}),[ue]);const[je,_e]=g.useState(0),[Ze,ye]=g.useState(0),[be,we]=g.useState(0);g.useEffect((()=>{const e=setInterval((()=>(e=>{if(!e)return;const n=W()(e).diff(W()().utc(),"milliseconds");le(n),n<0?""!==G.id&&"AUTOSUBMIT"===G.overdueHanding?De():re(k._.student.exam.detail.replace(":courseId",oe||G.courseId).replace(":examId",t||G.id),{replace:!0}):(_e(Math.floor(n/36e5%24)),ye(Math.floor(n/1e3/60%60)),we(Math.floor(n/1e3%60)))})(se)),1e3);return()=>clearInterval(e)}),[se]),g.useEffect((()=>{""===G.id&&re(k._.student.exam.detail.replace(":courseId",oe||G.courseId).replace(":examId",t||G.id),{replace:!0})}),[]);const ve=(0,E.C)((e=>e.takeExam.questionList)),Se=e=>{const n=(0,F.Z)(e.questionData.id);oe&&t&&re("".concat(k._.student.exam.take.replace(":courseId",oe).replace(":examId",t),"?page=").concat(e.questionData.page,"#").concat(n))},[ke,Ie]=g.useState(!0),Ce=[{value:ae("common_question"),width:"40%"},{value:ae("common_status"),width:""}],De=async()=>{const o=new Date((new Date).toLocaleString("en",{timeZone:"Asia/Bangkok"})).toISOString();e((0,L.K4)(!0));const i=ve.map((e=>{var t;return{questionId:e.questionData.id,content:e.content,numFile:(null===(t=e.files)||void 0===t?void 0:t.length)||0}})),r=new Date(new Date(P||"").toLocaleString("en",{timeZone:"Asia/Bangkok"})).toISOString();console.log("start at time",new Date(r));const a={examId:t||n,userId:"2d7ed5a0-fb21-4927-9a25-647c17d29668",questions:i,startTime:r,submitTime:o};B.O.submitExam(a).then((n=>{console.log("response",n),e((0,K.Yq)()),ee("N\u1ed9p b\xe0i th\xe0nh c\xf4ng"),ne(Y.N.Success),Q(!0),re(k._.student.exam.review.replace(":courseId",oe||G.courseId).replace(":examId",t||G.id).replace(":submissionId",n.examSubmissionId),{replace:!0})})).catch((e=>{ee("N\u1ed9p b\xe0i th\u1ea5t b\u1ea1i"),ne(Y.N.Error),Q(!0)})).finally((()=>{e((0,L.K4)(!1))}))},Ee=[ae("common_january"),ae("common_february"),ae("common_march"),ae("common_april"),ae("common_may"),ae("common_june"),ae("common_july"),ae("common_august"),ae("common_september"),ae("common_october"),ae("common_november"),ae("common_december")],Te=[ae("common_sunday"),ae("common_monday"),ae("common_tuesday"),ae("common_wednesday"),ae("common_thursday"),ae("common_friday"),ae("common_saturday")];return(0,$.jsx)($.Fragment,{children:(0,$.jsxs)(l.ZP,{className:i,children:[(0,$.jsx)(Y.Z,{open:J,setOpen:Q,content:X,type:te,anchorOrigin:{vertical:"bottom",horizontal:"left"}}),(0,$.jsx)(o.Z,{ref:xe}),(0,$.jsxs)(x.Z,{className:r,style:{marginTop:"".concat(me,"px")},children:[(0,$.jsx)(m.ZP,{}),(0,$.jsx)(u.Z,{onClick:()=>{pe(!0)},sx:{...he&&{display:"none"},position:"fixed",top:"".concat(me+10,"px"),right:0,height:"44px",width:"49px"},size:"sm",endDecorator:(0,$.jsx)(j.Z,{color:"action"}),variant:"soft"}),(0,$.jsxs)(x.Z,{className:a,width:"100%",children:[(0,$.jsx)(Z.Z,{fontWeight:"500",children:G.name}),(0,$.jsx)(y.Z,{children:(0,$.jsx)("div",{dangerouslySetInnerHTML:{__html:G.intro}})}),(0,$.jsx)(u.Z,{onClick:()=>{oe&&t&&re(k._.student.exam.take.replace(":courseId",oe).replace(":examId",t))},startDecorator:(0,$.jsx)(b.Z,{fontSize:"small"}),color:"neutral",variant:"soft",size:"md",sx:{width:"fit-content"},children:ae("common_back")}),(0,$.jsx)(x.Z,{sx:{position:"sticky",top:"74px",zIndex:"1020"},children:(0,$.jsx)(x.Z,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:(0,$.jsxs)(x.Z,{sx:{padding:"8px 9px 8px 10px",borderRadius:"40px",display:"flex",alignItems:"center",color:"#005742",backgroundColor:"#EAF4DD",fontWeight:"500",position:"sticky",top:"0"},children:[(0,$.jsx)(I.Z,{fontSize:"medium",sx:{marginRight:"0.5rem !important"}}),ke?"C\xf2n l\u1ea1i: ".concat(je<10?"0".concat(je):je,":").concat(Ze<10?"0".concat(Ze):Ze,":").concat(be<10?"0".concat(be):be):"Th\u1eddi gian c\xf2n l\u1ea1i",(0,$.jsx)(u.Z,{onClick:()=>{Ie(!ke)},variant:"soft",color:"neutral",sx:{borderRadius:"40px",marginLeft:"16px",border:"1px solid #bce3da"},children:ke?"\u1ea8n":"Hi\u1ec7n"})]})})}),(0,$.jsxs)(x.Z,{sx:{borderRadius:"5px",border:"1px solid #E1E1E1",padding:"20px"},children:[(0,$.jsx)(D.Z,{children:ae("exam_summary")}),(0,$.jsxs)(R.Z,{size:"lg",hoverRow:!0,sx:{"& tbody tr:hover":{backgroundColor:"#f3f3f3",cursor:"pointer"}},children:[(0,$.jsx)("thead",{children:(0,$.jsx)("tr",{children:Ce.map(((e,t)=>(0,$.jsx)("th",{style:{width:e.width,backgroundColor:"white",borderBottom:"2px solid rgb(128,128,128)"},children:(0,$.jsx)(H.Z,{fontSize:"12px",color:"#525151",fontWeight:"500",children:e.value})},t)))})}),(0,$.jsx)("tbody",{children:ve.map(((e,t)=>(0,$.jsxs)("tr",{onClick:()=>Se(e),children:[(0,$.jsx)("td",{children:(0,$.jsx)(x.Z,{sx:{backgroundColor:"#EAF4DD",borderRadius:"16px",width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #e8e0e0"},children:(0,$.jsx)(H.Z,{fontSize:"12px",color:"#212121",fontWeight:"400",children:t+1})})}),(0,$.jsx)("td",{children:(0,$.jsx)(A.Z,{sx:{backgroundColor:e.answered?"#FDF6EA":"#e6eaf7",borderRadius:"4px",border:"1px solid #e8e0e0"},children:(0,$.jsx)(H.Z,{fontSize:"14px",color:"#212121",fontWeight:"400",children:e.answered?ae("common_answered"):ae("common_not_answered")})})})]},t)))})]})]}),(0,$.jsx)(H.Z,{marginTop:"20px",fontSize:"14px",color:"#212121",fontWeight:"400",children:ae("submit_before",{weekDay:Te[V.getDay()],day:V.getDate(),month:Ee[V.getMonth()],year:V.getFullYear(),time:"".concat(V.getHours()<10?"0".concat(V.getHours()):V.getHours(),":").concat(V.getMinutes()<10?"0".concat(V.getMinutes()):V.getMinutes())})}),(0,$.jsx)(u.Z,{sx:{width:"fit-content"},onClick:De,children:ae("exam_submit_and_finish")})]}),(0,$.jsxs)(h.ZP,{sx:{display:he?"block":"none",width:370,flexShrink:0,"& .MuiDrawer-paper":{borderTop:"1px solid #E1E1E1",borderRadius:"12px 0px",width:370,top:"".concat(me+10,"px ")}},variant:ge,anchor:"right",open:he,children:[(0,$.jsx)(x.Z,{sx:{display:"flex",justifyContent:"flex-end",padding:1},children:(0,$.jsx)(C.ZP,{onClick:()=>{pe(!1)},variant:"soft",children:"rtl"===ie.direction?(0,$.jsx)(b.Z,{}):(0,$.jsx)(w.Z,{})})}),(0,$.jsx)(x.Z,{className:s,children:(0,$.jsx)(x.Z,{className:c,children:(0,$.jsx)(l.ZP,{container:!0,maxHeight:"80dvh",overflow:"auto",rowSpacing:3,children:(0,$.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,$.jsx)(D.Z,{className:d,children:ae("take_exam_question_navigation_title")}),(0,$.jsx)(l.ZP,{container:!0,spacing:1,marginBottom:"10px",sx:{maxHeight:"30dvh"},children:ve.map(((e,t)=>(0,$.jsx)(l.ZP,{item:!0,marginTop:"16px",marginRight:"8px",children:(0,$.jsx)(T.Z,{color:"neutral",variant:"outlined",badgeContent:"ESSAY"===e.questionData.qtype?(0,$.jsx)(q.Z,{sx:{width:"15px",height:"15px"}}):"SHORT_ANSWER"===e.questionData.qtype?(0,$.jsx)(O.Z,{sx:{width:"15px",height:"15px"}}):"TRUE_FALSE"===e.questionData.qtype?(0,$.jsx)(z.Z,{sx:{width:"15px",height:"15px"}}):(0,$.jsx)(M.Z,{sx:{width:"15px",height:"15px"}}),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,$.jsx)(T.Z,{color:"neutral",variant:"outlined",badgeContent:(0,$.jsx)(N.Z,{sx:{width:"10px",height:"15px",color:"red"}}),anchorOrigin:{vertical:"top",horizontal:"right"},invisible:!e.flag,children:(0,$.jsx)(u.Z,{variant:"outlined",sx:{borderRadius:"1000px",width:"40px",height:"40px",backgroundColor:e.answered?"#e1e1e1":""},onClick:()=>Se(e),children:ve.findIndex((t=>t.questionData.id===e.questionData.id))+1})})})},t)))})]})})})})]})]})]})})}},62968:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(37222);function i(e){const t=Array.from((0,o.Z)(e));return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}}}]);