"use strict";(self.webpackChunkfrontend_app=self.webpackChunkfrontend_app||[]).push([[1035],{12117:(e,t,a)=>{a.d(t,{$:()=>i});let i=function(e){return e.BASIC="BASIC",e.INTERMEDIATE="INTERMEDIATE",e.ADVANCED="ADVANCED",e}({})},41035:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Xi});var i=a(9019),s=a(79536);const n="styles_root__zeGk-",r="styles_body__qqtSL";var o=a(58467),l=a(51997),c=a(65954),d=a(42832),m=a(48119),u=a(44758),x=a(66212),h=a(73428),p=a(19536),g=a(81127),_=a(11053),j=a(29878),f=a(95326),Z=a(31845),b=a(68464),y=a(63408),v=a(99221),C=a(23885),w=a(68933),k=a(70816),S=a.n(k),P=a(47313),N=a(75590),A=a(65537),I=a(56289),T=a(92164),D=a(90469),M=a(3152),z=a(22665),q=a(15162);const E={breadcump:"styles_breadcump__ShexG"};var W=a(46417);const L=()=>{const e=(0,P.useRef)(null),{t:t}=(0,N.$G)(),a=(0,o.s0)(),[n,r]=(0,P.useState)(""),[k,L]=(0,P.useState)((()=>C.ZP.language)),[R,F]=P.useState([{key:"Status",value:w.m.ALL}]),[B,U]=(0,P.useState)(0),[O,G]=(0,P.useState)(10),H=(0,A.v9)((e=>e.contest)),V=(0,A.I0)(),Q=(0,P.useCallback)((async e=>{let{searchName:a,startTimeFilter:i=w.m.ALL,pageNo:s=0,pageSize:n=10}=e;V((0,T.K4)(!0));try{const e=await M.c.getContestsForAdmin({searchName:a,startTimeFilter:i,pageNo:s,pageSize:n});V((0,T.AF)(e)),V((0,T.K4)(!1))}catch(r){console.error("error",r),401!==r.code&&403!==r.code||V((0,I.lS)(t("common_please_login_to_continue"))),V((0,T.K4)(!1))}}),[V,t]),[K,Y]=(0,P.useState)(!1),[$,J]=(0,P.useState)(""),X=(0,P.useCallback)((e=>{U(0),Q({searchName:e,startTimeFilter:R[0].value})}),[Q,R]),ee=[{field:"name",headerName:t("common_name"),flex:1,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_name")}),renderCell:e=>(0,W.jsxs)(d.Z,{direction:"row",gap:2,alignItems:"center",justifyContent:"flex-start",margin:"5px",children:[(0,W.jsx)(m.Z,{sx:{bgcolor:"".concat((0,z.M)("".concat(e.row.name)))},alt:e.row.name,src:e.row.thumbnailUrl,children:e.row.name.charAt(0)}),(0,W.jsx)(y.Z,{width:"auto",fontWeight:500,children:e.row.name})]})},{field:"startTime",headerName:t("common_start_time"),flex:1,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_start_time")}),renderCell:e=>(0,W.jsx)(y.Z,{width:"auto",children:(0,q.J$)(e.row.startTime,k)})},{field:"endTime",headerName:t("common_end_time"),flex:1,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_end_time")}),renderCell:e=>(0,W.jsx)(y.Z,{width:"auto",children:e.row.endTime?(0,q.J$)(e.row.endTime,k):t("contest_details_has_no_end_time")})},{field:"numOfParticipants",headerName:t("common_num_of_participants"),flex:.4,minWidth:100,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_num_of_participants")}),renderCell:e=>(0,W.jsx)(y.Z,{width:"auto",children:e.row.numOfParticipants})},{field:"isPublic",headerName:t("contest_is_public"),flex:.5,align:"center",renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("contest_is_public")}),renderCell:e=>(0,W.jsx)(u.Z,{disableRipple:!0,checked:!0===e.row.isPublic,color:e.row.isPublic?"success":"error",sx:{"&:hover":{backgroundColor:"transparent !important",cursor:"default"}}})},{field:"status",headerName:t("common_status"),flex:.7,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_status")}),renderCell:e=>(0,W.jsx)(x.Z,{size:"small",label:e.row.status===w.m.UPCOMING?t("common_upcoming"):e.row.status===w.m.HAPPENING?t("common_in_progress"):t("common_ended"),variant:"outlined",color:e.row.status===w.m.UPCOMING?"primary":e.row.status===w.m.HAPPENING?"success":"error",component:y.Z})},{field:"action",headerName:t("common_action"),type:"actions",flex:.6,renderHeader:()=>(0,W.jsx)(v.Z,{width:"auto",sx:{textAlign:"left"},children:t("common_action")}),getActions:e=>[(0,W.jsx)(g.u,{icon:(0,W.jsx)(c.Z,{}),label:"Edit",onClick:()=>{a(D._.admin.contest.edit.details.replace(":contestId",e.row.contestId))}}),(0,W.jsx)(g.u,{icon:(0,W.jsx)(l.Z,{}),label:"Delete",onClick:()=>{J(e.row.contestId),Y(!0)}})]}],te=(0,P.useMemo)((()=>H.contests.totalItems||0),[H.contests]),ae=(0,P.useMemo)((()=>H.contests.contests.map((e=>{const t=e.startTime&&S()().utc().isBefore(e.startTime)?w.m.UPCOMING:e.endTime&&S()().utc().isAfter(e.endTime)?w.m.ENDED:w.m.HAPPENING;return{id:e.contestId,contestId:e.contestId,name:e.name,description:e.description,prizes:e.prizes,rules:e.rules,scoring:e.scoring,thumbnailUrl:e.thumbnailUrl,startTime:e.startTime,endTime:e.endTime,questions:e.questions,numOfParticipants:e.numOfParticipants,status:t,isPublic:e.isPublic,isRestrictedForum:e.isRestrictedForum,isDisabledForum:e.isDisabledForum,createdBy:e.createdBy,createdAt:e.createdAt,updatedAt:e.updatedAt,updatedBy:e.updatedBy}}))),[H.contests]),ie=(0,P.useCallback)((()=>{Q({searchName:n,startTimeFilter:R[0].value})}),[Q,n,R]),se=(0,P.useCallback)((()=>{F([{key:"Status",value:w.m.ALL}]),Q({searchName:n,startTimeFilter:w.m.ALL})}),[Q,n]);return(0,P.useEffect)((()=>{L(C.ZP.language)}),[C.ZP.language]),(0,P.useEffect)((()=>{(async()=>{Q({searchName:"",startTimeFilter:w.m.ALL})})()}),[V,Q]),(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(j.Z,{isOpen:K,title:t("dialog_confirm_delete_title"),description:t("dialog_confirm_delete_contest_description"),onCancel:()=>{Y(!1)},onDelete:async()=>{M.c.deleteContest($).then((e=>{U(0),Q({searchName:n,startTimeFilter:R[0].value,pageNo:0,pageSize:O}),V((0,I.kU)(t("contest_delete_contest_success")))})).catch((e=>{console.error("error",e),V((0,I.lS)(t("contest_delete_contest_fail")))})).finally((()=>{Y(!1)}))}}),(0,W.jsxs)(h.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"}},children:[(0,W.jsx)(s.Z,{className:E.breadcump,ref:e,children:(0,W.jsx)(s.Z,{id:E.breadcumpWrapper,children:(0,W.jsx)(y.Z,{colorname:"--blue-500","translate-key":"contest_management_title",children:t("contest_management_title")})})}),(0,W.jsx)(p.Z,{}),(0,W.jsxs)(i.ZP,{container:!0,spacing:2,sx:{padding:"20px"},children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(Z.Z,{"translate-key":"contest_management_title",children:t("contest_management_title")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(f.Z,{isLoading:H.isLoading,searchValue:n,setSearchValue:r,onHandleChange:X,createBtnText:t("contest_create"),onClickCreate:()=>{a(D._.admin.contest.create)},numOfResults:te,filterKeyList:[{label:t("common_status"),value:"Status"}],filterValueList:{Status:[{label:t("common_all"),value:w.m.ALL},{label:t("common_upcoming"),value:w.m.UPCOMING},{label:t("common_in_progress"),value:w.m.HAPPENING},{label:t("common_ended"),value:w.m.ENDED}]},filters:R,handleChangeFilters:e=>{F(e)},onHandleApplyFilter:ie,onHandleCancelFilter:se})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(_.Z,{loading:H.isLoading,dataList:ae,tableHeader:ee,onSelectData:(e,t)=>{},dataGridToolBar:{enableToolbar:!0},page:B,pageSize:O,totalElement:te,onPaginationModelChange:(e,t)=>{G(e.pageSize),U(e.page),Q({searchName:n,startTimeFilter:w.m.ALL,pageNo:e.page,pageSize:e.pageSize})},showVerticalCellBorder:!0,getRowHeight:()=>"auto",onClickRow:e=>{},sx:{"& .MuiDataGrid-cell":{border:"none"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f5f9fb"},"& .MuiDataGrid-toolbarContainer":{backgroundColor:"#f5f9fb"}},personalSx:!0})})]})]})]})};var R=a(62563),F=a(96447),B=a(66565),U=a(83929),O=a(15535),G=a(16977),H=a(82098),V=a(82793),Q=a(75627),K=a(21933);const Y="styles_formBody__4S2B5",$="styles_breadcump__bLd4l",J="styles_breadcumpWrapper__QNcnk",X="styles_icArrow__tM8ll",ee="styles_cursorPointer__A6Tq+",te=()=>{const e=(0,P.useRef)(null),{t:t}=(0,N.$G)(),a=(0,o.s0)(),[n,r]=(0,P.useState)(!1),l=(0,A.I0)(),c=(0,P.useMemo)((()=>K.Ry().shape({isNoEndTime:K.O7().required(t("contest_is_no_end_time_required")),name:K.Z_().required(t("contest_name_required")).trim(""),startTime:K.Z_().required(t("contest_start_time_required")).trim("").test("startTime",t("contest_start_time_greater_than_current_time"),(function(e){return S()(e).isAfter(S()().utc())})),endTime:K.Z_().nullable().test("endTime",t("contest_end_time_required"),(function(e){return!!this.parent.isNoEndTime||!!e})).test("endTime",t("contest_end_time_greater_than_start_time"),(function(e){return!!this.parent.isNoEndTime||S()(e).isAfter(this.parent.startTime)}))})),[t]),{control:m,handleSubmit:x,watch:g,formState:{errors:_},setValue:j}=(0,Q.cI)({resolver:(0,R.X)(c),defaultValues:{isNoEndTime:!1,name:"",startTime:S().utc().add(30,"minute").toISOString(),endTime:S().utc().add(1,"hour").toISOString()}}),f=(0,P.useCallback)((async e=>{let{name:i,description:s,thumbnailUrl:n,startTime:o,endTime:c}=e;r(!0);try{const e=await M.c.createContest({name:i,description:s,thumbnailUrl:n,startTime:o,endTime:c});e.name===i&&(l((0,I.kU)(t("contest_create_success"))),r(!1),a(D._.admin.contest.edit.details.replace(":contestId",e.contestId)))}catch(d){console.error("error",d),401!==d.code&&403!==d.code||l((0,I.lS)(t("common_please_login_to_continue"))),r(!1)}}),[l,a,t]);return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(h.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"},gap:"20px"},children:[(0,W.jsx)(s.Z,{className:$,ref:e,children:(0,W.jsxs)(s.Z,{id:J,children:[(0,W.jsx)(y.Z,{colorname:"--blue-500",className:ee,onClick:()=>a(D._.admin.contest.root),"translation-key":"contest_management_title",children:t("contest_management_title")}),(0,W.jsx)(F.Z,{id:X}),(0,W.jsx)(y.Z,{colorname:"--blue-500","translate-key":"contest_create",children:t("contest_create")})]})}),(0,W.jsx)(p.Z,{}),(0,W.jsxs)(s.Z,{sx:{padding:"20px"},children:[(0,W.jsx)(Z.Z,{"translate-key":"contest_create",children:t("contest_create")}),(0,W.jsxs)(d.Z,{direction:"column",gap:2,sx:{marginTop:"20px"},children:[(0,W.jsx)(y.Z,{fontStyle:"italic","translate-key":"contest_description_message_1",children:t("contest_description_message_1")}),(0,W.jsx)(y.Z,{fontStyle:"italic","translate-key":"contest_description_message_2",children:t("contest_description_message_2")})]}),(0,W.jsxs)(s.Z,{component:"form",className:Y,onSubmit:x((async e=>{const t={...e},{isNoEndTime:a,name:i,startTime:s,endTime:n}=t;await f({name:i,description:"",thumbnailUrl:"",startTime:s,endTime:a?null:n})})),children:[(0,W.jsx)(Q.Qr,{control:m,name:"name",rules:{required:!0},render:e=>{var a;let{field:{ref:i,...s}}=e;return(0,W.jsx)(G.Z,{error:Boolean(null===_||void 0===_?void 0:_.name),errorMessage:null===(a=_.name)||void 0===a?void 0:a.message,title:"".concat(t("contest_name")),type:"text",placeholder:t("contest_enter_contest_name"),titleRequired:!0,"translation-key":"contest_enter_contest_name",inputRef:i,width:"350px",fullWidth:!0,...s})}}),(0,W.jsx)(i.ZP,{container:!0,spacing:1,columns:12,children:(0,W.jsx)(Q.Qr,{control:m,name:"startTime",rules:{required:!0},render:e=>{let{field:{ref:a,...s}}=e;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.ZP,{item:!0,xs:4,children:(0,W.jsx)(V.Z,{"translate-key":"contest_start_time",title:t("contest_start_time"),titleRequired:!0,tooltipDescription:t("contest_start_time_tooltip")})}),(0,W.jsxs)(i.ZP,{item:!0,xs:7,children:[(0,W.jsx)(O.Z,{value:S()(s.value),onHandleValueChange:e=>{e&&j("startTime",e.toISOString())},width:"350px"}),_.startTime&&(0,W.jsx)(i.ZP,{item:!0,xs:12,children:_.startTime.message&&(0,W.jsx)(H.Z,{children:_.startTime.message||""})})]})]})}})}),(0,W.jsx)(Q.Qr,{control:m,name:"endTime",rules:{required:!0},render:e=>{let{field:{ref:a,...s}}=e;return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:4,children:(0,W.jsx)(V.Z,{"translate-key":"contest_end_time",title:t("contest_end_time"),titleRequired:!0,tooltipDescription:t("contest_end_time_tooltip")})}),(0,W.jsx)(i.ZP,{item:!0,xs:7,children:(0,W.jsxs)(d.Z,{direction:"column",gap:1,children:[(0,W.jsx)(O.Z,{value:S()(s.value),disabled:g("isNoEndTime"),onHandleValueChange:e=>{e&&j("endTime",e.toISOString())},width:"350px"}),(0,W.jsx)(Q.Qr,{control:m,name:"isNoEndTime",render:e=>{let{field:{ref:a,...i}}=e;return(0,W.jsx)(U.Z,{control:(0,W.jsx)(u.Z,{color:"primary",...i}),label:t("this_contest_has_no_end_time")})}}),_.endTime&&(0,W.jsx)(i.ZP,{item:!0,xs:12,children:_.endTime.message&&(0,W.jsx)(H.Z,{children:_.endTime.message||""})})]})})]})})}}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:(0,W.jsx)(B.Z,{loading:n,variant:"solid",type:"submit","translation-key":"common_get_started",children:t("common_get_started")})})]})]})]})})};var ae=a(95861),ie=a(65280),se=a(80007),ne=a(62614),re=a(38037);const oe=e=>{let{control:t,errors:a,setValue:s,watch:n}=e;const{t:r}=(0,N.$G)();return(0,W.jsxs)(i.ZP,{container:!0,gap:2,direction:"column",sx:{margin:"0px 20px 20px 20px",width:"calc(100% - 40px)",minHeight:"600px"},children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(re.Z,{"translate-key":"contest_forum",children:r("contest_forum")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(i.ZP,{container:!0,spacing:2,columns:12,sx:{marginTop:"5px"},children:(0,W.jsx)(Q.Qr,{control:t,name:"isDisabledForum",rules:{required:!0},render:e=>{let{field:{ref:s,...n}}=e;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:4,children:[(0,W.jsx)(V.Z,{"translate-key":"contest_is_disabled_forum",title:r("contest_is_disabled_forum")}),(0,W.jsx)(y.Z,{sx:{marginTop:"5px"},fontStyle:"italic","translate-key":"contest_is_disabled_forum_tooltip",children:r("contest_is_disabled_forum_tooltip")})]}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:7,children:(0,W.jsxs)(d.Z,{direction:"column",gap:1,children:[(0,W.jsx)(Q.Qr,{control:t,name:"isDisabledForum",render:e=>{let{field:{ref:t,...a}}=e;return(0,W.jsx)(U.Z,{control:(0,W.jsx)(u.Z,{color:"primary",...a,checked:a.value}),label:""})}}),a.isDisabledForum&&(0,W.jsx)(i.ZP,{item:!0,xs:12,children:a.isDisabledForum.message&&(0,W.jsx)(H.Z,{children:a.isDisabledForum.message||""})})]})})]})}})})})]})},le={formBody:"styles_formBody__cwJLB"};var ce=a(92556),de=a(95087);const me=e=>{let{control:t,errors:a,setValue:s,watch:n}=e;const{t:r}=(0,N.$G)(),[o,l]=(0,P.useState)([]);return(0,P.useEffect)((()=>{var e;o.length>0&&s("thumbnailUrl",(null===(e=o[0])||void 0===e?void 0:e.downloadUrl)||"")}),[o,s]),(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(i.ZP,{container:!0,gap:2,direction:"column",className:le.container,sx:{margin:"0px 20px 20px 20px",width:"calc(100% - 40px)"},children:[(0,W.jsxs)(i.ZP,{item:!0,xs:12,children:[(0,W.jsx)(re.Z,{"translate-key":"contest_details",children:r("contest_details")}),(0,W.jsx)(y.Z,{fontStyle:"italic",sx:{marginTop:"10px"},"translate-key":"contest_details_description",children:r("contest_details_description")})]}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsxs)(i.ZP,{container:!0,gap:2,direction:"column",children:[(0,W.jsx)(Q.Qr,{control:t,name:"name",rules:{required:!0},render:e=>{var t;let{field:{ref:i,...s}}=e;return(0,W.jsx)(G.Z,{error:Boolean(null===a||void 0===a?void 0:a.name),errorMessage:null===(t=a.name)||void 0===t?void 0:t.message,title:"".concat(r("contest_name")),type:"text",placeholder:r("contest_enter_contest_name"),titleRequired:!0,"translation-key":"contest_enter_contest_name",inputRef:i,width:"350px",fullWidth:!0,...s})}}),(0,W.jsx)(i.ZP,{container:!0,spacing:2,columns:12,children:(0,W.jsx)(Q.Qr,{control:t,name:"startTime",rules:{required:!0},render:e=>{let{field:{ref:t,...n}}=e;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,md:4,children:(0,W.jsx)(V.Z,{"translate-key":"contest_start_time",title:r("contest_start_time"),titleRequired:!0})}),(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:8,children:[(0,W.jsx)(O.Z,{value:S()(n.value),onHandleValueChange:e=>{e&&s("startTime",e.toISOString())},width:"350px"}),a.startTime&&(0,W.jsx)(i.ZP,{item:!0,xs:12,children:a.startTime.message&&(0,W.jsx)(H.Z,{children:a.startTime.message||""})})]})]})}})}),(0,W.jsx)(i.ZP,{container:!0,spacing:2,columns:12,children:(0,W.jsx)(Q.Qr,{control:t,name:"endTime",rules:{required:!0},render:e=>{let{field:{ref:o,...l}}=e;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,md:4,children:(0,W.jsx)(V.Z,{"translate-key":"contest_end_time",title:r("contest_end_time"),titleRequired:!0,tooltipDescription:r("contest_end_time_tooltip")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:8,children:(0,W.jsxs)(d.Z,{direction:"column",gap:1,children:[(0,W.jsx)(O.Z,{value:S()(l.value),disabled:n("isNoEndTime"),onHandleValueChange:e=>{e&&s("endTime",e.toISOString())},width:"350px"}),(0,W.jsx)(Q.Qr,{control:t,name:"isNoEndTime",render:e=>{let{field:{ref:t,...a}}=e;return(0,W.jsx)(U.Z,{control:(0,W.jsx)(u.Z,{color:"primary",...a,checked:a.value}),label:r("this_contest_has_no_end_time")})}}),a.endTime&&(0,W.jsx)(i.ZP,{item:!0,xs:12,children:a.endTime.message&&(0,W.jsx)(H.Z,{children:a.endTime.message||""})})]})})]})}})}),(0,W.jsx)(i.ZP,{container:!0,spacing:2,columns:12,children:(0,W.jsx)(Q.Qr,{control:t,name:"isPublic",rules:{required:!0},render:e=>{let{field:{ref:s,...n}}=e;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,md:4,children:(0,W.jsx)(V.Z,{"translate-key":"contest_is_public",title:r("contest_is_public"),titleRequired:!0,tooltipDescription:r("contest_is_public_tooltip")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:8,children:(0,W.jsxs)(d.Z,{direction:"column",gap:1,children:[(0,W.jsx)(Q.Qr,{control:t,name:"isPublic",render:e=>{let{field:{ref:t,...a}}=e;return(0,W.jsx)(U.Z,{control:(0,W.jsx)(u.Z,{color:"primary",...a,checked:a.value}),label:""})}}),a.isPublic&&(0,W.jsx)(i.ZP,{item:!0,xs:12,children:a.isPublic.message&&(0,W.jsx)(H.Z,{children:a.isPublic.message||""})})]})})]})}})})]})}),(0,W.jsx)(p.Z,{}),(0,W.jsxs)(i.ZP,{item:!0,xs:12,children:[(0,W.jsx)(re.Z,{"translate-key":"contest_metadata_customization",children:r("contest_metadata_customization")}),(0,W.jsx)(y.Z,{fontStyle:"italic",sx:{marginTop:"10px"},"translate-key":"contest_metadata_customization_description",children:r("contest_metadata_customization_description")})]}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsxs)(i.ZP,{container:!0,gap:5,direction:"column",children:[(0,W.jsx)(i.ZP,{container:!0,spacing:2,columns:12,sx:{marginBottom:"-20px"},children:(0,W.jsx)(Q.Qr,{control:t,name:"isPublic",rules:{required:!0},render:e=>{let{field:{ref:s,...n}}=e;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,md:4,children:(0,W.jsx)(V.Z,{"translate-key":"contest_thumbnail",title:r("contest_thumbnail")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:7,children:(0,W.jsxs)(d.Z,{direction:"column",gap:1,children:[(0,W.jsx)(Q.Qr,{control:t,name:"thumbnailUrl",rules:{required:!0},render:e=>{let{field:{ref:t,...a}}=e;return(0,W.jsx)(de.Z,{extFiles:o,setExtFiles:l,maxFileSize:5242880,accept:".bmp, .gif, .jpeg, .jpg, .png, .svg, .tif, .tiff",maxFiles:1})}}),a.thumbnailUrl&&(0,W.jsx)(i.ZP,{item:!0,xs:12,children:a.thumbnailUrl.message&&(0,W.jsx)(H.Z,{children:a.thumbnailUrl.message||""})})]})})]})}})}),(0,W.jsx)(i.ZP,{container:!0,spacing:2,columns:12,children:(0,W.jsx)(Q.Qr,{control:t,name:"isPublic",rules:{required:!0},render:e=>{let{field:{ref:n,...o}}=e;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,md:4,children:(0,W.jsx)(V.Z,{"translate-key":"common_description",title:r("common_description")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:7,children:(0,W.jsxs)(d.Z,{direction:"column",gap:1,children:[(0,W.jsx)(Q.Qr,{control:t,name:"description",render:e=>{let{field:{ref:t,...a}}=e;return(0,W.jsx)(ce.Z,{value:a.value,onChange:e=>{s("description",e)},maxLines:10})}}),a.description&&(0,W.jsx)(i.ZP,{item:!0,xs:12,children:a.description.message&&(0,W.jsx)(H.Z,{children:a.description.message||""})})]})})]})}})}),(0,W.jsx)(i.ZP,{container:!0,spacing:2,columns:12,children:(0,W.jsx)(Q.Qr,{control:t,name:"isPublic",rules:{required:!0},render:e=>{let{field:{ref:n,...o}}=e;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,md:4,children:(0,W.jsx)(V.Z,{"translate-key":"common_prizes",title:r("common_prizes")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:7,children:(0,W.jsxs)(d.Z,{direction:"column",gap:1,children:[(0,W.jsx)(Q.Qr,{control:t,name:"prizes",rules:{required:!0},render:e=>{let{field:{ref:t,...a}}=e;return(0,W.jsx)(ce.Z,{value:a.value,onChange:e=>{s("prizes",e)},maxLines:10})}}),a.prizes&&(0,W.jsx)(i.ZP,{item:!0,xs:12,children:a.prizes.message&&(0,W.jsx)(H.Z,{children:a.prizes.message||""})})]})})]})}})}),(0,W.jsx)(i.ZP,{container:!0,spacing:2,columns:12,children:(0,W.jsx)(Q.Qr,{control:t,name:"isPublic",rules:{required:!0},render:e=>{let{field:{ref:n,...o}}=e;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,md:4,children:(0,W.jsx)(V.Z,{"translate-key":"common_rules",title:r("common_rules")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:7,children:(0,W.jsxs)(d.Z,{direction:"column",gap:1,children:[(0,W.jsx)(Q.Qr,{control:t,name:"rules",rules:{required:!0},render:e=>{let{field:{ref:t,...a}}=e;return(0,W.jsx)(ce.Z,{value:a.value,onChange:e=>{s("rules",e)},maxLines:10})}}),a.rules&&(0,W.jsx)(i.ZP,{item:!0,xs:12,children:a.rules.message&&(0,W.jsx)(H.Z,{children:a.rules.message||""})})]})})]})}})}),(0,W.jsx)(i.ZP,{container:!0,spacing:2,columns:12,children:(0,W.jsx)(Q.Qr,{control:t,name:"isPublic",rules:{required:!0},render:e=>{let{field:{ref:n,...o}}=e;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,md:4,children:(0,W.jsx)(V.Z,{"translate-key":"common_scoring",title:r("common_scoring")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:7,children:(0,W.jsxs)(d.Z,{direction:"column",gap:1,children:[(0,W.jsx)(Q.Qr,{control:t,name:"scoring",rules:{required:!0},render:e=>{let{field:{ref:t,...a}}=e;return(0,W.jsx)(ce.Z,{value:a.value,onChange:e=>{s("scoring",e)},maxLines:10})}}),a.scoring&&(0,W.jsx)(i.ZP,{item:!0,xs:12,children:a.scoring.message&&(0,W.jsx)(H.Z,{children:a.scoring.message||""})})]})})]})}})}),(0,W.jsx)(i.ZP,{container:!0,spacing:2,columns:12,height:"70px"})]})})]})})};var ue=a(51629),xe=a(70501),he=a(66835),pe=a(23477),ge=a(24076),_e=a(70941),je=a(57861),fe=a(90891),Ze=a(47131);const be={formBody:"styles_formBody__+Pnep",container:"styles_container__SfjDG",icon:"styles_icon__Zatl9",iconCheck:"styles_iconCheck__LD1KI",pagination:"styles_pagination__tt9N9","table-head":"styles_table-head__+4r9Q","table-cell":"styles_table-cell__-Blhe",linkText:"styles_linkText__Nb9Eb",row1:"styles_row1__q+vMZ"};var ye=a(34923),ve=a(2135),Ce=a(25551),we=a(78819),ke=a(89990),Se=a(33099);const Pe="styles_linkText__et5wk";var Ne=a(21505),Ae=function(e){return e.ALL="ALL",e.EASY="EASY",e.MEDIUM="MEDIUM",e.HARD="HARD",e}(Ae||{});function Ie(e){let{open:t,title:a,handleClose:s,children:n,cancelText:r,confirmText:o,onHandleCancel:l,onHanldeConfirm:c,isConfirmLoading:m=!1,isReportExisted:x,currentQuestionList:h,handleAddProblem:p,handleDeleteProblem:j,...Z}=e;const{t:b}=(0,N.$G)(),[v,C]=P.useState(!0),[w,k]=P.useState(""),[S,A]=P.useState([{key:"Difficulty level",value:Ae.ALL}]),[I,T]=P.useState({codeQuestions:[],currentPage:0,totalPage:0,totalItems:0}),D=P.useCallback((async e=>{let{search:t,isPublic:a,difficulty:i,pageNo:s=0,pageSize:n=5}=e;C(!0);try{const e=await Ne.M.getAdminCodeQuestions({search:t,isPublic:a,difficulty:i,pageNo:s,pageSize:n});T({codeQuestions:e.qtypeCodeQuestions.map(((e,t)=>({id:e.id,questionId:e.question.id,no:s*n+t+1,name:e.question.name,difficulty:e.question.difficulty,isPublic:e.isPublic,maxGrade:e.maxGrade,defaultMark:e.question.defaultMark}))),currentPage:e.currentPage,totalPage:e.totalPage,totalItems:e.totalItems}),C(!1)}catch(r){console.error("error",r),C(!1)}}),[]),M=P.useCallback((()=>{var e,t;const a=null===(e=S.find((e=>"Difficulty level"===e.key)))||void 0===e?void 0:e.value,i=null===(t=S.find((e=>"Is public"===e.key)))||void 0===t?void 0:t.value;D({search:w,isPublic:i&&"ALL"!==i?"PUBLIC"===i:void 0,difficulty:a&&a!==Ae.ALL?a:void 0})}),[S,D,w]),z=P.useCallback((()=>{A([{key:"Difficulty level",value:Ae.ALL}]),D({search:w})}),[D,w]),q=[{field:"no",headerName:b("common_no"),width:100},{field:"name",headerName:b("list_problem_problem_name"),flex:1.5,renderCell:e=>(0,W.jsx)(y.Z,{fontWeight:"500",className:Pe,children:(0,W.jsx)(fe.Z,{component:ve.rU,to:"#",underline:"hover",color:"inherit",children:e.row.name})})},{field:"maxGrade",headerName:"Max grade",flex:.6,renderCell:e=>(0,W.jsx)(ye.Z,{fontWeight:600,children:e.row.maxGrade})},{field:"difficulty",headerName:b("common_difficulty_level"),flex:.6,renderCell:e=>(0,W.jsx)(ye.Z,{fontWeight:600,colorname:e.row.difficulty===Ae.EASY?"--green-500":e.row.difficulty===Ae.MEDIUM?"--orange-5":"--red-hard",children:e.row.difficulty===Ae.EASY?b("common_easy"):e.row.difficulty===Ae.MEDIUM?b("common_medium"):e.row.difficulty===Ae.HARD?b("common_hard"):e.row.difficulty})},{field:"isPublic",headerName:b("contest_is_public"),flex:.4,align:"center",renderHeader:()=>(0,W.jsx)(ye.Z,{width:"auto",sx:{textAlign:"left"},children:b("contest_is_public")}),renderCell:e=>(0,W.jsx)(u.Z,{disableRipple:!0,checked:!0===e.row.isPublic,color:e.row.isPublic?"success":"error",sx:{"&:hover":{backgroundColor:"transparent !important",cursor:"default"}}})},{field:"action",headerName:b("common_action"),type:"actions",flex:.6,renderHeader:()=>(0,W.jsx)(ye.Z,{width:"auto",sx:{textAlign:"left"},children:b("common_action")}),getActions:e=>[h.find((t=>t.questionId===e.row.questionId))?(0,W.jsx)(g.u,{label:"Remove",onClick:()=>{j(e.row.questionId)},icon:(0,W.jsxs)(d.Z,{direction:"row",gap:1,display:"flex",alignItems:"center",padding:.5,children:[(0,W.jsx)(we.Z,{htmlColor:"#EF4743"}),(0,W.jsx)(ye.Z,{fontWeight:"700",colorname:"--red-text","translate-key":"common_remove",children:b("common_remove")})]})}):(0,W.jsx)(g.u,{label:"Add",onClick:()=>{const t={codeQuestionId:e.row.id,questionId:e.row.questionId,difficulty:e.row.difficulty,name:e.row.name,questionText:"",defaultMark:e.row.defaultMark,maxGrade:e.row.maxGrade};p(t)},icon:(0,W.jsxs)(d.Z,{direction:"row",gap:1,display:"flex",alignItems:"center",padding:.5,children:[(0,W.jsx)(Ce.Z,{htmlColor:"#1976d2"}),(0,W.jsx)(ye.Z,{fontWeight:"700",colorname:"--blue-link","translate-key":"common_add",children:b("common_add")})]})})]}],[E,L]=P.useState(0),[R,F]=P.useState(5),B=I.totalItems,U=P.useCallback((e=>{var t,a;L(0);const i=null===(t=S.find((e=>"Difficulty level"===e.key)))||void 0===t?void 0:t.value,s=null===(a=S.find((e=>"Is public"===e.key)))||void 0===a?void 0:a.value;D({search:e,isPublic:s&&"ALL"!==s?"PUBLIC"===s:void 0,difficulty:i&&i!==Ae.ALL?i:void 0,pageNo:0,pageSize:R})}),[D,R,S]);return P.useEffect((()=>{D({})}),[D]),(0,W.jsx)(ke.Z,{open:t,handleClose:s,title:b("contest_import_problem_button"),actionsDisabled:!0,minWidth:"1000px",...Z,children:(0,W.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(Se.Z,{"translate-key":"contest_problem_list",children:b("contest_problem_list")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(f.Z,{isLoading:v,searchValue:w,setSearchValue:k,onHandleChange:U,numOfResults:B,filterKeyList:[{label:b("common_difficulty_level"),value:"Difficulty level"},{label:b("contest_is_public"),value:"Is public"}],filterValueList:{"Difficulty level":[{label:b("common_all"),value:Ae.ALL},{label:b("common_easy"),value:Ae.EASY},{label:b("common_medium"),value:Ae.MEDIUM},{label:b("common_hard"),value:Ae.HARD}],"Is public":[{label:b("common_all"),value:"ALL"},{label:b("common_public"),value:"PUBLIC"},{label:b("common_private"),value:"PRIVATER"}]},filters:S,handleChangeFilters:e=>{A(e)},onHandleApplyFilter:M,onHandleCancelFilter:z})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(_.Z,{loading:v,dataList:I.codeQuestions,tableHeader:q,onSelectData:(e,t)=>{},dataGridToolBar:{enableToolbar:!0},page:E,pageSize:R,totalElement:B,onPaginationModelChange:(e,t)=>{L(e.page),F(e.pageSize),D({search:w,pageNo:e.page,pageSize:e.pageSize})},showVerticalCellBorder:!1,onClickRow:e=>{},sx:{"& .MuiDataGrid-cell":{border:"none"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f5f9fb"},"& .MuiDataGrid-toolbarContainer":{backgroundColor:"#f5f9fb"}},personalSx:!0})})]})})}var Te=a(29755),De=a(57067),Me=a(39107),ze=a(75506),qe=a(94587);const Ee=e=>{let{control:t,errors:a,setValue:s,watch:n}=e;const{t:r}=(0,N.$G)(),o=(0,A.I0)(),c=n("problems"),[d,m]=(0,P.useState)(!1),[u,x]=(0,P.useState)(!1),[h,p]=(0,P.useState)(""),[g,_]=(0,P.useState)(null),[f,Z]=(0,P.useState)(!1);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Ie,{open:f,title:r("contest_add_problem_button"),handleClose:()=>{Z(!1)},maxWidth:"md",currentQuestionList:c,handleAddProblem:e=>{_(e),x(!0)},handleDeleteProblem:e=>{p(e),m(!0)}}),(0,W.jsx)(j.Z,{isOpen:d,title:r("dialog_confirm_delete_title"),description:r("dialog_confirm_delete_problem_description"),onCancel:()=>{m(!1)},onDelete:async()=>{const e=c.filter((e=>e.questionId!==h));s("problems",e),m(!1),o((0,I.kU)(r("contest_delete_problem_success")))}}),(0,W.jsx)(qe.Z,{isOpen:u,title:r("dialog_confirm_add_contest_problem_title"),description:r("dialog_confirm_add_contest_problem_description"),onCancel:()=>{x(!1),Z(!0)},onAdd:async()=>{if(x(!1),!g)return void o((0,I.lS)(r("contest_add_problem_error")));const e=[...c,g];s("problems",e),o((0,I.kU)(r("contest_add_problem_success")))}}),(0,W.jsxs)(i.ZP,{container:!0,gap:2,direction:"column",className:be.container,sx:{margin:"0px 20px 20px 20px",width:"calc(100% - 40px)",minHeight:"600px"},children:[(0,W.jsxs)(i.ZP,{item:!0,xs:12,children:[(0,W.jsx)(re.Z,{"translate-key":"contest_problems",children:r("contest_problems")}),(0,W.jsx)(y.Z,{fontStyle:"italic",sx:{marginTop:"10px"},"translate-key":"contest_problems_description",children:r("contest_problems_description")})]}),(0,W.jsxs)(Te.L,{children:[(0,W.jsx)(De.Z,{color:"primary","translate-key":"contest_add_problem_button",variant:"outlined",sx:{width:"150px"},children:r("contest_add_problem_button")}),(0,W.jsxs)(Me.Z,{color:"primary",children:[(0,W.jsx)(ze.Z,{children:r("contest_create_problem_button")}),(0,W.jsx)(ze.Z,{onClick:()=>{Z(!0)},children:r("contest_import_problem_button")})]})]}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(ue.Z,{component:xe.Z,children:(0,W.jsxs)(he.Z,{"aria-label":"custom table",children:[(0,W.jsx)(pe.Z,{className:be["table-head"],children:(0,W.jsxs)(ge.Z,{children:[(0,W.jsx)(_e.Z,{align:"left",sx:{width:"10%"},children:(0,W.jsx)(ye.Z,{fontWeight:"700","translation-key":"common_no",children:r("common_no")})}),(0,W.jsx)(_e.Z,{align:"left",sx:{width:"40%"},children:(0,W.jsx)(ye.Z,{fontWeight:"700","translation-key":"common_name",children:r("common_name")})}),(0,W.jsx)(_e.Z,{align:"left",sx:{width:"15%"},children:(0,W.jsx)(ye.Z,{fontWeight:"700","translation-key":"common_max_score",children:r("common_max_score")})}),(0,W.jsx)(_e.Z,{align:"left",sx:{width:"15%"},children:(0,W.jsx)(ye.Z,{fontWeight:"700","translation-key":"common_max_score",children:r("common_difficulty_level")})}),(0,W.jsx)(_e.Z,{align:"left",className:be.status,sx:{width:"30%"},children:(0,W.jsx)(ye.Z,{fontWeight:"700"})})]})}),(0,W.jsxs)(je.Z,{children:[c&&c.length>0&&c.map(((e,t)=>(0,W.jsxs)(ge.Z,{className:t%2===0?be.row:be.row1,children:[(0,W.jsx)(_e.Z,{align:"left",children:t+1}),(0,W.jsx)(_e.Z,{className:be.tableCell,children:(0,W.jsx)(y.Z,{fontWeight:"500",className:be.linkText,children:(0,W.jsx)(fe.Z,{component:ve.rU,to:D._.user.problem.detail.description.replace(":problemId",e.codeQuestionId),underline:"hover",color:"inherit",children:e.name})})}),(0,W.jsx)(_e.Z,{children:e.maxGrade}),(0,W.jsx)(_e.Z,{children:(0,W.jsx)(ye.Z,{fontWeight:600,colorname:"EASY"===e.difficulty?"--green-500":"MEDIUM"===e.difficulty?"--orange-5":"--red-hard",children:"EASY"===e.difficulty?r("common_easy"):"MEDIUM"===e.difficulty?r("common_medium"):"HARD"===e.difficulty?r("common_hard"):0})}),(0,W.jsx)(_e.Z,{align:"center",children:(0,W.jsx)(Ze.Z,{"translate-key":"contest_edit_problem_button",onClick:()=>{p(e.questionId),m(!0)},children:(0,W.jsx)(l.Z,{})})})]},t))),(!c||0===c.length)&&(0,W.jsx)(ge.Z,{children:(0,W.jsx)(_e.Z,{colSpan:4,sx:{textAlign:"center"},children:(0,W.jsx)(se.Z,{className:be.noList,"translation-key":"list_problem_not_found_data",children:r("list_problem_not_found_data")})})})]})]})})})]})]})},We=()=>{const{t:e}=(0,N.$G)(),{contestId:t}=(0,o.UO)(),[a,s]=(0,P.useState)(!1),[n,r]=(0,P.useState)([]),[l,c]=(0,P.useState)((()=>C.ZP.language));(0,P.useEffect)((()=>{c(C.ZP.language)}),[C.ZP.language]);const u=[{field:"no",headerName:e("common_no"),flex:.4,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("common_no")}),renderCell:e=>(0,W.jsx)(y.Z,{width:"auto",children:e.row.no})},{field:"email",headerName:e("common_email"),flex:1,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("common_email")}),renderCell:e=>(0,W.jsxs)(d.Z,{direction:"row",gap:2,alignItems:"center",justifyContent:"flex-start",margin:"5px",children:[(0,W.jsx)(m.Z,{sx:{bgcolor:"".concat((0,z.M)("".concat(e.row.email)))},alt:e.row.email,src:e.row.avatarUrl,children:e.row.email.charAt(0)}),(0,W.jsx)(y.Z,{width:"auto",fontWeight:500,children:e.row.email})]})},{field:"createdAt",headerName:e("contest_sign_up_date"),flex:1,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("contest_sign_up_date")}),renderCell:e=>(0,W.jsx)(y.Z,{width:"auto",children:(0,q.J$)(e.row.createdAt,l)})}],x=(0,P.useCallback)((async(e,t,a)=>{s(!0);try{const i=await M.c.getSignUpsOfContest(e,t,a,!1);r(i.contestUsers),s(!1)}catch(i){console.error("error",i),s(!1)}}),[]),[h,p]=(0,P.useState)(0),[g,j]=(0,P.useState)(10),f=(0,P.useMemo)((()=>n.map(((e,t)=>{var a,i;return{id:"".concat(e.contestId).concat(e.user.userId),no:t+1,email:(null===(a=e.user)||void 0===a?void 0:a.email)||"",createdAt:e.createdAt,avatarUrl:(null===(i=e.user)||void 0===i?void 0:i.avatarUrl)||""}}))),[n]);return(0,P.useEffect)((()=>{t&&x(t,h,g)}),[t,x,h,g]),t?(0,W.jsx)(i.ZP,{container:!0,gap:2,direction:"column",sx:{margin:"0px 20px 20px 20px",width:"calc(100% - 40px)",minHeight:"600px"},children:(0,W.jsx)(i.ZP,{container:!0,spacing:2,sx:{padding:"20px"},children:(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(_.Z,{loading:a,dataList:f,tableHeader:u,onSelectData:(e,t)=>{},dataGridToolBar:{enableToolbar:!0},page:h,pageSize:g,totalElement:100,onPaginationModelChange:(e,a)=>{t&&(p(e.page),j(e.pageSize),x(t,e.page,e.pageSize))},showVerticalCellBorder:!0,getRowHeight:()=>"auto",onClickRow:e=>{},sx:{"& .MuiDataGrid-cell":{border:"none"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f5f9fb"},"& .MuiDataGrid-toolbarContainer":{backgroundColor:"#f5f9fb"}},personalSx:!0})})})}):null};var Le=a(84488);const Re={};var Fe=a(22659),Be=a(82842),Ue=a(44944),Oe=a(36804),Ge=a(66713);const He=e=>"".concat(e,"%"),Ve=e=>{let{data:t,contestId:a}=e;const{t:n}=(0,N.$G)(),r=(0,o.s0)(),l=(0,P.useMemo)((()=>(e,t)=>0===t?0:e/t*100),[]),c=(0,P.useMemo)((()=>null===t||void 0===t?void 0:t.contestQuestions.map(((e,t)=>"Problem ".concat(t+1)))),[t]),m=(0,P.useMemo)((()=>null===t||void 0===t?void 0:t.contestQuestions.map((e=>l(e.numOfCorrectSubmissions||0,e.numOfSubmissions||0)))),[t,l]),u=(0,P.useMemo)((()=>t?null===t||void 0===t?void 0:t.contestQuestions.map((e=>(0,z.M)("".concat(e.questionId).concat(e.name)))):[]),[t]);return t?(0,W.jsxs)(i.ZP,{container:!0,gap:2,direction:"column",className:Re.container,sx:{margin:"0px 20px 20px 20px",width:"calc(100% - 40px)",minHeight:"600px"},children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(re.Z,{"translate-key":"common_statistics",children:n("common_statistics")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsxs)(i.ZP,{container:!0,spacing:4,children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.totalUser,alt:"online user",style:{width:"35px"}}),title:n("common_signups").toUpperCase(),value:t.numOfSignUps,mainColor:"#28a745"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.loginTodayUser,alt:"online user",style:{width:"35px"}}),title:n("common_users_submitted").toUpperCase(),value:t.numOfParticipantsHavingSubmissions,mainColor:"#dc3545"})})]})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:6,children:(0,W.jsx)(i.ZP,{container:!0,spacing:4,children:(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:12,lg:12,children:[(0,W.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,W.jsx)(b.Z,{"translate-key":"contest_details_problems_success_rates",children:n("contest_details_problems_success_rates")}),(0,W.jsx)(B.Z,{onClick:()=>{r(D._.admin.contest.submissions.replace(":contestId",a))},endDecorator:(0,W.jsx)(Ge.Z,{sx:{width:"17px"}}),"translate-key":"contest_details_view_all_submissions",children:n("contest_details_view_all_submissions")})]}),(0,W.jsx)(h.Z,{color:"neutral",variant:"outlined",sx:{marginTop:"10px",height:"500px",display:"flex",justifyContent:"center",boxShadow:"lg",paddingBottom:"10px"},children:(0,W.jsxs)(d.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:[(0,W.jsx)(Ue.v,{borderRadius:10,colors:["#42A5F5","#66BB6A"],height:320,width:900,xAxis:[{scaleType:"band",data:c,colorMap:{type:"ordinal",values:c,colors:u}}],series:[{data:m,valueFormatter:He,label:"Success Rate (%)"}],sx:{"& .MuiChartsAxis-bottom .MuiChartsAxis-line":{stroke:"var(--gray-40)",strokeWidth:.4},"& .MuiChartsAxis-left .MuiChartsAxis-line":{stroke:"white",strokeWidth:.4},"& .MuiChartsAxis-left .MuiChartsAxis-tickLabel":{strokeWidth:"0.4",fill:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"},"& .MuiChartsAxis-bottom .MuiChartsAxis-tickLabel":{strokeWidth:"0.4",fill:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"},"& .MuiChartsAxis-bottom .MuiChartsAxis-tick":{strokeWidth:"1",stroke:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"}},grid:{horizontal:!0},margin:{top:40,bottom:30},slotProps:{legend:{hidden:!0}}}),(0,W.jsx)(d.Z,{direction:"column",spacing:2,children:t.contestQuestions.map(((e,t)=>(0,W.jsx)(Oe.Z,{label:"Problem ".concat(t+1,": ").concat(e.name),color:(0,z.M)("".concat(e.questionId).concat(e.name))},t)))})]})})]})})})]}):(0,W.jsxs)(i.ZP,{container:!0,gap:2,direction:"column",className:Re.container,sx:{margin:"0px 20px 20px 20px",width:"calc(100% - 40px)",minHeight:"600px"},children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(re.Z,{"translate-key":"common_statistics",children:n("common_statistics")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsxs)(i.ZP,{container:!0,spacing:4,children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Le.Z,{variant:"rectangular",width:"100%",height:"100px",sx:{borderRadius:"10px"}})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Le.Z,{variant:"rectangular",width:"100%",height:"100px",sx:{borderRadius:"10px"}})})]})})]})},Qe="styles_formBody__ZSG6f",Ke="styles_breadcump__T7a9E",Ye="styles_breadcumpWrapper__R7SGo",$e="styles_icArrow__bYt8n",Je="styles_cursorPointer__HLN-2",Xe="styles_tabs__55ljR",et=e=>{let{isDrawerOpen:t}=e;const a=(0,P.useRef)(null),{t:i}=(0,N.$G)(),n=(0,o.s0)(),{pathname:r}=(0,o.TH)(),[l,c]=(0,P.useState)(null),{contestId:d}=(0,o.UO)(),[m,u]=(0,P.useState)(!1),x=(0,A.I0)(),[g,_]=(0,P.useState)(""),j=(0,P.useMemo)((()=>[D._.admin.contest.edit.details,D._.admin.contest.edit.problems,D._.admin.contest.edit.advanced_settings,D._.admin.contest.edit.signups,D._.admin.contest.edit.statistics]),[D._]),f=(0,P.useMemo)((()=>{if(d){const e=j.findIndex((e=>{return t=e.replace(":contestId",d),!!r.startsWith(t);var t}));return-1===e?0:e}}),[r,j]),b=(0,P.useMemo)((()=>K.Ry().shape({isNoEndTime:K.O7().required(i("contest_is_no_end_time_required")),name:K.Z_().required(i("contest_name_required")).trim(""),startTime:K.Z_().required(i("contest_start_time_required")).trim("").test("startTime",i("contest_start_time_greater_than_current_time"),(function(e){return S()(e).isAfter(S()().utc())})),endTime:K.Z_().nullable().test("endTime",i("contest_end_time_required"),(function(e){return!!this.parent.isNoEndTime||!!e})).test("endTime",i("contest_end_time_greater_than_start_time"),(function(e){return!!this.parent.isNoEndTime||S()(e).isAfter(this.parent.startTime)})),thumbnailUrl:K.Z_().trim(""),description:K.Z_().trim(""),prizes:K.Z_().trim(""),rules:K.Z_().trim(""),scoring:K.Z_().trim(""),isPublic:K.O7().required(i("contest_is_public_required")),isRestrictedForum:K.O7().default(!1),isDisabledForum:K.O7().default(!1),problems:K.IX().of(K.Ry().shape({questionId:K.Z_().required(i("contest_question_id_required")),codeQuestionId:K.Z_().required(i("contest_code_question_id_required")),difficulty:K.Z_().required(i("contest_difficulty_required")),name:K.Z_().default("").trim(""),questionText:K.Z_().default("").trim(""),defaultMark:K.Rx().default(0),maxGrade:K.Rx().default(0)})).default([])})),[i]),{control:v,handleSubmit:C,watch:w,formState:{errors:k},setValue:T,reset:z}=(0,Q.cI)({resolver:(0,R.X)(b),defaultValues:{isNoEndTime:!1,name:"",startTime:S().utc().add(30,"minute").toISOString(),endTime:S().utc().add(1,"hour").toISOString(),thumbnailUrl:"",description:"",prizes:"",rules:"",scoring:"",isPublic:!1,isRestrictedForum:!1,isDisabledForum:!1,problems:[]}}),q=(0,P.useCallback)((async e=>{try{const t=await M.c.getContestById(e);if(t){const e=t.description?t.description:"Please provide a short description of your contest here!",a=t.prizes&&""!==t.prizes?t.prizes:"- Prizes are optional. You may add any prizes that you would like to offer here.",i=t.rules&&""!==t.rules?t.rules:"- Please provide any rules for your contest here.",s=t.scoring&&""!==t.scoring?t.scoring:"- Each challenge has a pre-determined score.<br/>\n              - A participant\u2019s score depends on the number of test cases a participant\u2019s code submission successfully passes.<br/>\n              - If a participant submits more than one solution per challenge, then the participant\u2019s score will reflect the highest score achieved.<br/>\n              - Participants are ranked by score. If two or more participants achieve the same score, then the tie is broken by the total time taken to submit the last solution resulting in a higher score";z({name:t.name,startTime:t.startTime,endTime:t.endTime?t.endTime:null,isNoEndTime:!t.endTime,thumbnailUrl:t.thumbnailUrl,description:e,prizes:a,rules:i,scoring:s,isPublic:t.isPublic,isRestrictedForum:t.isRestrictedForum,isDisabledForum:t.isDisabledForum,problems:t.questions.map((e=>({questionId:e.questionId,codeQuestionId:e.codeQuestionId,difficulty:e.difficulty,name:e.name,questionText:e.questionText,defaultMark:e.defaultMark,maxGrade:e.maxGrade})))}),_(t.name)}const a=await M.c.getAdminContestDetailsStatistics(e);a&&c(a)}catch(t){console.error("error",t)}}),[z]),E=(0,P.useCallback)((async(e,t)=>{u(!0);try{await M.c.updateContest(e,{name:t.name,description:t.description,thumbnailUrl:t.thumbnailUrl,prizes:t.prizes,rules:t.rules,scoring:t.scoring,isPublic:t.isPublic,startTime:t.startTime,endTime:t.isNoEndTime?null:t.endTime,isRestrictedForum:t.isRestrictedForum,isDisabledForum:t.isDisabledForum,questionIds:t.problems.map((e=>e.questionId))})?(x((0,I.kU)("Contest updated successfully")),q(e)):x((0,I.lS)("Failed to update contest")),u(!1)}catch(a){console.error("error",a),401===a.code||403===a.code?x((0,I.lS)("You are not authorized to update this contest")):x((0,I.lS)("Failed to update contest")),u(!1)}}),[x,q]);return(0,P.useEffect)((()=>{d&&q(d)}),[d,q]),d?(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(s.Z,{component:"form",className:Qe,onSubmit:C((async e=>{d&&E(d,e)})),children:[(0,W.jsxs)(h.Z,{sx:{"& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"},margin:"20px 20px 90px 20px",gap:"20px"},children:[(0,W.jsx)(s.Z,{className:Ke,ref:a,children:(0,W.jsxs)(s.Z,{id:Ye,children:[(0,W.jsx)(y.Z,{colorname:"--blue-500",className:Je,onClick:()=>n(D._.admin.contest.root),"translation-key":"contest_management_title",children:i("contest_management_title")}),(0,W.jsx)(F.Z,{id:$e}),(0,W.jsx)(y.Z,{colorname:"--blue-500",children:g})]})}),(0,W.jsx)(p.Z,{}),(0,W.jsx)(s.Z,{sx:{margin:"20px"},children:(0,W.jsx)(Z.Z,{children:g})}),(0,W.jsx)(s.Z,{sx:{margin:"20px",borderRadius:"5px",border:"1px solid #e0e0e0"},children:(0,W.jsxs)(ae.Z,{value:f,onChange:(e,t)=>{d&&n(j[t].replace(":contestId",d))},"aria-label":"basic tabs example",className:Xe,variant:"fullWidth",children:[(0,W.jsx)(ie.Z,{sx:{textTransform:"none"},label:(0,W.jsx)(se.Z,{"translate-key":"common_details",children:i("common_details")}),value:0}),(0,W.jsx)(ie.Z,{sx:{textTransform:"none"},label:(0,W.jsx)(se.Z,{"translate-key":"common_problems",children:i("common_problems")}),value:1}),(0,W.jsx)(ie.Z,{sx:{textTransform:"none"},label:(0,W.jsx)(se.Z,{"translate-key":"common_advanced_settings",children:i("common_advanced_settings")}),value:2}),(0,W.jsx)(ie.Z,{sx:{textTransform:"none"},label:(0,W.jsx)(se.Z,{"translate-key":"common_signups",children:i("common_signups")}),value:3}),(0,W.jsx)(ie.Z,{sx:{textTransform:"none"},label:(0,W.jsx)(se.Z,{"translate-key":"common_statistics",children:i("common_statistics")}),value:4})]})}),(0,W.jsx)(s.Z,{children:(0,W.jsxs)(o.Z5,{children:[(0,W.jsx)(o.AW,{path:"details",element:(0,W.jsx)(me,{control:v,errors:k,setValue:T,watch:w})}),(0,W.jsx)(o.AW,{path:"problems",element:(0,W.jsx)(Ee,{control:v,errors:k,setValue:T,watch:w})}),(0,W.jsx)(o.AW,{path:"advanced-settings",element:(0,W.jsx)(oe,{control:v,errors:k,setValue:T,watch:w})}),(0,W.jsx)(o.AW,{path:"signups",element:(0,W.jsx)(We,{})}),(0,W.jsx)(o.AW,{path:"statistics",element:(0,W.jsx)(Ve,{data:l,contestId:d})}),(0,W.jsx)(o.AW,{path:"*",element:(0,W.jsx)(ne.Z,{})})]})})]}),(0,W.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between",position:"fixed",bottom:"0px",padding:"20px",marginLeft:"-25px",backgroundColor:"white",borderTop:"1px solid #E0E0E0",width:t?"calc(100% - 270px)":"100%"},children:[(0,W.jsx)(B.Z,{variant:"outlined","translation-key":"contest_preview_contest_details_page",onClick:()=>n(D._.user.contest.detail.information.replace(":contestId",d)),children:i("contest_preview_contest_details_page")}),(0,W.jsx)(B.Z,{loading:m,variant:"solid",type:"submit","translation-key":"common_save_changes",children:i("common_save_changes")})]})]})}):null};var tt=a(46923),at=a(17592),it=a(86659);const st="styles_drawer__nt9TU",nt="styles_img__CARKn",rt="styles_itemIcon__rdsV2";var ot=a(47477),lt=a(90200),ct=a(25614),dt=a(11163),mt=a(34180),ut=a(57838),xt=a(75918),ht=a(74839);const pt=270,gt=(0,at.ZP)("main",{shouldForwardProp:e=>"open"!==e})((e=>{let{theme:t,open:a}=e;return{flexGrow:1,width:"calc(100% - ".concat(pt,"px)"),overflow:"auto",padding:t.spacing(3),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(pt,"px"),...a&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0}}}));function _t(e){let{open:t,toggleDrawer:a,children:i}=e;const{t:n}=(0,N.$G)(),r=[{name:n("common_dashboard"),"translation-key":"common_dashboard",icon:(0,W.jsx)(ct.Z,{className:rt}),link:D._.admin.dashboard},{name:n("side_bar_contest_management"),"translation-key":"side_bar_contest_management",icon:(0,W.jsx)(ut.Z,{className:rt}),link:D._.admin.contest.root},{name:n("user_management"),"translation-key":"user_management",icon:(0,W.jsx)(dt.Z,{className:rt}),link:D._.admin.users.root},{name:n("certificate_course_management_title"),"translation-key":"certificate_course_management_title",icon:(0,W.jsx)(xt.Z,{className:rt}),link:D._.admin.certificate.root,children:[{name:n("certificate_course_list"),link:D._.admin.certificate.root},{name:n("create_certificate_course_title"),link:D._.admin.certificate.create}]},{name:n("code_management_title"),"translation-key":"code_management_title",icon:(0,W.jsx)(ht.Z,{className:rt}),link:D._.admin.code_question.root},{name:n("question_bank_management"),"translation-key":"question_bank_management",icon:(0,W.jsx)(mt.Z,{className:rt}),link:D._.admin.question_bank.root},{name:n("organization_management"),"translation-key":"organization_management",icon:(0,W.jsx)("img",{className:nt,src:Be.Z.admin.organizationIc,alt:"org ic"}),link:D._.admin.organizations.root}],o=(0,P.useRef)(null),{height:l}=(0,ot.Z)({ref:o});return(0,W.jsxs)(s.Z,{sx:{display:"flex",width:"100%",height:"100%"},children:[(0,W.jsx)(lt.Z,{toggleDrawer:a,ref:o}),(0,W.jsx)(tt.ZP,{className:st,sx:{width:pt,flexShrink:0,"& .MuiDrawer-paper":{width:pt}},variant:"persistent",anchor:"left",open:t,children:(0,W.jsx)(it.Z,{sideBarItem:r})}),(0,W.jsx)(gt,{open:t,sx:{marginTop:"".concat(l,"px"),height:"calc(100% - ".concat(l,"px)")},children:i})]})}var jt=a(27268),ft=a(72864),Zt=a(84915),bt=a(47892),yt=a(26431),vt=a(2959),Ct=a(83703),wt=a(5818),kt=a(3948),St=a(1229),Pt=a(15067),Nt=a(68919),At=a(26568),It=a(31279);const Tt=e=>{const{scaleType:t,data:a,startGradientColor:i,endGradientColor:s,series:n}=e,r=n.map(((e,t)=>e&&e.data&&0!==e.data.length?{id:t,data:e.data,label:e.label,area:e.area}:{id:t,data:[],label:"",area:!1}));return(0,W.jsx)(Nt.w,{sx:{"& .MuiChartsAxis-bottom .MuiChartsAxis-line":{stroke:"var(--gray-40)",strokeWidth:.4},"& .MuiChartsAxis-left .MuiChartsAxis-line":{stroke:"white",strokeWidth:.4},"& .MuiChartsAxis-left .MuiChartsAxis-tickLabel":{strokeWidth:"0.4",fill:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"},"& .MuiChartsAxis-bottom .MuiChartsAxis-tickLabel":{strokeWidth:"0.4",fill:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"},"& .MuiChartsAxis-bottom .MuiChartsAxis-tick":{strokeWidth:"1",stroke:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"},...i.reduce(((e,t,a)=>({...e,["& .MuiAreaElement-series-".concat(a)]:{fill:"url(#swich-color-id-".concat(a,")")}})),{})},colors:i,xAxis:[{scaleType:t,data:0!==a.length?a:[]}],yAxis:[{scaleType:"linear",disableTicks:!0}],series:r,height:320,grid:{horizontal:!0},margin:{left:30,right:20,top:40,bottom:30},slotProps:{legend:{hidden:!0}},children:0!==i.length&&0!==s.length&&i.map(((e,t)=>(0,W.jsx)(Dt,{startGradientColor:e,endGradientColor:s[t],threshold:0,id:"swich-color-id-".concat(t)},t)))})},Dt=e=>{let{threshold:t,id:a,endGradientColor:i,startGradientColor:s}=e;const{top:n,height:r,bottom:o}=(0,At.z)(),l=n+o+r,c=(0,It.Ff)()(t),d=void 0!==c?c/l:0;return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)("defs",{children:(0,W.jsxs)("linearGradient",{id:a,x1:"0",x2:"0",y1:"0",y2:"".concat(l,"px"),gradientUnits:"userSpaceOnUse",children:[(0,W.jsx)("stop",{offset:d,stopColor:s,stopOpacity:.4}),(0,W.jsx)("stop",{offset:d,stopColor:i,stopOpacity:0})]})})})};var Mt=a(89102),zt=a(33060);const qt=["#3498db","#e74c3c","#2ecc71","#f1c40f","#9b59b6"],Et=()=>{var e;const t=new Date,{t:a}=(0,N.$G)(),n=(0,St.Z)(),[r,o]=(0,P.useState)(!0),[l,c]=(0,P.useState)(0),[m,u]=(0,P.useState)(0),[x,h]=(0,P.useState)(0),[p,g]=(0,P.useState)(0),_=new Date,j=_.getMonth(),f=_.getFullYear(),[Z,b]=(0,P.useState)({totalUsers:0,activeUsers:0,offlineUsers:0,loginToday:0,registerUser:[],userByRole:[]}),[y,v]=(0,P.useState)({activeCourse:0,activeInactiveCourse:[],courseType:[],inactiveCourse:0,newCourses:void 0,recentAssignments:[],recentExam:[],totalCourse:0,totalEnrollments:0,userEnrollments:[]}),[C,w]=(0,P.useState)({totalContest:0,totalParticipants:0,activeContest:0,closedContest:0,upcomingContest:0,participantTrend:[],popularContest:[],popularContestName:[]}),[k,S]=(0,P.useState)({totalCertificateCourse:0,totalEnrollments:0,averageRating:0,totalParticipantCompletedCourse:0,enrollmentChart:[],topEnrolledCourse:[],chapterResourceType:[]}),[A,I]=(0,P.useState)(new Date(f,j+1,0).getDate()),T=[a("User"),a("Course"),a("Contest"),a("Certificate course")],D=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],z=31===A?["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"],q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],E=["Title","Course name","Type","Created at"],L=["Exam name","Course name","Created at"];return(0,P.useEffect)((()=>{(async()=>{await(async()=>{try{const e=await wt.K.getUserStatistics();b((t=>({...e,registerUser:e.registerUser.map((e=>({...e,area:!0})))})))}catch(e){console.log(e)}})(),await(async()=>{try{const e=await Pt.N.getCourseStatistics();v((t=>({...e,userEnrollments:e.userEnrollments.map((e=>({...e,area:!0}))),activeInactiveCourse:e.activeInactiveCourse.map((e=>({...e,area:!0})))})))}catch(e){console.log(e)}})(),await(async()=>{try{const e=await M.c.getAdminContestStatistics();w((t=>({...e,participantTrend:e.participantTrend.map((e=>({...e,area:!0})))})))}catch(e){console.log(e)}})(),await(async()=>{try{const e=await Mt.M.getCertificateCourseStatistics();S((t=>({...e,enrollmentChart:e.enrollmentChart.map((e=>({...e,area:!0})))})))}catch(e){console.log(e)}})()})(),o(!1)}),[]),(0,P.useEffect)((()=>{console.log(k)}),[k]),(0,W.jsxs)(W.Fragment,{children:[r&&(0,W.jsxs)(i.ZP,{container:!0,spacing:2,sx:{padding:3},children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(Le.Z,{variant:"text",sx:{fontSize:"1rem"}})}),(0,W.jsx)(i.ZP,{item:!0,xs:6,children:(0,W.jsx)(Le.Z,{variant:"text",height:50})}),(0,W.jsx)(i.ZP,{item:!0,xs:6}),(0,W.jsx)(i.ZP,{item:!0,xs:5,children:(0,W.jsx)(Le.Z,{variant:"text",sx:{fontSize:"1.5rem"}})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsxs)(i.ZP,{container:!0,spacing:4,children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,W.jsx)(Le.Z,{variant:"rounded",height:100})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,W.jsx)(Le.Z,{variant:"rounded",height:100})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,W.jsx)(Le.Z,{variant:"rounded",height:100})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,W.jsx)(Le.Z,{variant:"rounded",height:100})})]})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:12,children:(0,W.jsxs)(i.ZP,{container:!0,spacing:3,children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,md:8,children:(0,W.jsx)(Le.Z,{variant:"rounded",height:400})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:4,children:(0,W.jsx)(Le.Z,{variant:"rounded",height:400})})]})})]}),!r&&(0,W.jsxs)(i.ZP,{container:!0,spacing:2,sx:{padding:3},children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsxs)(vt.Z,{sx:{height:"200px",display:"flex",flexDirection:"column",justifyContent:"space-between",background:"linear-gradient(145deg, #EDE7F6 30%, #D1C4E9 90%)",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",color:"#333"},children:[(0,W.jsxs)(s.Z,{children:[(0,W.jsxs)(zt.Z,{colorname:"--gray-80",children:["Hello, ",null===(e=n.loggedUser)||void 0===e?void 0:e.firstName,"! Welcome back to your dashboard"]}),(0,W.jsxs)(se.Z,{colorname:"--gray-60",children:["Today is ",["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][t.getDay()-1],", ",t.getDate()," ",["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]," ",t.getFullYear()]})]}),(0,W.jsxs)(s.Z,{children:[(0,W.jsx)(se.Z,{colorname:"--gray-60",children:"What stats would you like to view today ?"}),(0,W.jsx)(ft.Z,{"aria-label":"tabs",defaultValue:l,value:l,sx:{backgroundColor:"transparent",width:"fit-content",marginTop:"5px"},onChange:(e,t)=>c(Number(t)||0),children:(0,W.jsx)(Zt.Z,{disableUnderline:!0,sx:{p:.5,gap:.5,borderRadius:"xl",bgcolor:"background.level1",["& .".concat(bt.Z.root,'[aria-selected="true"]')]:{color:"#FFF",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",bgcolor:"#2196F3"}},children:T.map(((e,t)=>(0,W.jsx)(yt.Z,{disableIndicator:!0,children:e},t)))})})]})]})}),0===l&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.ZP,{item:!0,xs:5,children:(0,W.jsx)(Se.Z,{children:"User"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsxs)(i.ZP,{container:!0,spacing:4,children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.onlineUser,alt:"online user",style:{width:"35px"}}),title:"Active user",value:Z.activeUsers,mainColor:"#28a745"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.offlineUser,alt:"online user",style:{width:"35px"}}),title:"Offline user",value:Z.offlineUsers,mainColor:"#dc3545"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.totalUser,alt:"online user",style:{width:"35px"}}),title:"Total user",value:Z.totalUsers,mainColor:"#007bff"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.loginTodayUser,alt:"online user",style:{width:"35px"}}),title:"Total login today",value:Z.loginToday,mainColor:"#ffc107"})})]})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:12,children:(0,W.jsxs)(i.ZP,{container:!0,spacing:4,children:[(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:12,lg:8,children:[(0,W.jsx)(ye.Z,{children:"User register"}),(0,W.jsxs)(vt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",display:"flex",justifyContent:"center",boxShadow:"lg"},children:[(0,W.jsxs)(d.Z,{display:"flex",justifyContent:"flex-end",direction:"row",spacing:2,children:[(0,W.jsx)(B.Z,{variant:0===m?"outlined":"plain",onClick:()=>{0!==m&&u(0)},size:"sm",children:"Week"}),(0,W.jsx)(B.Z,{variant:1===m?"outlined":"plain",onClick:()=>{1!==m&&u(1)},size:"sm",children:"Month"}),(0,W.jsx)(B.Z,{variant:2===m?"outlined":"plain",onClick:()=>{2!==m&&u(2)},size:"sm",children:"Year"})]}),(0,W.jsxs)(d.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:[(0,W.jsx)(Tt,{scaleType:"point",data:0===m?D:1===m?z:q,series:0===Z.registerUser.length?[]:0===m?[Z.registerUser[0]]:1===m?[Z.registerUser[1]]:[Z.registerUser[2]],startGradientColor:["#11B678"],endGradientColor:["#FF3143"]}),(0,W.jsx)(Oe.Z,{label:"New user",color:"#11B678"})]})]})]}),(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:12,lg:4,children:[(0,W.jsx)(ye.Z,{children:"User role"}),(0,W.jsxs)(vt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",boxShadow:"lg"},children:[(0,W.jsx)(d.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:(0,W.jsx)(kt.u,{colors:qt,series:[{data:Z.userByRole,innerRadius:10,cornerRadius:10}],height:300,sx:{maxWidth:"100%"},margin:{left:0,right:0,top:0,bottom:0},slotProps:{legend:{hidden:!0}}})}),(0,W.jsx)(i.ZP,{container:!0,spacing:2,alignItems:"center",marginTop:2,children:["User","Admin","Student Course","Lecturer","Admin course"].map(((e,t)=>(0,W.jsx)(i.ZP,{item:!0,children:(0,W.jsx)(Oe.Z,{label:e,color:qt[t]})},t)))})]})]})]})})]}),1===l&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.ZP,{item:!0,xs:5,children:(0,W.jsx)(Se.Z,{children:"Course"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsxs)(i.ZP,{container:!0,spacing:4,children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.course,alt:"Total course",style:{width:"35px"}}),title:"Total courses",value:y.totalCourse,mainColor:"#3498db"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.userEnrollment,alt:"Enrolled user",style:{width:"35px"}}),title:"Enrollments",value:y.totalEnrollments,mainColor:"#2ecc71"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.activeCourse,alt:"active course",style:{width:"35px"}}),title:"Active Courses",value:y.activeCourse,mainColor:"#f39c12"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.inactiveCourse,alt:"online user",style:{width:"35px"}}),title:"Inactive courses",value:y.inactiveCourse,mainColor:"#e74c3c"})})]})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:12,children:(0,W.jsxs)(i.ZP,{container:!0,spacing:4,children:[(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:12,lg:12,children:[(0,W.jsx)(ye.Z,{children:"Course Enrollment"}),(0,W.jsxs)(vt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",display:"flex",justifyContent:"center",boxShadow:"lg"},children:[(0,W.jsxs)(d.Z,{display:"flex",justifyContent:"flex-end",direction:"row",spacing:2,children:[(0,W.jsx)(B.Z,{variant:0===p?"outlined":"plain",onClick:()=>{0!==p&&g(0)},size:"sm",children:"Week"}),(0,W.jsx)(B.Z,{variant:1===p?"outlined":"plain",onClick:()=>{1!==p&&g(1)},size:"sm",children:"Month"}),(0,W.jsx)(B.Z,{variant:2===p?"outlined":"plain",onClick:()=>{2!==p&&g(2)},size:"sm",children:"Year"})]}),(0,W.jsxs)(d.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:[(0,W.jsx)(Tt,{data:0===p?D:1===p?z:q,series:0===y.userEnrollments.length?[]:0===p?[y.userEnrollments[0]]:1===p?[y.userEnrollments[1]]:[y.userEnrollments[2]],scaleType:"point",startGradientColor:["#11B678"],endGradientColor:["#FF3143"]}),(0,W.jsx)(Oe.Z,{label:"New Enrollment",color:"#11B678"})]})]})]}),(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:12,lg:6,children:[(0,W.jsx)(ye.Z,{children:"Active / Inactive course"}),(0,W.jsxs)(vt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",boxShadow:"lg"},children:[(0,W.jsx)(d.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:(0,W.jsx)(kt.u,{colors:qt,series:[{data:y.activeInactiveCourse,innerRadius:10,cornerRadius:10}],height:300,sx:{maxWidth:"100%"},margin:{left:0,right:0,top:0,bottom:0},slotProps:{legend:{hidden:!0}}})}),(0,W.jsxs)(i.ZP,{container:!0,spacing:2,alignItems:"center",marginTop:2,children:[(0,W.jsx)(i.ZP,{item:!0,children:(0,W.jsx)(Oe.Z,{label:"Active",color:qt[0]})}),(0,W.jsx)(i.ZP,{item:!0,children:(0,W.jsx)(Oe.Z,{label:"Inactive",color:qt[1]})})]})]})]}),(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:12,lg:6,children:[(0,W.jsx)(ye.Z,{children:"Course type"}),(0,W.jsxs)(vt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",boxShadow:"lg"},children:[(0,W.jsx)(d.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:(0,W.jsx)(kt.u,{colors:qt,series:[{data:y.courseType,innerRadius:10,cornerRadius:10}],height:300,sx:{maxWidth:"100%"},margin:{left:0,right:0,top:0,bottom:0},slotProps:{legend:{hidden:!0}}})}),(0,W.jsx)(i.ZP,{container:!0,spacing:2,alignItems:"center",marginTop:2,children:y.courseType.map(((e,t)=>(0,W.jsx)(i.ZP,{item:!0,children:(0,W.jsx)(Oe.Z,{label:e.label,color:qt[t]})},t)))})]})]}),(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:12,lg:6,children:[(0,W.jsx)(ye.Z,{children:"Recent assignment"}),(0,W.jsx)(vt.Z,{color:"neutral",variant:"outlined",sx:{boxShadow:"lg",height:"400px"},children:(0,W.jsxs)(Ct.Z,{variant:"soft",size:"lg",hoverRow:!0,sx:{backgroundColor:"#FBFCFE","& tbody tr:hover":{backgroundColor:"#f3f3f3"}},children:[(0,W.jsx)("thead",{children:(0,W.jsx)("tr",{children:E.map(((e,t)=>(0,W.jsx)("th",{style:{borderBottom:"2px solid rgb(128,128,128)"},children:(0,W.jsx)(se.Z,{fontSize:"12px",color:"#525151",fontWeight:"500",nonoverflow:!0,children:e})},t)))})}),(0,W.jsxs)("tbody",{children:[0!==y.recentAssignments.length&&(0,W.jsx)(W.Fragment,{children:y.recentAssignments.map(((e,t)=>(0,W.jsxs)("tr",{children:[(0,W.jsx)("td",{children:(0,W.jsx)(se.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",nonoverflow:!0,children:e.title})}),(0,W.jsx)("td",{children:(0,W.jsx)(se.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",nonoverflow:!0,children:e.courseName})}),(0,W.jsx)("td",{children:(0,W.jsx)(se.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",nonoverflow:!0,children:"FILE"===e.type?"File":"TEXT_ONLINE"===e.type?"Text online":"Both"})}),(0,W.jsx)("td",{children:(0,W.jsx)(se.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",nonoverflow:!0,children:new Date(e.createdAt).toLocaleDateString()})})]},t)))}),0===y.recentAssignments.length&&(0,W.jsx)("tr",{children:(0,W.jsx)(_e.Z,{colSpan:E.length,children:(0,W.jsx)(s.Z,{display:"flex",alignItems:"center",justifyContent:"center",height:"300px",children:(0,W.jsx)(se.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:"No data to display"})})})})]})]})})]}),(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:12,lg:6,children:[(0,W.jsx)(ye.Z,{children:"Recent exam"}),(0,W.jsx)(vt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",boxShadow:"lg"},children:(0,W.jsxs)(Ct.Z,{variant:"soft",size:"lg",hoverRow:!0,sx:{backgroundColor:"#FBFCFE","& tbody tr:hover":{backgroundColor:"#f3f3f3"}},children:[(0,W.jsx)("thead",{children:(0,W.jsx)("tr",{children:L.map(((e,t)=>(0,W.jsx)("th",{style:{borderBottom:"2px solid rgb(128,128,128)"},children:(0,W.jsx)(se.Z,{fontSize:"12px",color:"#525151",fontWeight:"500",children:e})},t)))})}),(0,W.jsxs)("tbody",{children:[0!==y.recentExam.length&&(0,W.jsx)(W.Fragment,{children:y.recentExam.map(((e,t)=>(0,W.jsxs)("tr",{children:[(0,W.jsx)("td",{children:(0,W.jsx)(se.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:e.examName})}),(0,W.jsx)("td",{children:(0,W.jsx)(se.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:e.courseName})}),(0,W.jsx)("td",{children:(0,W.jsx)(se.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:new Date(e.createdAt).toLocaleDateString()})})]},t)))}),0===y.recentExam.length&&(0,W.jsx)("tr",{children:(0,W.jsx)(_e.Z,{colSpan:L.length,children:(0,W.jsx)(s.Z,{display:"flex",alignItems:"center",justifyContent:"center",height:"300px",children:(0,W.jsx)(se.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:"No data to display"})})})})]})]})})]})]})})]}),2===l&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.ZP,{item:!0,xs:5,children:(0,W.jsx)(Se.Z,{children:"Contest"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsxs)(i.ZP,{container:!0,spacing:4,children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.contestDashboard,alt:"Total contest",style:{width:"35px",color:"white"}}),title:"Total contest",value:C.totalContest,mainColor:"#4CAF50"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.contestParticipant,alt:"Participant",style:{width:"35px"}}),title:"Total participants",value:C.totalParticipants,mainColor:"#2196F3"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.happeningContest,alt:"active contest",style:{width:"35px"}}),title:"Happening contest",value:C.activeContest,mainColor:"#FFEB3B"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.upcomingContest,alt:"upcomming contest",style:{width:"35px"}}),title:"Upcomming contest",value:C.upcomingContest,mainColor:"#FF9800"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.closedContest,alt:"closed contest",style:{width:"35px"}}),title:"Closed contest",value:C.closedContest,mainColor:"#F44336"})})]})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:6,children:(0,W.jsx)(i.ZP,{container:!0,spacing:4,children:(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:12,lg:12,children:[(0,W.jsx)(ye.Z,{children:"Contest Participant Trend"}),(0,W.jsx)(vt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",display:"flex",justifyContent:"center",boxShadow:"lg"},children:(0,W.jsxs)(d.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:[(0,W.jsx)(Tt,{data:q,series:0===C.participantTrend.length?[]:[C.participantTrend[0],C.participantTrend[1]],scaleType:"point",startGradientColor:["#42A5F5","#66BB6A"],endGradientColor:["#1E88E5","#43A047"]}),(0,W.jsxs)(d.Z,{direction:"row",spacing:2,children:[(0,W.jsx)(Oe.Z,{label:"Participant",color:"#42A5F5"}),(0,W.jsx)(Oe.Z,{label:"Average Participant",color:"#66BB6A"})]})]})})]})})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:6,children:(0,W.jsx)(i.ZP,{container:!0,spacing:4,children:(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:12,lg:12,children:[(0,W.jsx)(ye.Z,{children:"Popular contest"}),(0,W.jsx)(vt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",display:"flex",justifyContent:"center",boxShadow:"lg"},children:(0,W.jsxs)(d.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:[(0,W.jsx)(Ue.v,{borderRadius:10,colors:["#42A5F5","#66BB6A"],height:320,xAxis:[{scaleType:"band",data:C.popularContestName}],series:0===C.popularContest.length?[]:[{...C.popularContest[0],stack:"A",stackOffset:"none"},{...C.popularContest[1],stack:"A",stackOffset:"none"}],sx:{"& .MuiChartsAxis-bottom .MuiChartsAxis-line":{stroke:"var(--gray-40)",strokeWidth:.4},"& .MuiChartsAxis-left .MuiChartsAxis-line":{stroke:"white",strokeWidth:.4},"& .MuiChartsAxis-left .MuiChartsAxis-tickLabel":{strokeWidth:"0.4",fill:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"},"& .MuiChartsAxis-bottom .MuiChartsAxis-tickLabel":{strokeWidth:"0.4",fill:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"},"& .MuiChartsAxis-bottom .MuiChartsAxis-tick":{strokeWidth:"1",stroke:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"}},grid:{horizontal:!0},yAxis:[{scaleType:"linear",disableTicks:!0}],margin:{left:30,right:20,top:40,bottom:30},slotProps:{legend:{hidden:!0}}}),(0,W.jsxs)(d.Z,{direction:"row",spacing:2,children:[(0,W.jsx)(Oe.Z,{label:"Participant",color:"#66BB6A"}),(0,W.jsx)(Oe.Z,{label:"Submission",color:"#42A5F5"})]})]})})]})})})]}),3===l&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.ZP,{item:!0,xs:5,children:(0,W.jsx)(Se.Z,{children:"Certificate course"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsxs)(i.ZP,{container:!0,spacing:4,children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.certificateCourse,alt:"Total certificate course",style:{width:"35px"}}),title:"Total certificate course",value:k.totalCertificateCourse,mainColor:"#6A1B9A"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.certificateEnrollment,alt:"Enrollment",style:{width:"35px"}}),title:"Total enrollment",value:k.totalEnrollments,mainColor:"#2196F3"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.certificateCompleted,alt:"active contest",style:{width:"35px"}}),title:"participant completed course",value:k.totalParticipantCompletedCourse,mainColor:"#4CAF50"})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,W.jsx)(Fe.Z,{icon:(0,W.jsx)("img",{src:Be.Z.admin.certificateRating,alt:"upcomming contest",style:{width:"35px"}}),title:"Average rating",value:Number(k.averageRating.toFixed(2)),mainColor:"#FFC107"})})]})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:12,children:(0,W.jsx)(i.ZP,{container:!0,spacing:4,children:(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:12,lg:12,children:[(0,W.jsx)(ye.Z,{children:"Enrollment chart"}),(0,W.jsxs)(vt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",display:"flex",justifyContent:"center",boxShadow:"lg"},children:[(0,W.jsxs)(d.Z,{display:"flex",justifyContent:"flex-end",direction:"row",spacing:2,children:[(0,W.jsx)(B.Z,{variant:0===x?"outlined":"plain",onClick:()=>{0!==x&&h(0)},size:"sm",children:"Week"}),(0,W.jsx)(B.Z,{variant:1===x?"outlined":"plain",onClick:()=>{1!==x&&h(1)},size:"sm",children:"Month"}),(0,W.jsx)(B.Z,{variant:2===x?"outlined":"plain",onClick:()=>{2!==x&&h(2)},size:"sm",children:"Year"})]}),(0,W.jsxs)(d.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:[(0,W.jsx)(Tt,{data:0===x?D:1===x?z:q,series:0===k.enrollmentChart.length?[]:0===x?[k.enrollmentChart[0]]:1===x?[k.enrollmentChart[1]]:[k.enrollmentChart[2]],scaleType:"point",startGradientColor:["#42A5F5"],endGradientColor:["#1E88E5"]}),(0,W.jsx)(Oe.Z,{label:"New Enrollment",color:"#42A5F5"})]})]})]})})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,md:8,lg:8,children:(0,W.jsx)(i.ZP,{container:!0,spacing:4,children:(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:12,lg:12,children:[(0,W.jsx)(ye.Z,{children:"Top Enrolled Course"}),(0,W.jsx)(vt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",display:"flex",justifyContent:"center",boxShadow:"lg"},children:(0,W.jsxs)(d.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:[(0,W.jsx)(Ue.v,{borderRadius:10,colors:["#1E88E5","#1565C0"],height:320,xAxis:[{scaleType:"band",data:k.topEnrolledCourse.map((e=>e.label))}],series:0===k.topEnrolledCourse.length?[]:[{data:k.topEnrolledCourse.map((e=>e.data[0])),label:"Participant(s)"}],sx:{"& .MuiChartsAxis-bottom .MuiChartsAxis-line":{stroke:"var(--gray-40)",strokeWidth:.4},"& .MuiChartsAxis-left .MuiChartsAxis-line":{stroke:"white",strokeWidth:.4},"& .MuiChartsAxis-left .MuiChartsAxis-tickLabel":{strokeWidth:"0.4",fill:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"},"& .MuiChartsAxis-bottom .MuiChartsAxis-tickLabel":{strokeWidth:"0.4",fill:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"},"& .MuiChartsAxis-bottom .MuiChartsAxis-tick":{strokeWidth:"1",stroke:"var(--gray-40)",fontSize:12,fontFamily:"Roboto"}},grid:{horizontal:!0},yAxis:[{scaleType:"linear",disableTicks:!0}],margin:{left:30,right:20,top:40,bottom:30},slotProps:{legend:{hidden:!0}}}),(0,W.jsx)(Oe.Z,{label:"Participant",color:"#1E88E5"})]})})]})})}),(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:4,lg:4,children:[(0,W.jsx)(ye.Z,{children:"Course Resource Type"}),(0,W.jsxs)(vt.Z,{color:"neutral",variant:"outlined",sx:{height:"400px",boxShadow:"lg"},children:[(0,W.jsx)(d.Z,{direction:"column",spacing:1,alignItems:"center",sx:{width:"100%"},children:(0,W.jsx)(kt.u,{colors:qt,series:[{data:k.chapterResourceType,innerRadius:10,cornerRadius:10}],height:300,sx:{maxWidth:"100%"},margin:{left:0,right:0,top:0,bottom:0},slotProps:{legend:{hidden:!0}}})}),(0,W.jsx)(i.ZP,{container:!0,spacing:2,alignItems:"center",marginTop:2,children:k.chapterResourceType.map(((e,t)=>(0,W.jsx)(i.ZP,{item:!0,children:(0,W.jsx)(Oe.Z,{label:e.label,color:qt[t]})},t)))})]})]})]})]})]})};var Wt=a(16289),Lt=a(8344),Rt=a(1567);const Ft=()=>{const{t:e}=(0,N.$G)(),t=(0,o.s0)(),[a,s]=(0,P.useState)(""),[n,r]=(0,P.useState)((()=>C.ZP.language)),[x,w]=(0,P.useState)([{key:"Status",value:"ALL"}]),k=(0,A.v9)((e=>e.user)),[S,T]=(0,P.useState)(!1),[M,E]=(0,P.useState)(""),L=(0,A.I0)(),R=(0,P.useCallback)((async t=>{let{searchName:a,pageNo:i=0,pageSize:s=10}=t;L((0,Wt.K4)(!0));try{const e=await wt.K.getAllUser({searchName:a,pageNo:i,pageSize:s});L((0,Wt.HM)(e)),L((0,Wt.K4)(!1))}catch(n){console.error("error",n),401!==n.code&&403!==n.code||L((0,I.lS)(e("common_please_login_to_continue"))),L((0,Wt.K4)(!1))}}),[L,e]),F=(0,P.useCallback)((e=>{R({searchName:e})}),[R]),B=[{field:"email",headerName:"Email",flex:3,renderHeader:()=>(0,W.jsx)(b.Z,{nonoverflow:!0,width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:"Email"}),renderCell:e=>(0,W.jsxs)(d.Z,{direction:"row",gap:2,alignItems:"center",justifyContent:"flex-start",margin:"5px",children:[(0,W.jsx)(m.Z,{sx:{bgcolor:"".concat((0,z.M)("".concat(e.row.firstName," ").concat(e.row.lastName)))},alt:e.row.email,src:e.row.avatarUrl,children:e.row.firstName.charAt(0)}),(0,W.jsx)(y.Z,{width:"auto",fontWeight:500,children:e.row.email})]})},{field:"fullname",headerName:e("common_fullname"),flex:2,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("common_fullname")}),renderCell:e=>(0,W.jsxs)(y.Z,{width:"auto",children:[e.row.firstName," ",e.row.lastName]})},{field:"lastLogin",headerName:e("common_last_login"),flex:1,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("common_last_login")}),renderCell:e=>(0,W.jsx)(y.Z,{width:"auto",children:(0,q.J$)(e.row.lastLogin,n)})},{field:"isDeleted",headerName:e("common_is_blocked"),flex:.6,align:"center",renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("common_is_blocked")}),renderCell:e=>(0,W.jsx)(u.Z,{disableRipple:!0,checked:!0===e.row.isDeleted,color:e.row.isDeleted?"success":"error",sx:{"&:hover":{backgroundColor:"transparent !important",cursor:"default"}}})},{field:"roleName",headerName:e("common_role"),flex:1,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("common_role")}),renderCell:e=>(0,W.jsx)(y.Z,{width:"auto",children:e.row.roleName})},{field:"action",headerName:e("common_action"),type:"actions",flex:.8,renderHeader:()=>(0,W.jsx)(v.Z,{width:"auto",sx:{textAlign:"left"},children:e("common_action")}),getActions:e=>[(0,W.jsx)(g.u,{icon:(0,W.jsx)(c.Z,{}),label:"Edit",onClick:()=>{t(D._.admin.users.edit.details.replace(":userId",e.row.userId),{state:{contestName:e.row.name}})}}),(0,W.jsx)(g.u,{onClick:()=>{E(e.row.userId),T(!0)},icon:(0,W.jsx)(l.Z,{}),label:"Delete"})]}],[U,O]=(0,P.useState)(0),[G,H]=(0,P.useState)(10),V=(0,P.useMemo)((()=>k.users.totalItems||0),[k.users]),Q=(0,P.useMemo)((()=>[{name:Rt.W.ADMIN,label:e("role_system_admin")},{name:Rt.W.ADMIN_MOODLE,label:e("role_org_admin")},{name:Rt.W.LECTURER_MOODLE,label:e("role_lecturer")},{name:Rt.W.STUDENT_MOODLE,label:e("role_student")}]),[e]),K=(0,P.useCallback)((t=>{const a=Q.find((e=>null===t||void 0===t?void 0:t.roles.some((t=>(null===t||void 0===t?void 0:t.name)===e.name))));return a?a.label:e("role_user")}),[Q,e]),Y=(0,P.useMemo)((()=>k.users.users.map((e=>({id:e.userId,userId:e.userId,email:e.email,firstName:e.firstName,lastName:e.lastName,avatarUrl:e.avatarUrl,lastLogin:e.lastLogin,phone:e.phone,address:e.address,dob:e.dob,isLinkedWithGoogle:e.isLinkedWithGoogle,isLinkedWithMicrosoft:e.isLinkedWithMicrosoft,createdAt:e.createdAt,roleName:K(e),isDeleted:e.isDeleted})))),[K,k.users]),$=(0,P.useCallback)((()=>{R({searchName:a})}),[R,a]),J=(0,P.useCallback)((()=>{R({searchName:a})}),[R,a]);(0,P.useEffect)((()=>{r(C.ZP.language)}),[C.ZP.language]),(0,P.useEffect)((()=>{(async()=>{L((0,Lt.K4)(!0)),await R({searchName:""}),L((0,Lt.K4)(!1))})()}),[L,R,k.users.users]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(j.Z,{isOpen:S,title:"Confirm delete",description:"Are you sure you want to delete this user?",onCancel:()=>{T(!1)},onDelete:async()=>{wt.K.deleteUserById(M).then((e=>{L((0,I.kU)("Delete user successfully")),L((0,Wt.B4)())})).catch((e=>{console.error("error",e),L((0,I.lS)("Delete user failed"))})).finally((()=>{T(!1)}))}}),(0,W.jsxs)(h.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"}},children:[(0,W.jsx)(p.Z,{}),(0,W.jsxs)(i.ZP,{container:!0,spacing:2,sx:{padding:"20px"},children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(Z.Z,{"translate-key":"user_management",children:e("user_management")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(f.Z,{isLoading:k.isLoading,searchValue:a,setSearchValue:s,onHandleChange:F,createBtnText:e("user_create"),onClickCreate:()=>{t(D._.admin.users.create)},numOfResults:V,filterKeyList:[{label:e("common_status"),value:"Status"}],filterValueList:{Status:[{label:e("common_all"),value:"ALL"},{label:e("common_active"),value:"ACTIVE"},{label:e("common_inactive"),value:"INACTIVE"}]},filters:x,handleChangeFilters:e=>{w(e)},onHandleApplyFilter:$,onHandleCancelFilter:J})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(_.Z,{loading:k.isLoading,dataList:Y,tableHeader:B,onSelectData:(e,t)=>{},dataGridToolBar:{enableToolbar:!0},page:U,pageSize:G,totalElement:V,onPaginationModelChange:(e,t)=>{O(e.page),H(e.pageSize),R({searchName:a,pageNo:e.page,pageSize:e.pageSize})},showVerticalCellBorder:!0,getRowHeight:()=>"auto",onClickRow:e=>{console.log(e)},sx:{"& .MuiDataGrid-cell":{border:"none"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f5f9fb"},"& .MuiDataGrid-toolbarContainer":{backgroundColor:"#f5f9fb"}},personalSx:!0})})]})]})]})},Bt={formBody:"styles_formBody__JisuN",breadcump:"styles_breadcump__irmYW",phoneInput:"styles_phoneInput__AtGfs"};var Ut=a(47006),Ot=a(55181),Gt=a(28765);const Ht=()=>{var e,t,a,n,r,l,c,d,m;const{t:u}=(0,N.$G)(),x=(0,o.s0)(),[g,_]=(0,P.useState)(!1),j=(0,A.I0)(),f=(0,P.useMemo)((()=>K.Ry().shape({email:K.Z_().required(u("email_required")).email(u("email_invalid")),password:K.Z_().required(u("password_required")).matches(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,u("password_invalid")),confirmPassword:K.Z_().required(u("password_confirm_required")).matches(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,u("password_invalid")).oneOf([K.iH("password")],u("password_confirm_not_match")),firstName:K.Z_().required(u("first_name_required")),lastName:K.Z_().required(u("last_name_required")),roleName:K.Ry().shape({id:K.Z_().required(u("role_required")),name:K.Z_().required(u("role_required"))}).required(u("role_required")),phone:K.Z_().matches(/^\+?[1-9][0-9]{7,14}$/,u("phone_number_invalid")).required(u("phone_required"))})),[u]),{handleSubmit:b,control:y,formState:{errors:C},register:w}=(0,Q.cI)({resolver:(0,R.X)(f)}),k=(0,P.useCallback)((async e=>{_(!0);try{await wt.K.createUserByAdmin(e),_(!1),j((0,I.kU)("Created user successfully")),j((0,Wt.B4)()),x(D._.admin.users.root)}catch(t){console.error("error",t),j((0,I.lS)("User creation failed!!! please check your input information")),401!==t.code&&403!==t.code||j((0,I.lS)(u("common_please_login_to_continue"))),_(!1)}}),[u]),S=(0,P.useMemo)((()=>[{id:Rt.W.ADMIN,name:u("role_system_admin")},{id:Rt.W.USER,name:u("role_user")},{id:Rt.W.LECTURER_MOODLE,name:u("role_lecturer")},{id:Rt.W.STUDENT_MOODLE,name:u("role_student")},{id:Rt.W.ADMIN_MOODLE,name:u("role_org_admin")}]),[u]);return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(h.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"},gap:"20px"},children:[(0,W.jsx)(s.Z,{className:Bt.breadcump,children:(0,W.jsx)(s.Z,{id:Bt.breadcumpWrapper,children:(0,W.jsx)(Gt.Z,{breadCrumbData:[{navLink:D._.admin.users.root,label:u("user_management")}],lastBreadCrumbLabel:u("user_create")})})}),(0,W.jsx)(p.Z,{}),(0,W.jsxs)(s.Z,{sx:{padding:"20px"},children:[(0,W.jsx)(Z.Z,{"translate-key":"user_create",children:u("user_create")}),(0,W.jsxs)(s.Z,{component:"form",className:Bt.formBody,onSubmit:b((async e=>{const t={...e},a={email:t.email,password:t.password,firstName:t.firstName,lastName:t.lastName,roleName:t.roleName.id,phone:t.phone};await k(a)})),children:[(0,W.jsx)(Ot.Z,{fullWidth:!0,title:u("common_role"),name:"roleName",control:y,selectProps:{options:S},errorMessage:null===(e=C.roleName)||void 0===e||null===(t=e.id)||void 0===t?void 0:t.message}),(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:4,children:(0,W.jsx)(v.Z,{"translation-key":"common_phone",children:u("common_phone")})}),(0,W.jsxs)(i.ZP,{item:!0,xs:7,display:"flex",flexDirection:"column",gap:"10px",children:[(0,W.jsx)(Q.Qr,{control:y,name:"phone",render:e=>{let{field:t}=e;return(0,W.jsx)(Ut.ZP,{value:t.value,placeholder:"Enter phone number",onChange:t.onChange,className:Bt.phoneInput,defaultCountry:"VN"})}}),(null===(a=C.phone)||void 0===a?void 0:a.message)&&(0,W.jsx)(H.Z,{children:null===(n=C.phone)||void 0===n?void 0:n.message})]})]}),(0,W.jsx)(G.Z,{title:u("Email"),type:"text",inputRef:w("email"),errorMessage:null===C||void 0===C||null===(r=C.email)||void 0===r?void 0:r.message,width:"100%"}),(0,W.jsx)(G.Z,{title:u("first_name"),type:"text",inputRef:w("firstName"),errorMessage:null===C||void 0===C||null===(l=C.firstName)||void 0===l?void 0:l.message,width:"100%"}),(0,W.jsx)(G.Z,{title:u("last_name"),type:"text",inputRef:w("lastName"),errorMessage:null===C||void 0===C||null===(c=C.lastName)||void 0===c?void 0:c.message,width:"100%"}),(0,W.jsx)(G.Z,{title:u("common_password"),type:"password",inputRef:w("password"),errorMessage:null===C||void 0===C||null===(d=C.password)||void 0===d?void 0:d.message,width:"100%"}),(0,W.jsx)(G.Z,{title:u("common_password_confirm"),type:"password",inputRef:w("confirmPassword"),errorMessage:null===C||void 0===C||null===(m=C.confirmPassword)||void 0===m?void 0:m.message,width:"100%"}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:(0,W.jsx)(B.Z,{loading:g,variant:"solid",type:"submit","translation-key":"user_create",children:u("user_create")})})]})]})]})})},Vt={formBody:"styles_formBody__TCInU",breadcump:"styles_breadcump__49WDQ",phoneInput:"styles_phoneInput__rGLcO"};var Qt=a(3185),Kt=a(11722),Yt=(a(96304),a(23208)),$t=a(53781),Jt=a(10658),Xt=a.n(Jt),ea=a(45904);const ta=()=>{var e,t,a,n,r,l,c,d;const{t:u}=(0,N.$G)(),[x,g]=((0,o.s0)(),(0,P.useState)(!1)),_=(0,A.I0)(),j=(0,P.useMemo)((()=>K.Ry().shape({firstName:K.Z_().required(u("first_name_required")),lastName:K.Z_().required(u("last_name_required")),dob:K.Z_(),phone:K.Z_().matches(/^\+?[1-9][0-9]{7,14}$/,u("phone_number_invalid")).required(u("phone_required")),roleName:K.Ry().shape({id:K.Z_().required(),name:K.Z_().required()}).required(u("role_required"))})),[u]),{userId:f}=(0,o.UO)(),[b,y]=(0,P.useState)((()=>C.ZP.language)),[w,k]=(0,P.useState)(),S=(0,P.useMemo)((()=>[{id:Rt.W.ADMIN,name:u("role_system_admin")},{id:Rt.W.USER,name:u("role_user")},{id:Rt.W.LECTURER_MOODLE,name:u("role_lecturer")},{id:Rt.W.STUDENT_MOODLE,name:u("role_student")},{id:Rt.W.ADMIN_MOODLE,name:u("role_org_admin")}]),[u]),T=(0,P.useCallback)((e=>{const t=S.find((t=>null===e||void 0===e?void 0:e.roles.some((e=>(null===e||void 0===e?void 0:e.name)===t.id&&(null===e||void 0===e?void 0:e.name)!==Rt.W.USER))));return t||S.find((e=>e.id===Rt.W.USER))}),[S]),{handleSubmit:M,control:E,formState:{errors:L},reset:F,register:U}=(0,Q.cI)({resolver:(0,R.X)(j)});(0,P.useEffect)((()=>{y(C.ZP.language)}),[C.ZP.language]);const O=(0,P.useCallback)((async e=>{try{const t=await wt.K.getUserById(e),a=T(t);t&&(F({firstName:t.firstName,lastName:t.lastName,dob:(0,Qt.WU)(t.dob?t.dob:Date.now(),"dd-MM-yyyy"),phone:t.phone,roleName:a}),k(t))}catch(t){console.error("error",t)}}),[F,T]);(0,P.useEffect)((()=>{!w&&f&&O(f)}),[w,O,f]);const V=(0,P.useCallback)((async e=>{g(!0);try{if(!f)return;await wt.K.updateUserByAdmin(f,e),g(!1),_((0,I.kU)("Updated user successfully")),_((0,Wt.B4)())}catch(t){console.error("error",t),_((0,I.lS)("User is updated failed!!! please check your input information")),401!==t.code&&403!==t.code||_((0,I.lS)(u("common_please_login_to_continue"))),g(!1)}}),[_,u,f]);return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(h.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"},gap:"20px"},children:[(0,W.jsx)(s.Z,{className:Vt.breadcump,children:(0,W.jsx)(s.Z,{id:Vt.breadcumpWrapper,children:(0,W.jsx)(Gt.Z,{breadCrumbData:[{navLink:D._.admin.users.root,label:u("user_management")}],lastBreadCrumbLabel:u("common_account_info")})})}),(0,W.jsx)(p.Z,{}),(0,W.jsxs)(s.Z,{sx:{padding:"20px"},children:[(0,W.jsx)(Z.Z,{"translate-key":"common_account_info",children:u("common_account_info")}),(0,W.jsxs)(s.Z,{component:"form",className:Vt.formBody,onSubmit:M((async e=>{const t={...e},a={firstName:t.firstName,lastName:t.lastName,dob:t.dob?(0,Kt.Qc)(t.dob,"dd-MM-yyyy",new Date):void 0,roleName:t.roleName.id,phone:t.phone};await V(a)})),children:[(0,W.jsx)(i.ZP,{container:!0,columns:12,justifyContent:"center",children:(0,W.jsx)(m.Z,{sx:{bgcolor:"".concat((0,z.M)("".concat(null===w||void 0===w?void 0:w.firstName," ").concat(null===w||void 0===w?void 0:w.lastName))),width:150,height:150,fontSize:"60px"},alt:null===w||void 0===w?void 0:w.email,src:null===w||void 0===w?void 0:w.avatarUrl,children:null===w||void 0===w?void 0:w.firstName.charAt(0)})}),(0,W.jsx)(Ot.Z,{fullWidth:!0,title:u("common_role"),name:"roleName",control:E,selectProps:{options:S,placeholder:"Select role name"},errorMessage:null===(e=L.roleName)||void 0===e||null===(t=e.id)||void 0===t?void 0:t.message}),(null===w||void 0===w?void 0:w.organization)&&(0,W.jsx)(G.Z,{title:u("common_organization"),type:"text",disabled:!0,value:null===w||void 0===w?void 0:w.organization.name,width:"100%"}),(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:4,children:(0,W.jsx)(v.Z,{"translation-key":"common_phone",children:u("common_phone")})}),(0,W.jsxs)(i.ZP,{item:!0,xs:7,display:"flex",flexDirection:"column",gap:"10px",children:[(0,W.jsx)(Q.Qr,{control:E,name:"phone",render:e=>{let{field:t}=e;return(0,W.jsx)(Ut.ZP,{placeholder:"Enter phone number",value:t.value,onChange:t.onChange,className:Vt.phoneInput})}}),(null===(a=L.phone)||void 0===a?void 0:a.message)&&(0,W.jsx)(H.Z,{children:null===(n=L.phone)||void 0===n?void 0:n.message})]})]}),(0,W.jsx)(G.Z,{title:u("common_last_login"),type:"text",disabled:!0,value:(0,q.J$)(null===w||void 0===w?void 0:w.lastLogin,b),width:"100%"}),(0,W.jsx)(G.Z,{title:u("Email"),type:"text",disabled:!0,value:null===w||void 0===w?void 0:w.email,width:"100%"}),(0,W.jsx)(G.Z,{title:u("first_name"),type:"text",inputRef:U("firstName"),errorMessage:null===L||void 0===L||null===(r=L.firstName)||void 0===r?void 0:r.message,width:"100%"}),(0,W.jsx)(G.Z,{title:u("last_name"),type:"text",inputRef:U("lastName"),errorMessage:null===L||void 0===L||null===(l=L.lastName)||void 0===l?void 0:l.message,width:"100%"}),(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:4,children:(0,W.jsx)(v.Z,{"translation-key":"common_DOB",children:u("common_DOB")})}),(0,W.jsxs)(i.ZP,{item:!0,xs:7,children:[(0,W.jsx)(Q.Qr,{control:E,name:"dob",render:e=>{let{field:t}=e;return(0,W.jsx)(Yt._,{dateAdapter:ea.y,children:(0,W.jsx)($t.M,{label:"Date",value:Xt()(t.value,"DD/MM/YYYY"),inputRef:t.ref,onChange:e=>{null!==e&&void 0!==e&&e.isValid()&&t.onChange((0,Qt.WU)(null===e||void 0===e?void 0:e.toDate(),"dd-MM-yyyy"))}})})}}),(null===(c=L.dob)||void 0===c?void 0:c.message)&&(0,W.jsx)(H.Z,{children:null===(d=L.dob)||void 0===d?void 0:d.message})]})]}),w&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsxs)(i.ZP,{item:!0,xs:4,sx:{display:"flex",alignItems:"center"},children:[Be.Z.logo.moodleLogo&&(0,W.jsx)(m.Z,{alt:"Google",src:Be.Z.logo.googleLogo,sx:{width:"40px",height:"40px"}}),(0,W.jsx)(se.Z,{sx:{marginLeft:"5px"},children:"Google"})]}),(0,W.jsx)(i.ZP,{item:!0,xs:7,sx:{display:"flex",alignItems:"center"},children:null!==w&&void 0!==w&&w.isLinkedWithGoogle?(0,W.jsx)(se.Z,{"translation-key":"user_detail_dialog_linked",children:u("user_detail_dialog_linked")}):(0,W.jsx)(se.Z,{"translation-key":"user_detail_dialog_not_linked",children:u("user_detail_dialog_not_linked")})})]}),(0,W.jsx)(p.Z,{}),(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsxs)(i.ZP,{item:!0,xs:4,sx:{display:"flex",alignItems:"center"},children:[Be.Z.logo.moodleLogo&&(0,W.jsx)(m.Z,{alt:"Microsoft",src:Be.Z.logo.microsoftLogo,sx:{width:"40px",height:"40px"}}),(0,W.jsx)(se.Z,{sx:{marginLeft:"5px"},children:"Microsoft"})]}),(0,W.jsx)(i.ZP,{item:!0,xs:7,sx:{display:"flex",alignItems:"center"},children:null!==w&&void 0!==w&&w.isLinkedWithMicrosoft?(0,W.jsx)(se.Z,{"translation-key":"user_detail_dialog_linked",children:u("user_detail_dialog_linked")}):(0,W.jsx)(se.Z,{"translation-key":"user_detail_dialog_not_linked",children:u("user_detail_dialog_not_linked")})})]}),(0,W.jsx)(p.Z,{})]}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:(0,W.jsx)(B.Z,{loading:x,variant:"solid",type:"submit","translation-key":"user_update",children:u("user_update")})})]})]})]})})};var aa=a(90182),ia=a(90414);const sa=()=>{(0,P.useRef)(null);const{t:e}=(0,N.$G)(),t=(0,o.s0)(),[a,n]=(0,P.useState)(""),[r,u]=(0,P.useState)((()=>C.ZP.language)),[h,p]=P.useState([{key:"Status",value:"All"}]),[Z,b]=(0,P.useState)(0),[y,v]=(0,P.useState)(10),w=(0,A.v9)((e=>e.adminCertificateCourse)),k=(0,A.I0)(),S=(0,P.useCallback)((async t=>{let{searchName:a,pageNo:i=0,pageSize:s=10}=t;try{k((0,Lt.K4)(!0));const e=await Mt.M.getAllCertificateCourses({searchName:a,pageNo:i,pageSize:s});k((0,ia.fm)(e)),k((0,Lt.K4)(!1))}catch(n){console.error("error",n),401!==n.code&&403!==n.code||k((0,I.lS)(e("common_please_login_to_continue"))),k((0,Lt.K4)(!1))}}),[k,e]);(0,P.useEffect)((()=>{(async()=>{k((0,Lt.K4)(!0)),await S({}),k((0,Lt.K4)(!1))})(),console.log("certificate list",w.certificateCourses)}),[k,S]);const T=(0,P.useCallback)((e=>{S({searchName:e})}),[S]),[M,z]=(0,P.useState)(!1),[q,E]=(0,P.useState)(""),L=(0,P.useMemo)((()=>w.certificateCourses.totalItems||0),[w.certificateCourses]),R=(0,P.useMemo)((()=>w.certificateCourses.certificateCourses.map((e=>({...e,id:e.certificateCourseId})))),[w.certificateCourses]),F=(0,P.useMemo)((()=>[{field:"name",headerName:e("common_name"),renderHeader:()=>(0,W.jsx)(se.Z,{fontSize:"12px",color:"#525151",fontWeight:"500",children:e("common_name")}),flex:1,renderCell:e=>(0,W.jsxs)(d.Z,{direction:"row",gap:2,alignItems:"center",justifyContent:"flex-start",margin:"5px",children:[(0,W.jsx)(m.Z,{alt:e.row.name,src:e.row.topic.thumbnailUrl}),(0,W.jsx)(se.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:e.row.name})]})},{field:"skillLevel",headerName:e("common_skill"),renderHeader:()=>(0,W.jsx)(se.Z,{fontSize:"12px",color:"#525151",fontWeight:"500",children:e("common_skill")}),flex:.8,renderCell:e=>(0,W.jsx)(se.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:e.row.skillLevel})},{field:"programmingLanguages",headerName:e("common_programming_languages"),renderHeader:()=>(0,W.jsx)(se.Z,{fontSize:"12px",color:"#525151",fontWeight:"500",children:e("common_programming_languages")}),flex:1,renderCell:e=>{var t;return(0,W.jsx)(i.ZP,{container:!0,spacing:1,children:null===(t=e.row.topic.programmingLanguages)||void 0===t?void 0:t.map(((e,t)=>(0,W.jsx)(i.ZP,{item:!0,children:(0,W.jsx)(x.Z,{label:e.name,size:"small"},t)})))})}},{field:"avgRating",headerName:e("common_avg_rating"),renderHeader:()=>(0,W.jsx)(se.Z,{fontSize:"12px",color:"#525151",fontWeight:"500",children:e("common_avg_rating")}),flex:.3,renderCell:e=>(0,W.jsx)(se.Z,{fontSize:".875rem",color:"#212121",fontWeight:"600",children:e.row.avgRating})},{field:"action",headerName:e("common_action"),type:"actions",flex:.6,renderHeader:()=>(0,W.jsx)(se.Z,{fontSize:"12px",color:"#525151",fontWeight:"500",children:e("common_action")}),getActions:e=>[(0,W.jsx)(g.u,{icon:(0,W.jsx)(c.Z,{}),label:"Edit",onClick:()=>{}}),(0,W.jsx)(g.u,{icon:(0,W.jsx)(l.Z,{}),label:"Delete",onClick:()=>{E(e.row.certificateCourseId),z(!0)}})]}]),[]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(aa.q,{children:(0,W.jsx)("title",{children:e("certificate_course_management")})}),(0,W.jsx)(j.Z,{isOpen:M,title:e("dialog_confirm_delete_title"),description:e("dialog_confirm_delete_description"),onCancel:()=>{z(!1)},onDelete:async()=>{Mt.M.deleteCertificateCourseById(q).then((t=>{b(0),S({searchName:a,pageNo:0,pageSize:y}),k((0,I.kU)(e("delete_certificate_course_success")))})).catch((t=>{console.error("error",t),k((0,I.lS)(e("delete_certificate_course_failed")))})).finally((()=>{z(!1)}))}}),(0,W.jsx)(s.Z,{sx:{paddingLeft:"13px"},children:(0,W.jsx)(Gt.Z,{breadCrumbData:[{navLink:D._.admin.dashboard,label:"Home"}],lastBreadCrumbLabel:"Certificate Course Management"})}),(0,W.jsxs)(i.ZP,{container:!0,spacing:2,sx:{padding:"0 20px"},children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(Se.Z,{"translate-key":"certificate_course_management_title",children:e("certificate_course_management_title").toUpperCase()})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(f.Z,{isFilter:!1,isLoading:w.isLoading,searchValue:a,setSearchValue:n,onHandleChange:T,createBtnText:e("certificate_course_create_btn"),onClickCreate:()=>{t(D._.admin.certificate.create)},numOfResults:L,filters:h,handleChangeFilters:e=>{p(e)}})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(_.Z,{loading:w.isLoading,dataList:R,tableHeader:F,onSelectData:()=>{},dataGridToolBar:{enableToolbar:!0},page:Z,pageSize:y,totalElement:L,onPaginationModelChange:(e,t)=>{b(e.page),v(e.pageSize),S({searchName:a,pageNo:e.page,pageSize:e.pageSize})},showVerticalCellBorder:!1,getRowHeight:()=>"50",sx:{"&.MuiDataGrid-withBorderColor":{border:"1px solid white"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"white",borderBottom:"2px solid var(--gray-50)"},"& .MuiDataGrid-toolbarContainer":{backgroundColor:"#f5f9fb"},minHeight:"500px"},personalSx:!0})})]})]})};var na=a(47825),ra=a(19545),oa=a(51293),la=a(99140);const ca={root:"styles_root__xDdAG","tab-panel":"styles_tab-panel__WzBof",container:"styles_container__FaGsa",tabWrapper:"styles_tabWrapper__1G6+z",formBody:"styles_formBody__EDP8V",linkLevel:"styles_linkLevel__WSkd-",breadCump:"styles_breadCump__+6Hwz",stickyFooterItem:"styles_stickyFooterItem__OFfcg",phantom:"styles_phantom__D+0dg",stickyFooterContainer:"styles_stickyFooterContainer__XbfH9"};var da=a(43750),ma=a(72619),ua=a(65339),xa=a(39113),ha=a(25231),pa=a(571),ga=a(93588),_a=a(1550),ja=a(70441);function fa(e){let{open:t,title:a,questionType:s,handleChangeQuestionType:n,handleClose:r,children:o,cancelText:l,confirmText:c,onHandleCancel:d,onHanldeConfirm:m,...u}=e;const{t:x}=(0,N.$G)(),[h,p]=P.useState(Object.values(da.Z).map((e=>e.code)).some((e=>e===s)));return(0,W.jsx)(ke.Z,{open:t,handleClose:r,title:a,cancelText:l,confirmText:c,onHandleCancel:d,onHanldeConfirm:m,confirmDisabled:!h,...u,children:(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,minWidth:"450px",children:[(0,W.jsxs)(i.ZP,{item:!0,xs:6,children:[(0,W.jsx)(v.Z,{paddingBottom:"10px","translation-key":"common_question",children:x("common_question")}),(0,W.jsx)(_a.Z,{component:"fieldset",sx:{maxHeight:"200px",overflowY:"auto"},children:(0,W.jsx)(ja.Z,{ariaLabel:"question-type",value:s,handleChange:e=>{p(!0),n(e)},items:[{value:"essay",label:x("common_question_type_essay")},{value:"multiple-choice",label:x("common_question_type_multi_choice")},{value:"short-answer",label:x("common_question_type_short")},{value:"true-false",label:x("common_question_type_yes_no")},{value:"code",label:x("common_question_type_code")}],"translation-key":["common_question_type_essay","common_question_type_short","common_question_type_multi_choice","common_question_type_yes_no","common_question_type_code"]})})]}),(0,W.jsx)(i.ZP,{item:!0,xs:6,children:(0,W.jsxs)(se.Z,{"translation-key":["common_question_type_yes_no","common_question_type_multi_choice","common_question_type_short","common_question","common_question_type_essay","common_question_type_code"],children:["essay"===s&&"".concat(x("common_question_type_essay")," ").concat(x("common_question")),"multiple-choice"===s&&"".concat(x("common_question_type_multi_choice")," ").concat(x("common_question")),"short-answer"===s&&"".concat(x("common_question_type_short")," ").concat(x("common_question")),"true-false"===s&&"".concat(x("common_question_type_yes_no")," ").concat(x("common_question")),"code"===s&&"".concat(x("common_question_type_code")," ").concat(x("common_question"))]})})]})})}var Za=a(43714),ba=a(51344),ya=a(2749),va=a(80610);const Ca=()=>{var e,t,a;const i=(0,A.I0)(),n=(0,A.v9)((e=>e.questionBankCategory)),r=(0,A.v9)((e=>e.questionCategory)),m=(0,o.s0)(),{categoryId:u}=(0,o.UO)(),{t:x}=(0,N.$G)(),[h,p]=(0,P.useState)(""),[j,f]=(0,P.useState)(5),[y,v]=(0,P.useState)(0),[w,k]=(0,P.useState)(!1),[S,I]=(0,P.useState)(da.Z.essay.code),[T,M]=(0,P.useState)(!1),[z,q]=(0,P.useState)(!1),[E,L]=P.useState(!1),[R,F]=P.useState(!1),[B,U]=P.useState(!1),[O,G]=P.useState(),H=((e,t)=>t.map(((t,a)=>e[a]={...e[a],renderHeader:e=>(0,W.jsx)(se.Z,{fontWeight:700,children:t})})))([{field:"stt",sortable:!1,width:20,align:"center",headerClassName:ca["table-head"],renderCell:e=>(0,W.jsx)(se.Z,{children:e.row.stt})},{field:"questionName",sortable:!1,flex:2,headerClassName:ca["table-head"],renderCell:e=>(0,W.jsx)(se.Z,{children:e.row.name})},{field:"description",sortable:!1,flex:3,headerClassName:ca["table-head"],renderCell:e=>{var t;return(0,W.jsx)(se.Z,{children:(0,W.jsx)("div",{dangerouslySetInnerHTML:{__html:null!==(t=e.row.questionText)&&void 0!==t?t:""}})})}},{field:"qtype",sortable:!1,flex:2,headerClassName:ca["table-head"],renderCell:e=>(0,W.jsx)(se.Z,{children:e.row.qtypeText})},{field:"created",sortable:!1,flex:2,renderCell:e=>(0,W.jsxs)("div",{children:[(0,W.jsxs)(se.Z,{children:[e.row.createdBy.firstName," ",e.row.createdBy.lastName]}),(0,W.jsx)("div",{children:Xt()(e.row.createdAt).format("DD/MM/YYYY")})]}),headerClassName:ca["table-head"]},{field:"updated",sortable:!1,flex:2,renderCell:e=>(0,W.jsxs)("div",{children:[(0,W.jsxs)(se.Z,{children:[e.row.updatedBy.firstName," ",e.row.updatedBy.lastName]}),(0,W.jsx)("div",{children:Xt()(e.row.updatedAt).format("DD/MM/YYYY")})]}),headerClassName:ca["table-head"]},{field:"operation",sortable:!1,flex:2,type:"actions",cellClassName:"actions",getActions:e=>[(0,W.jsx)(g.u,{icon:(0,W.jsx)(ra.Z,{}),label:"Preview",onClick:()=>{switch(console.log(e.row,"params.row"),e.row.qtype.toString().toUpperCase()){case"MULTIPLE_CHOICE":U(!B);break;case"ESSAY":M(!T);break;case"SHORT_ANSWER":G(e.row),L(!E);break;case"TRUE_FALSE":F(!R)}}}),(0,W.jsx)(g.u,{icon:(0,W.jsx)(c.Z,{}),label:"Edit",sx:{color:"primary.main"},onClick:()=>{k(!1),m("update/".concat(S))}}),(0,W.jsx)(g.u,{icon:(0,W.jsx)(l.Z,{}),label:"Delete",className:"textPrimary",onClick:Q.bind(null,e.row.id.toString()),sx:{color:oa.Z[500]}})],headerClassName:ca["table-head"]}],x("question_bank_category_question_list_header_table",{returnObjects:!0})),V=async e=>{let{categoryId:t,isOrgQuestionBank:a=!0,search:s=h,pageNo:n=y,pageSize:r=j}=e;try{const e=await ua.a.getQuestionsByCategoryId({categoryId:t,isOrgQuestionBank:a,search:s,pageNo:n,pageSize:r});i((0,xa.kh)(e))}catch(o){console.error("Failed to fetch questions by category id",o)}},Q=async e=>{try{await ua.a.deleteQuestionById(e)&&V({categoryId:u||"",search:h,pageNo:y,pageSize:j})}catch(t){console.error("Failed to delete question",t)}};return(0,P.useEffect)((()=>{u&&((async e=>{try{const t=await pa._.getQuestionBankCategoryById(e);i((0,ha.yi)(t))}catch(t){console.log(t)}})(u),V({categoryId:u,isOrgQuestionBank:!0,search:h,pageNo:y,pageSize:j}))}),[u,h,y,j,n.tab]),(0,W.jsxs)("div",{children:[(0,W.jsx)(fa,{open:w,handleClose:()=>k(!1),"transaltion-key":"question_bank_add_question_title",title:x("question_bank_add_question_title"),cancelText:"H\u1ee7y b\u1ecf",confirmText:"Th\xeam",onHanldeConfirm:()=>{var e;k(!1);m("create/".concat(S),{state:{isAdminQuestionBank:!0,isOrgQuestionBank:!0,categoryName:null===(e=n.categoryDetails)||void 0===e?void 0:e.name}})},onHandleCancel:()=>k(!1),questionType:S,handleChangeQuestionType:I}),(0,W.jsx)(va.Z,{open:B,setOpen:U,"aria-labelledby":"customized-dialog-title1",maxWidth:"md",fullWidth:!0}),(0,W.jsx)(ma.Z,{open:T,setOpen:M,"aria-labelledby":"customized-dialog-title2",maxWidth:"md",fullWidth:!0}),(0,W.jsx)(ba.Z,{open:E,question:O,setOpen:L,"aria-labelledby":"customized-dialog-title3",maxWidth:"md",fullWidth:!0}),(0,W.jsx)(ya.Z,{open:R,setOpen:F,"aria-labelledby":"customized-dialog-title4",maxWidth:"md",fullWidth:!0}),(0,W.jsx)(s.Z,{className:ca.tabWrapper,children:(0,W.jsxs)(se.Z,{className:ca.breadCump,colorname:"--gray-50",fontWeight:"600",children:[(0,W.jsx)("span",{onClick:()=>m(D._.lecturer.question_bank.path),"translation-key":"common_question_bank",children:C.ZP.format(x("common_question_bank"),"firstUppercase")})," ","> ",(0,W.jsx)("span",{onClick:()=>m("."),children:null===(e=n.categoryDetails)||void 0===e?void 0:e.name})]})}),(0,W.jsx)(na.Z,{children:(0,W.jsxs)(d.Z,{spacing:2,marginBottom:3,paddingTop:1,children:[(0,W.jsx)(Z.Z,{fontWeight:500,children:null===(t=n.categoryDetails)||void 0===t?void 0:t.name}),(0,W.jsxs)(b.Z,{fontStyle:"italic",fontWeight:"400",colorname:"--gray-50","translation-key":"question_bank_create_category_info",children:[x("question_bank_create_category_info"),": ",null===(a=n.categoryDetails)||void 0===a?void 0:a.description]}),(0,W.jsxs)(d.Z,{direction:{xs:"column",md:"row"},spacing:1,children:[(0,W.jsx)(la.Z,{btnType:la.s.Primary,onClick:()=>k(!0),children:(0,W.jsxs)(se.Z,{paddingX:3,"translation-key":"common_add_question",children:[" ",x("common_add_question")]})}),(0,W.jsx)(la.Z,{btnType:la.s.Outlined,onClick:()=>{m("ai/create")},children:(0,W.jsx)(se.Z,{paddingX:3,"translation-key":"question_bank_category_question_list_create_by_AI",children:x("question_bank_category_question_list_create_by_AI")})})]}),(0,W.jsx)(ga.Z,{"translation-key":"question_bank_category_question_list_enter_question_name",placeHolder:"".concat(x("question_bank_category_question_list_enter_question_name")," ..."),value:h,setValue:p,options:[],onHandleChange:async e=>{p(e)}}),(0,W.jsx)(_.Z,{sx:{"& .MuiDataGrid-cell":{border:"none"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f5f9fb"},"& .MuiDataGrid-toolbarContainer":{backgroundColor:"#f5f9fb"}},dataList:r.questions.map(((e,t)=>({stt:t+1,qtypeText:e.qtype===Za.S.SHORT_ANSWER?"c\xe2u h\u1ecfi ng\u1eafn":e.qtype===Za.S.MULTIPLE_CHOICE?"c\xe2u h\u1ecfi tr\u1eafc nghi\u1ec7m":e.qtype===Za.S.ESSAY?"c\xe2u h\u1ecfi t\u1ef1 lu\u1eadn":e.qtype===Za.S.TRUE_FALSE?"c\xe2u h\u1ecfi \u0111\xfang/sai":e.qtype===Za.S.CODE?"c\xe2u h\u1ecfi code":"",...e}))),tableHeader:H,onSelectData:(e,t)=>{},dataGridToolBar:{enableToolbar:!0},page:y,pageSize:j,totalElement:r.totalItems,onPaginationModelChange:(e,t)=>{v(e.page),f(e.pageSize),u&&V({categoryId:u,isOrgQuestionBank:!0,search:h,pageNo:y,pageSize:j})},showVerticalCellBorder:!1,onClickRow:e=>{console.log(e)}})]})})]})};var wa=a(34754),ka=a(28259),Sa=a(45429),Pa=a(27271),Na=a(79091),Aa=a(94469),Ia=a(33604),Ta=a(96467),Da=a(4117),Ma=a(15305),za=a(11198);const qa={};var Ea=a(33117);const Wa=()=>{const[e,t]=(0,P.useState)(""),{t:a}=(0,N.$G)(),s=(0,A.v9)((e=>e.questionBankCategory)),n=(0,A.v9)(Ea.HF),r=(0,A.v9)((e=>e.questionBankCategory)),m=(0,A.I0)(),u=(0,o.s0)(),[x,h]=(0,P.useState)(5),[p,b]=(0,P.useState)(0),y=(0,P.useMemo)((()=>s.categories.totalItems||0),[s.categories]),[v,w]=(0,P.useState)(!1),[k,S]=(0,P.useState)(""),[T,D]=(0,P.useState)(),[M,z]=(0,P.useState)({}),[q,E]=(0,P.useState)({}),[L,R]=(0,P.useState)(!1),[F,B]=(0,P.useState)(!1),U=e=>{u("".concat(e.row.id))},O=(0,P.useCallback)((async t=>{let{search:i=e,pageNo:s=p,pageSize:n=x}=t;m((0,ha.K4)(!0));try{const e=await pa._.getQuestionBankCategories({isOrgQuestionBank:!0,search:i,pageNo:s,pageSize:n});m((0,ha.DG)(e)),m((0,ha.K4)(!1))}catch(r){console.error("error",r),401!==r.code&&403!==r.code||m((0,I.lS)(a("common_please_login_to_continue"))),m((0,ha.K4)(!1))}}),[m,a]),G=(0,P.useCallback)((e=>{O({search:e})}),[O]),H=[{field:"stt",sortable:!1,flex:.7,align:"center",headerClassName:qa["table-head"],renderCell:e=>(0,W.jsx)(se.Z,{children:e.row.stt})},{field:"category",sortable:!1,flex:2,headerClassName:qa["table-head"],renderCell:e=>(0,W.jsx)(se.Z,{children:e.row.name})},{field:"organizationName",sortable:!1,flex:2,headerClassName:qa["table-head"],renderCell:e=>(0,W.jsx)(se.Z,{children:e.row.organizationName})},{field:"created",sortable:!1,flex:2,renderCell:e=>(0,W.jsxs)("div",{children:[(0,W.jsx)(se.Z,{children:e.row.createdByName}),(0,W.jsx)("div",{children:Xt()(e.row.createdAt).format("DD/MM/YYYY HH:mm")})]}),headerClassName:qa["table-head"]},{field:"updated",sortable:!1,flex:2,renderCell:e=>(0,W.jsxs)("div",{children:[(0,W.jsx)(se.Z,{children:e.row.updatedByName}),(0,W.jsx)("div",{children:Xt()(e.row.updatedAt).format("DD/MM/YYYY HH:mm")})]}),headerClassName:qa["table-head"]},{field:"operation",sortable:!1,flex:1,type:"actions",cellClassName:"actions",getActions:e=>{let{id:t}=e;return[(0,W.jsx)(g.u,{icon:(0,W.jsx)(c.Z,{}),label:"Save",sx:{color:"primary.main"},onClick:()=>{const e=s.categories.questionBankCategories.find((e=>e.id===t));e&&(D(e),z(e),B(!0))}}),(0,W.jsx)(g.u,{icon:(0,W.jsx)(l.Z,{}),label:"Cancel",className:"textPrimary",onClick:()=>{S(t),w(!0)},sx:{color:oa.Z[500]}})]},headerClassName:qa["table-head"]}];(0,P.useEffect)((()=>{(async()=>{r.categories.questionBankCategories.length>0||(m((0,Lt.K4)(!0)),await O({search:e}),m((0,Lt.K4)(!1)))})()}),[m,O,s.categories.questionBankCategories]);const V=((e,t)=>t.map(((t,a)=>e[a]={...e[a],renderHeader:e=>(0,W.jsx)(se.Z,{fontWeight:700,children:t})})))(H,a("question_bank_category_header_table",{returnObjects:!0}));return(0,W.jsxs)("div",{children:[(0,W.jsx)(na.Z,{children:(0,W.jsxs)(d.Z,{spacing:2,marginBottom:3,paddingTop:1,children:[(0,W.jsx)(Z.Z,{fontWeight:"500","translation-key":"common_question_bank",children:C.ZP.format(a("common_question_bank"),"firstUppercase")}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(f.Z,{isLoading:r.isLoading,searchValue:e,setSearchValue:t,onHandleChange:G,createBtnText:a("common_add_new"),onClickCreate:()=>{R(!0)},numOfResults:y,isFilter:!1})}),(0,W.jsx)(_.Z,{loading:s.isLoading,dataList:s.categories.questionBankCategories.map(((e,t)=>({stt:t+1,...e}))),tableHeader:V,onSelectData:U,dataGridToolBar:{enableToolbar:!0},page:p,pageSize:x,totalElement:y,onPaginationModelChange:(t,a)=>{b(t.page),h(t.pageSize),O({search:e,pageNo:t.page,pageSize:t.pageSize})},showVerticalCellBorder:!0,onClickRow:U,sx:{"& .MuiDataGrid-cell":{border:"none"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f5f9fb"},"& .MuiDataGrid-toolbarContainer":{backgroundColor:"#f5f9fb"}},personalSx:!0})]})}),(0,W.jsxs)(Aa.Z,{"aria-labelledby":"customized-dialog-title",open:L,onClose:()=>R(!1),maxWidth:"sm",fullWidth:!0,children:[(0,W.jsx)(Ia.Z,{sx:{m:0,p:2},id:"customized-dialog-title","translation-key":"question_bank_create_category",children:a("question_bank_create_category")}),(0,W.jsx)(Ze.Z,{"aria-label":"close",sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},onClick:()=>R(!1),children:(0,W.jsx)(za.Z,{})}),(0,W.jsx)(Ta.Z,{dividers:!0,children:(0,W.jsxs)(d.Z,{spacing:1,children:[(0,W.jsx)(Ma.Z,{"translation-key":"question_bank_create_category_name",name:"Outlined",placeholder:a("question_bank_create_category_name"),onChange:e=>{E({...q,name:e.target.value})},variant:"outlined",minRows:1}),(0,W.jsx)(Ma.Z,{"transaltion-key":"question_bank_create_category_info",name:"Outlined",placeholder:a("question_bank_create_category_info"),onChange:e=>{E({...q,description:e.target.value})},variant:"outlined",minRows:4})]})}),(0,W.jsx)(Da.Z,{children:(0,W.jsx)(la.Z,{btnType:la.s.Primary,onClick:()=>R(!1),children:(0,W.jsxs)(se.Z,{"translation-key":"common_save",onClick:async()=>{try{await pa._.createQuestionBankCategory({name:(null===q||void 0===q?void 0:q.name)||"",description:(null===q||void 0===q?void 0:q.description)||"",isOrgQuestionBank:!0,createdBy:n.userId}),O({search:e})}catch(t){console.log(t)}},children:[" ",a("common_save")]})})})]}),(0,W.jsxs)(Aa.Z,{"aria-labelledby":"customized-dialog-title-edit",open:F,onClose:()=>{B(!1)},maxWidth:"sm",fullWidth:!0,children:[(0,W.jsx)(Ia.Z,{sx:{m:0,p:2},id:"customized-dialog-title-edit","translation-key":"question_bank_edit_category",children:a("question_bank_edit_category")}),(0,W.jsx)(Ze.Z,{"aria-label":"close",sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},onClick:()=>B(!1),children:(0,W.jsx)(za.Z,{})}),(0,W.jsx)(Ta.Z,{dividers:!0,children:(0,W.jsxs)(d.Z,{spacing:1,children:[(0,W.jsx)(Ma.Z,{"translation-key":"question_bank_create_category_name",name:"Outlined",defaultValue:(null===T||void 0===T?void 0:T.name)||"",onChange:e=>{z({...M,name:e.target.value})},variant:"outlined",minRows:1}),(0,W.jsx)(Ma.Z,{"transaltion-key":"question_bank_create_category_info",name:"Outlined",defaultValue:(null===T||void 0===T?void 0:T.description)||"",onChange:e=>{z({...M,description:e.target.value})},variant:"outlined",minRows:4})]})}),(0,W.jsx)(Da.Z,{children:(0,W.jsx)(la.Z,{btnType:la.s.Primary,onClick:()=>B(!1),children:(0,W.jsxs)(se.Z,{"translation-key":"common_save",onClick:async()=>{try{await pa._.updateQuestionBankCategory({id:(null===T||void 0===T?void 0:T.id)||"",name:(null===M||void 0===M?void 0:M.name)||"",description:(null===M||void 0===M?void 0:M.description)||""}),O({search:e})}catch(t){console.log(t)}},children:[" ",a("common_save")]})})})]}),(0,W.jsx)(j.Z,{isOpen:v,title:"Confirm delete",description:"Are you sure you want to delete this category?",onCancel:()=>{w(!1)},onDelete:async()=>{pa._.deleteQuestionBankCategory(k).then((()=>{m((0,I.kU)("Delete category successfully")),m((0,ha.mb)())})).catch((e=>{console.error("error",e),m((0,I.lS)("Delete category failed"))})).finally((()=>{w(!1)}))}})]})};var La=a(31825),Ra=a(65033),Fa=a(12117),Ba=a(30371),Ua=a(91603),Oa=a(45791),Ga=a(69235),Ha=a(28342),Va=a(51609),Qa=a(51050),Ka=a(41125),Ya=a(25979),$a=a(97683),Ja=a(18553),Xa=a(91861),ei=a(8397),ti=a(20290),ai=a(1716),ii=a(28502);const si=e=>{const{t:t}=(0,N.$G)(),{field:a,removeChapter:n,control:r,register:o,parentIndex:l,provided:c,isDragging:m,watch:u,errors:x,setValue:h}=e,[g,_]=(0,P.useState)(!1),[j,f]=(0,P.useState)(!0),{fields:Z,append:b,remove:y,move:v}=(0,Q.Dq)({control:r,name:"chapters.".concat(l,".resources")}),[C,w]=(0,P.useState)("Chapter "+l);(0,P.useEffect)((()=>{_(!m)}),[m]),(0,P.useEffect)((()=>{const e=u("chapters.".concat(l,".title"));w(e&&""!==e?e:"Chapter "+l)}),[u("chapters.".concat(l,".title"))]),(0,P.useEffect)((()=>{j&&!m&&_(!0)}),[j]);return(0,W.jsxs)(W.Fragment,{children:[!m&&(0,W.jsxs)(s.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-start",marginBottom:"10px",children:[(0,W.jsx)(Xa.ZP,{variant:j?"soft":"solid",onClick:()=>{f(!j)},color:"primary",children:j?(0,W.jsx)(ei.Z,{}):(0,W.jsx)(ti.Z,{})}),(0,W.jsx)(Xa.ZP,{variant:"soft",sx:{marginLeft:"10px"},color:"danger",onClick:()=>{n()},children:(0,W.jsx)(Ka.Z,{})})]}),(0,W.jsxs)(d.Z,{direction:"row",display:"flex",alignItems:"center",spacing:1,flex:1,sx:{width:"100%"},children:[m&&(0,W.jsx)("div",{...c.dragHandleProps,children:(0,W.jsx)(ai.Z,{})}),(0,W.jsxs)(vt.Z,{variant:"soft",color:"neutral",sx:{flexGrow:1,padding:"10px",display:"flex",justifyContent:"space-between",flexDirection:"row","&:hover":{cursor:m?"":"pointer",backgroundColor:"var(--blue-light-4)"}},onClick:()=>{!m&&_(!g)},"translation-key":"question_management_answer",children:[(0,W.jsx)(se.Z,{fontWeight:"600",colorname:"--eerie-black",children:C}),g?(0,W.jsx)(Va.Z,{}):(0,W.jsx)(Ha.Z,{})]})]}),(0,W.jsxs)(Ra.Z,{in:g,timeout:"auto",children:[j&&(0,W.jsxs)(i.ZP,{container:!0,spacing:2,sx:{marginBottom:"40px",marginTop:"5px"},children:[(0,W.jsx)(i.ZP,{item:!0,sm:12,md:6,children:(0,W.jsx)(Q.Qr,{control:r,name:"chapters.".concat(l,".title"),render:e=>{var t,a,i,s,n;let{field:{ref:r,...o}}=e;return(0,W.jsx)(Ua.Z,{error:Boolean(null===x||void 0===x||null===(t=x.chapters)||void 0===t||null===(a=t[l])||void 0===a?void 0:a.title),errorMessage:null===x||void 0===x||null===(i=x.chapters)||void 0===i||null===(s=i[l])||void 0===s||null===(n=s.title)||void 0===n?void 0:n.message,useDefaultTitleStyle:!0,title:"Chapter Title",inputRef:r,type:"text",placeholder:"Enter Chapter Title",titleRequired:!0,"translation-key":["chapter_title","enter_chapter_title"],...o})}})}),(0,W.jsxs)(i.ZP,{item:!0,sm:12,md:6,children:[(0,W.jsx)(V.Z,{"translation-key":"chapter_description_title",title:"Chapter Description".concat(" "),titleRequired:!0,fontSize:"12px",color:"var(--gray-60)",gutterBottom:!0,fontWeight:"600"}),(0,W.jsx)(Q.Qr,{control:r,name:"chapters.".concat(l,".description"),render:e=>{let{field:t}=e;return(0,W.jsx)(ce.Z,{title:"Chapter Description",openDialog:!0,roundedBorder:!0,error:!1,placeholder:"Enter Chapter Description",required:!0,"translation-key":"enter_chapter_description",maxLines:10,...t})}})]})]}),j&&(0,W.jsx)(la.Z,{margin:"5px 0",variant:"outlined",colorName:"var(--blue-light)",borderRadius:"12px",startIcon:(0,W.jsx)(Ga.Z,{}),onClick:()=>{b({no:Z.length,resourceType:Qa.H.LESSON,title:"",lessonHtml:"",questionId:"",youtubeVideoUrl:""})},children:(0,W.jsx)(se.Z,{fontSize:"12px",fontWeight:"500",colorname:"--blue-light-1",children:t("add_chapter_resource")})}),0!==Z.length&&(0,W.jsx)(vt.Z,{sx:{marginTop:"10px"},children:(0,W.jsx)(ii.Z5,{onDragEnd:e=>{const t=e.source,a=e.destination;console.log("source: %s, destination: %s",t.index,a.index),a&&(v(t.index,a.index),Z.forEach(((e,t)=>{h("chapters.".concat(l,".resources.").concat(t,".no"),t)})))},children:(0,W.jsx)(ii.bK,{droppableId:"resource",children:e=>(0,W.jsx)(d.Z,{spacing:2,...e.droppableProps,ref:e.innerRef,children:Z.map(((e,t)=>(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(ii._l,{draggableId:"item-resource-".concat(t),index:t,children:(a,i)=>(0,W.jsxs)("div",{ref:a.innerRef,...a.draggableProps,children:[(0,W.jsx)("div",{...a.dragHandleProps,children:(0,W.jsx)(ai.Z,{})}),(0,W.jsx)(ni,{errors:x,watch:u,parentIndex:l,isEditting:j,index:t,removeResource:()=>(e=>{y(e);const t=u("chapters.".concat(l,".resources"));null===t||void 0===t||t.forEach(((e,t)=>{h("chapters.".concat(l,".resources.").concat(t,".no"),t)}))})(t),control:r,register:o})]},e.id)},"resources[".concat(t,"]")),t!==Z.length-1&&(0,W.jsx)(p.Z,{})]})))})})})})]})]})},ni=e=>{const{isEditting:t,removeResource:a,index:n,control:r,register:o,parentIndex:l,watch:c,errors:m}=e,{t:u}=(0,N.$G)(),x=(0,P.useMemo)((()=>Object.values(Qa.H).map((e=>({label:u(e),value:e})))),[u]),[h,p]=(0,P.useState)(Qa.H.LESSON),[g,_]=(0,P.useState)("Resource "+n);return(0,P.useEffect)((()=>{const e=c("chapters.".concat(l,".resources.").concat(n,".title"));_(e&&""!==e?e:"Resource "+n)}),[c("chapters.".concat(l,".resources.").concat(n,".title"))]),(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(d.Z,{children:[(0,W.jsx)(s.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end",children:(0,W.jsx)(Xa.ZP,{variant:"soft",sx:{marginLeft:"10px"},color:"danger",onClick:()=>{a()},children:(0,W.jsx)(Ka.Z,{})})}),(0,W.jsx)(i.ZP,{container:!0,spacing:2,children:t&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(i.ZP,{item:!0,xs:6,children:(0,W.jsx)(Q.Qr,{name:"chapters.".concat(l,".resources.").concat(n,".title"),control:r,render:e=>{var t,a,i,s,r,o,c,d,x;let{field:{ref:h,...p}}=e;return(0,W.jsx)(Ua.Z,{error:Boolean(null===m||void 0===m||null===(t=m.chapters)||void 0===t||null===(a=t[l])||void 0===a||null===(i=a.resources)||void 0===i||null===(s=i[n])||void 0===s?void 0:s.title),errorMessage:null===m||void 0===m||null===(r=m.chapters)||void 0===r||null===(o=r[l])||void 0===o||null===(c=o.resources)||void 0===c||null===(d=c[n])||void 0===d||null===(x=d.title)||void 0===x?void 0:x.message,inputRef:h,useDefaultTitleStyle:!0,title:"".concat(u("chapter_resource_title")),type:"text",placeholder:u("enter_chapter_resource_title"),titleRequired:!0,"translation-key":["chapter_resource_title","enter_chapter_resource_title"],...p})}})}),(0,W.jsxs)(i.ZP,{item:!0,xs:6,children:[(0,W.jsx)(V.Z,{"translation-key":"resource_type_title",title:"".concat(u("resource_type_title")," "),titleRequired:!0,fontSize:"12px",color:"var(--gray-60)",gutterBottom:!0,fontWeight:"600"}),(0,W.jsx)(Q.Qr,{name:"chapters.".concat(l,".resources.").concat(n,".resourceType"),control:r,defaultValue:x[0].value,render:e=>{let{field:{onChange:t,value:a}}=e;return(0,W.jsx)(Oa.Z,{value:a,onChange:e=>{t(e),p(e)},options:x})}})]}),(0,W.jsxs)(i.ZP,{item:!0,xs:12,children:[h===Qa.H.LESSON&&(0,W.jsx)(Q.Qr,{name:"chapters.".concat(l,".resources.").concat(n,".lessonHtml"),control:r,render:e=>{let{field:t}=e;return(0,W.jsx)(ce.Z,{title:"Lesson",openDialog:!0,roundedBorder:!0,error:!1,placeholder:"Enter Lesson",required:!0,"translation-key":"enter_lesson",maxLines:10,...t})}}),h===Qa.H.VIDEO&&(0,W.jsx)(W.Fragment,{children:"VIDEO"}),h===Qa.H.CODE&&(0,W.jsx)(W.Fragment,{children:"QUESTION"})]})]})}),!t&&(0,W.jsxs)(d.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,W.jsx)(s.Z,{sx:{backgroundColor:h===Qa.H.LESSON?"#E3F2FD":h===Qa.H.VIDEO?"#FFEBEE":"#E8F5E9",borderRadius:"8px",display:"flex",justifyContent:"center",alignItems:"center",width:"fit-content",padding:"10px"},children:h===Qa.H.LESSON?(0,W.jsx)(Ja.Z,{sx:{color:"#1976D2"}}):h===Qa.H.VIDEO?(0,W.jsx)(Ya.Z,{sx:{color:"#D32F2F"}}):(0,W.jsx)($a.Z,{sx:{color:"#388E3C"}})}),(0,W.jsx)(se.Z,{fontWeight:"600",colorname:"--eerie-black",children:g})]})]})})},ri=()=>{var e;const{t:t}=(0,N.$G)(),[a,n]=(0,P.useState)([]),[r,o]=(0,P.useState)(!0),[l,c]=(0,P.useState)(!1),m=[{navLink:D._.admin.dashboard,label:"Home"},{navLink:D._.admin.certificate.root,label:"Certificate Course Management"}];(0,P.useEffect)((()=>{(async()=>{(async()=>{try{const e=await Ba.r.getTopics({pageNo:0,pageSize:999999,fetchAll:!0});n(e.topics),200===e.status&&console.log(e)}catch(e){console.error("error",e)}})(),o(!1)})()}),[]);const u=(0,P.useMemo)((()=>Object.values(Fa.$).map((e=>({label:t(e),value:e})))),[t]),x=(0,P.useMemo)((()=>K.Ry().shape({name:K.Z_().required(t("certificate_course_name_required")),description:K.Z_(),skillLevel:K.Z_().required(t("skill_level_required")),topicId:K.Z_().required(t("topic_required")),chapters:K.IX().of(K.Ry().shape({no:K.Rx().required(),title:K.Z_().required(t("chapter_title_required")),description:K.Z_(),resources:K.IX().of(K.Ry().shape({no:K.Rx().required(),resourceType:K.Z_().required(),title:K.Z_().required(t("resource_title_required")),questionId:K.Z_(),lessonHtml:K.Z_(),youtubeVideoUrl:K.Z_()})).required()}))})),[t]),{register:h,control:g,handleSubmit:_,trigger:j,setValue:f,watch:Z,formState:{errors:b}}=(0,Q.cI)({resolver:(0,R.X)(x)}),{fields:y,append:v,remove:C,move:w}=(0,Q.Dq)({control:g,name:"chapters"});console.log("error:",b),console.log("fields",y);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(aa.q,{children:(0,W.jsx)("title",{children:t("create_certificate_course")})}),(0,W.jsx)("form",{onSubmit:_((async e=>{console.log("data",e)})),children:(0,W.jsxs)(na.Z,{children:[(0,W.jsx)(s.Z,{sx:{paddingLeft:"13px"},children:(0,W.jsx)(Gt.Z,{breadCrumbData:m,lastBreadCrumbLabel:"Create Certificate Course"})}),(0,W.jsxs)(i.ZP,{container:!0,spacing:4,sx:{padding:"0 20px"},children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(Se.Z,{"translate-key":"create_certificate_course_title",children:t("create_certificate_course_title").toUpperCase()})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(vt.Z,{variant:"soft",color:"primary",sx:{padding:"10px"},children:(0,W.jsx)(se.Z,{fontWeight:"600",colorname:"--blue-2",children:t("common_general").toUpperCase()})})}),(0,W.jsx)(i.ZP,{item:!0,sm:12,md:6,children:(0,W.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(Q.Qr,{defaultValue:"",control:g,name:"name",render:e=>{var a;let{field:{ref:i,...s}}=e;return(0,W.jsx)(Ua.Z,{useDefaultTitleStyle:!0,error:Boolean(null===b||void 0===b?void 0:b.name),errorMessage:null===(a=b.name)||void 0===a?void 0:a.message,title:"".concat(t("certificate_course_name")),type:"text",placeholder:t("enter_certificate_course_name"),titleRequired:!0,"translation-key":["certificate_course_name","enter_certificate_course_name"],inputRef:i,...s})}})}),(0,W.jsxs)(i.ZP,{item:!0,xs:12,children:[(0,W.jsx)(V.Z,{"translation-key":"certificate_course_skill_level_title",title:"".concat(t("certificate_course_skill_level_title")," "),titleRequired:!0,fontSize:"12px",color:"var(--gray-60)",gutterBottom:!0,fontWeight:"600"}),(0,W.jsx)(Q.Qr,{name:"skillLevel",control:g,defaultValue:u[0].value,render:e=>{let{field:{onChange:t,value:a}}=e;return(0,W.jsx)(Oa.Z,{value:a,onChange:t,options:u})}})]}),(0,W.jsxs)(i.ZP,{item:!0,xs:12,children:[(0,W.jsx)(V.Z,{"translation-key":"certificate_course_topic_title",title:"".concat(t("certificate_course_topic_title")," "),titleRequired:!0,fontSize:"12px",color:"var(--gray-60)",gutterBottom:!0,fontWeight:"600"}),(0,W.jsx)(Q.Qr,{name:"topicId",control:g,defaultValue:null===(e=a[0])||void 0===e?void 0:e.topicId,render:e=>{let{field:{onChange:t,value:i}}=e;return(0,W.jsx)(Oa.Z,{value:i,onChange:t,options:a.map((e=>({label:e.name,value:e.topicId})))})}})]})]})}),(0,W.jsxs)(i.ZP,{item:!0,sm:12,md:6,children:[(0,W.jsx)(V.Z,{"translation-key":"certificate_course_description_title",title:"".concat(t("certificate_course_description_title")," "),titleRequired:!0,fontSize:"12px",color:"var(--gray-60)",gutterBottom:!0,fontWeight:"600"}),(0,W.jsx)(Q.Qr,{defaultValue:"",control:g,name:"description",render:e=>{let{field:a}=e;return(0,W.jsx)(ce.Z,{title:t("certificate_course_description_title"),openDialog:!0,roundedBorder:!0,error:Boolean(null===b||void 0===b?void 0:b.description),placeholder:"".concat(t("enter_certificate_course_description_title"),"..."),required:!0,"translation-key":"enter_certificate_course_description_title",maxLines:10,...a})}})]}),(0,W.jsxs)(i.ZP,{item:!0,xs:12,children:[(0,W.jsx)(vt.Z,{variant:"soft",color:"primary",sx:{padding:"10px",marginTop:"30px"},children:(0,W.jsx)(se.Z,{fontWeight:"600",colorname:"--blue-2",children:t("common_detail").toUpperCase()})}),(0,W.jsx)(la.Z,{margin:"10px 0",variant:"outlined",colorName:"var(--blue-selected)",borderRadius:"12px",startIcon:(0,W.jsx)(Ga.Z,{sx:{color:"var(--blue-selected)",fontSize:"12px"}}),onClick:()=>{v({no:y.length,title:"",resources:[]})},children:(0,W.jsx)(se.Z,{fontSize:"12px",fontWeight:"500",colorname:"--blue-light-1",children:t("common_add_chapter")})}),(0,W.jsx)(la.Z,{margin:"10px 0 10px 10px",variant:l?"contained":"outlined",borderRadius:"12px",startIcon:(0,W.jsx)(ai.Z,{sx:{color:l?"var(--ghost-white)":"var(--blue-selected)",fontSize:"12px"}}),onClick:()=>c(!l),boxShadow:"0",children:(0,W.jsx)(se.Z,{fontSize:"12px",fontWeight:"500",colorname:l?"--ghost-white":"--blue-selected",children:t(l?"disable_drag_drop_chapter":"enable_drag_drop_chapter")})})]}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(ii.Z5,{onDragEnd:e=>{let{source:t,destination:a}=e;a&&(w(t.index,a.index),y.forEach(((e,t)=>{f("chapters.".concat(t,".no"),t)})))},children:(0,W.jsx)(ii.bK,{droppableId:"chapter",children:e=>(0,W.jsx)(d.Z,{spacing:2,...e.droppableProps,ref:e.innerRef,children:y.map(((e,t)=>(0,W.jsx)(ii._l,{draggableId:"item-chapter-".concat(t),index:t,children:(a,i)=>(0,W.jsx)("div",{ref:a.innerRef,...a.draggableProps,children:(0,W.jsx)(si,{setValue:f,errors:b,watch:Z,isDragging:l,provided:a,field:e,removeChapter:()=>(e=>{C(e);const t=Z("chapters");null===t||void 0===t||t.forEach(((e,t)=>{f("chapters.".concat(t,".no"),t)}))})(t),parentIndex:t,control:g,register:h})},e.id)},"chapters[".concat(t,"]"))))})})})}),(0,W.jsxs)(i.ZP,{item:!0,xs:12,children:[(0,W.jsx)(p.Z,{}),(0,W.jsxs)(d.Z,{direction:"row",alignItems:"center",spacing:1,justifyContent:"center",mt:2,children:[(0,W.jsx)(la.Z,{btnType:la.s.Outlined,children:(0,W.jsx)(se.Z,{fontWeight:"600",colorname:"--eerie-black",children:t("common_cancel")})}),(0,W.jsx)(la.Z,{btnType:la.s.Primary,type:"submit",children:(0,W.jsx)(se.Z,{fontWeight:"600",colorname:"--white",children:t("common_save")})})]})]})]})]})})]})};var oi=a(53645);const li="styles_breadcump__5khPw",ci="styles_breadcumpWrapper__6mqDS",di="styles_icArrow__kz5OK",mi="styles_cursorPointer__QpI70";var ui=a(66846);const xi=()=>{const e=(0,P.useRef)(null),{t:t}=(0,N.$G)(),a=(0,o.s0)(),i=(0,A.I0)(),[n,r]=(0,P.useState)(0),[l,c]=(0,P.useState)(10),{contestId:u}=(0,o.UO)(),[x,g]=(0,P.useState)(!1),[j,f]=(0,P.useState)(null),[b,v]=(0,P.useState)([]),C=(0,P.useCallback)((async e=>{i((0,Lt.K4)(!0));try{const t=await M.c.getContestById(e);t&&f(t),i((0,Lt.K4)(!1))}catch(t){console.log("error",t),i((0,Lt.K4)(!1))}}),[i]),w=(0,P.useCallback)((async e=>{let{contestId:t,pageNo:a,pageSize:i}=e;g(!0);try{const e=await oi.i.getAdminCodeSubmissionList({contestId:t,pageNo:a,pageSize:i});v(e.codeSubmissions),g(!1)}catch(s){console.log("error",s),g(!1)}}),[]),k=(0,P.useMemo)((()=>b.length),[b]),S=[{field:"problem",headerName:t("common_problem"),flex:.5,renderHeader:()=>(0,W.jsx)(ye.Z,{fontWeight:600,sx:{textAlign:"left"},textWrap:"wrap",children:t("common_problem")}),renderCell:e=>{var t;return(0,W.jsx)(y.Z,{fontWeight:500,width:"auto",children:(null===(t=e.row.codeQuestion)||void 0===t?void 0:t.name)||""})}},{field:"status",headerName:t("common_status"),flex:.5,renderHeader:()=>(0,W.jsx)(ye.Z,{fontWeight:600,sx:{textAlign:"left"},textWrap:"wrap",children:t("common_status")}),renderCell:e=>{var t;return(0,W.jsx)(ye.Z,{fontWeight:700,colorname:"GRADING"===e.row.gradingStatus?"--orange-4":"Accepted"!==e.row.description?"--red-error":"--green-600",children:"GRADING"===e.row.gradingStatus?e.row.gradingStatus:null!==(t=e.row.description)&&void 0!==t?t:"GRADING_SYSTEM_UNAVAILABLE"===e.row.gradingStatus?"GRADING SYSTEM UNAVAILABLE":""})}},{field:"email",headerName:t("common_email"),flex:.6,minWidth:270,renderHeader:()=>(0,W.jsx)(ye.Z,{fontWeight:600,sx:{textAlign:"left"},textWrap:"wrap",children:t("common_email")}),renderCell:e=>{var t;return(0,W.jsxs)(d.Z,{direction:"row",gap:2,alignItems:"center",justifyContent:"flex-start",margin:"5px",sx:{textOverflow:"ellipsis"},children:[(0,W.jsx)(m.Z,{sx:{bgcolor:"".concat((0,z.M)("".concat(e.row.firstName," ").concat(e.row.lastName)))},alt:e.row.user.email,src:null===(t=e.row.user)||void 0===t?void 0:t.avatarUrl,children:e.row.user.firstName.charAt(0)}),(0,W.jsx)(y.Z,{fontWeight:500,children:e.row.user.email})]})}},{field:"language",headerName:t("common_programming_language"),flex:.7,renderHeader:()=>(0,W.jsx)(ye.Z,{fontWeight:600,sx:{textAlign:"left"},textWrap:"wrap",children:t("common_programming_language")}),renderCell:e=>(0,W.jsx)(y.Z,{fontWeight:500,width:"auto",children:e.row.programmingLanguageName})},{field:"runtime",headerName:t("common_runtime"),flex:.5,renderHeader:()=>(0,W.jsx)(ye.Z,{fontWeight:600,sx:{textAlign:"left"},textWrap:"wrap",children:t("common_runtime")}),renderCell:e=>(0,W.jsx)(y.Z,{fontWeight:500,width:"auto",children:void 0===e.row.avgRuntime||"GRADING"===e.row.gradingStatus?"N/A":"".concat((0,ui.RG)(e.row.avgRuntime,3),"s")})},{field:"memory",headerName:t("common_memory"),flex:.5,renderHeader:()=>(0,W.jsx)(ye.Z,{fontWeight:600,sx:{textAlign:"left"},textWrap:"wrap",children:t("common_memory")}),renderCell:e=>(0,W.jsx)(y.Z,{fontWeight:500,width:"auto",children:void 0===e.row.avgMemory||"GRADING"===e.row.gradingStatus?"N/A":"".concat((0,ui.RG)((0,ui.ZA)(e.row.avgMemory),3),"MB")})}];return(0,P.useEffect)((()=>{(async()=>{u&&(await C(u),await w({contestId:u,pageNo:0,pageSize:l}))})()}),[u,w,C,l]),u&&j?(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(h.Z,{sx:{"& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"},margin:"20px 20px 90px 20px",gap:"20px"},children:[(0,W.jsx)(s.Z,{className:li,ref:e,children:(0,W.jsxs)(s.Z,{id:ci,children:[(0,W.jsx)(y.Z,{colorname:"--blue-500",className:mi,onClick:()=>a(D._.admin.contest.root),"translation-key":"contest_management_title",children:t("contest_management_title")}),(0,W.jsx)(F.Z,{id:di}),(0,W.jsx)(y.Z,{colorname:"--blue-500",className:mi,onClick:()=>a(D._.admin.contest.edit.details.replace(":contestId",u)),children:j.name}),(0,W.jsx)(F.Z,{id:di}),(0,W.jsx)(y.Z,{colorname:"--blue-500",children:t("detail_problem_submission")})]})}),(0,W.jsx)(p.Z,{}),(0,W.jsxs)(s.Z,{sx:{margin:"20px",minHeight:"700px"},children:[(0,W.jsx)(Z.Z,{children:t("detail_problem_submission")}),(0,W.jsx)(s.Z,{sx:{margin:"20px 0"},children:(0,W.jsx)(_.Z,{loading:x,dataList:b,tableHeader:S,onSelectData:(e,t)=>{},dataGridToolBar:{enableToolbar:!0},page:n,pageSize:l,totalElement:k,onPaginationModelChange:(e,t)=>{r(e.page),c(e.pageSize),w({contestId:u,pageNo:e.page,pageSize:e.pageSize})},showVerticalCellBorder:!0,getRowHeight:()=>"auto",onClickRow:e=>{a(D._.admin.contest.submission_detail.replace(":submissionId",e.id.toString()||"").replace(":contestId",u||""))},sx:{"& .MuiDataGrid-cell":{border:"none"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f5f9fb"},"& .MuiDataGrid-toolbarContainer":{backgroundColor:"#f5f9fb"}},personalSx:!0})})]})]})}):null},hi={breadcump:"styles_breadcump__64YsK"};var pi=a(46686),gi=a(70978),_i=a(1995),ji=function(e){return e.ALL="ALL",e.EASY="EASY",e.MEDIUM="MEDIUM",e.HARD="HARD",e}(ji||{});const fi=()=>{const e=(0,P.useRef)(null),{t:t}=(0,N.$G)(),a=(0,o.s0)(),[n,r]=(0,P.useState)(""),d=(0,A.v9)((e=>e.codeQuestion)),[m,u]=P.useState(!0),x=[{field:"stt",sortable:!1,flex:.7,align:"center",headerName:t("common_no")},{field:"name",sortable:!1,flex:2.5,headerName:t("code_question_name")},{field:"difficulty",sortable:!1,flex:1.5,headerName:t("code_question_difficulty"),renderCell:e=>(0,W.jsx)(se.Z,{children:"HARD"===e.row.difficulty?t("common_hard"):"MEDIUM"===e.row.difficulty?t("common_medium"):"EASY"===e.row.difficulty?t("common_easy"):"Kh\xf4ng x\xe1c \u0111\u1ecbnh"})},{field:"updated",sortable:!1,flex:2,headerName:t("code_question_updated"),renderCell:e=>(0,W.jsxs)("div",{children:[(0,W.jsx)(se.Z,{children:e.row.updatedByName}),(0,W.jsx)("div",{children:Xt()(e.row.updatedAt).format("DD/MM/YYYY HH:mm")})]})},{field:"operation",sortable:!1,flex:1,type:"actions",cellClassName:"actions",getActions:e=>{let{id:t}=e;return[(0,W.jsx)(g.u,{icon:(0,W.jsx)(c.Z,{}),label:"Save",sx:{color:"primary.main"},onClick:()=>{}}),(0,W.jsx)(g.u,{icon:(0,W.jsx)(l.Z,{}),label:"Cancel",className:"textPrimary",onClick:()=>{M(t),q(!0)},sx:{color:oa.Z[500]}})]},headerName:t("common_action")}],b=(0,A.I0)(),v=P.useCallback((async e=>{let{search:t,isPublic:a,difficulty:i,pageNo:s=0,pageSize:n=10}=e;u(!0);try{const e=await Ne.M.getAdminCodeQuestions({search:t,isPublic:a,difficulty:i,pageNo:s,pageSize:n});b((0,_i.Dt)(e)),u(!1)}catch(r){console.error("error",r),u(!1)}}),[b,t]);(0,P.useEffect)((()=>{(async()=>{await v({search:n})})()}),[n]);const[C,w]=(0,P.useState)(10),[k,S]=(0,P.useState)(0),[T,M]=(0,P.useState)(""),[z,q]=(0,P.useState)(!1),E=(0,P.useMemo)((()=>d.totalItems||0),[d.questions]),[L,R]=P.useState([{key:"Difficulty level",value:ji.ALL}]),F=P.useCallback((()=>{var e,t;const a=null===(e=L.find((e=>"Difficulty level"===e.key)))||void 0===e?void 0:e.value,i=null===(t=L.find((e=>"Is public"===e.key)))||void 0===t?void 0:t.value;v({search:n,isPublic:i&&"ALL"!==i?"PUBLIC"===i:void 0,difficulty:a&&a!==ji.ALL?a:void 0})}),[L,v,n]),B=P.useCallback((()=>{R([{key:"Difficulty level",value:ji.ALL}]),v({search:n})}),[v,n]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(j.Z,{isOpen:z,title:"Confirm delete",description:"Are you sure you want to delete this question?",onCancel:()=>{q(!1)},onDelete:async()=>{pi.a.deleteQuestion(T).then((()=>{b((0,I.kU)("Delete code question successfully")),b((0,gi.j$)())})).catch((e=>{console.log(e),b((0,I.kU)("Delete code question failed"))})).finally((()=>{q(!1)}))}}),(0,W.jsxs)(h.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"}},children:[(0,W.jsx)(s.Z,{className:hi.breadcump,ref:e,children:(0,W.jsx)(s.Z,{id:hi.breadcumpWrapper,children:(0,W.jsx)(y.Z,{colorname:"--blue-500","translate-key":"code_management_title",children:t("code_management_title")})})}),(0,W.jsx)(p.Z,{}),(0,W.jsxs)(i.ZP,{container:!0,spacing:2,sx:{padding:"20px"},children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(Z.Z,{"translate-key":"code_management_title",children:t("code_management_title")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(f.Z,{isLoading:d.isLoading,searchValue:n,setSearchValue:r,onHandleChange:async e=>{r(e)},createBtnText:t("code_management_create_new_title"),onClickCreate:()=>{a(D._.admin.code_question.create)},numOfResults:E,filterKeyList:[{label:t("common_difficulty_level"),value:"Difficulty level"},{label:t("contest_is_public"),value:"Is public"}],filterValueList:{"Difficulty level":[{label:t("common_all"),value:ji.ALL},{label:t("common_easy"),value:ji.EASY},{label:t("common_medium"),value:ji.MEDIUM},{label:t("common_hard"),value:ji.HARD}],"Is public":[{label:t("common_all"),value:"ALL"},{label:t("common_public"),value:"PUBLIC"},{label:t("common_private"),value:"PRIVATER"}]},filters:L,handleChangeFilters:e=>{R(e)},onHandleApplyFilter:F,onHandleCancelFilter:B})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(_.Z,{loading:d.isLoading,dataList:d.questions.map(((e,t)=>({stt:t+1,id:e.question.id,name:e.question.name,difficulty:e.question.difficulty,updatedByName:e.question.updatedBy.lastName+" "+e.question.updatedBy.firstName,updated:e.question.updatedAt}))),tableHeader:x,onSelectData:(e,t)=>{},dataGridToolBar:{enableToolbar:!0},page:k,pageSize:C,totalElement:E,onPaginationModelChange:(e,t)=>{S(e.page),w(e.pageSize),v({search:n,pageNo:e.page,pageSize:e.pageSize})},showVerticalCellBorder:!0,onClickRow:e=>{console.log(e)},sx:{"& .MuiDataGrid-cell":{border:"none"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f5f9fb"},"& .MuiDataGrid-toolbarContainer":{backgroundColor:"#f5f9fb"}},personalSx:!0})})]})]})]})},Zi="styles_codequestionCreationBody__mef6N",bi="styles_tabWrapper__6a1Ga",yi="styles_breadCump__dtmaf",vi="styles_formBody__Y7smA",Ci="styles_stickyFooterItem__4ovGW",wi="styles_phantom__C-G+Y",ki="styles_stickyFooterContainer__bs6gV",Si="styles_textEditor__hsgc7",Pi=(0,P.memo)((e=>{const{questionId:t}=(0,o.UO)(),[a,n]=(0,P.useState)({id:"",organizationId:"",difficulty:"",name:"",questionText:"",generalFeedback:"",defaultMark:0,createdAt:"",updatedAt:"",message:"",qtype:""});(0,P.useEffect)((()=>{(async()=>{await(async e=>{try{const t=await pi.a.getQuestionById(e);n(t)}catch(t){console.log(t)}})(null!==t&&void 0!==t?t:"")})()}),[]);const{t:r}=(0,N.$G)(),[l,c]=(0,P.useState)("M\xf4 t\u1ea3 b\xe0i to\xe1n"),[d,m]=(0,P.useState)("T\xednh t\u1ed5ng 2 s\u1ed1"),[u,x]=(0,P.useState)(""),[h,p]=(0,P.useState)("L\xe0 m\u1ed9t s\u1ed1 nguy\xean cho bi\u1ebft t\u1ed5ng c\u1ee7a a v\xe0 b"),[g,_]=(0,P.useState)("a v\xe0 b l\xe0 s\u1ed1 nguy\xean"),[j]=(0,P.useState)("T\u1ed5ng 2 s\u1ed1"),f=(0,o.s0)();return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(s.Z,{id:Zi,children:[(0,W.jsx)(s.Z,{className:bi,children:(0,W.jsxs)(se.Z,{className:yi,colorname:"--gray-50",fontWeight:"600",children:[(0,W.jsx)("span",{onClick:()=>f(D._.lecturer.code_question.management),"translation-key":"code_management_title",children:r("code_management_title")})," ",">"," ",(0,W.jsx)("span",{onClick:()=>f(D._.lecturer.code_question.create),"translation-key":"code_management_create_new_title",children:r("code_management_create_new_title")})]})}),(0,W.jsxs)(s.Z,{component:"form",className:vi,autoComplete:"off",children:[(0,W.jsx)(Z.Z,{fontWeight:"500",children:r("code_management_create_new_title")}),(0,W.jsx)(G.Z,{"translation-key":"code_management_create_new_title",title:r("code_management_create_new_title"),type:"text",value:j}),(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:3,children:(0,W.jsx)(v.Z,{"translation-key":"code_management_create_description",children:r("code_management_create_description")})}),(0,W.jsx)(i.ZP,{item:!0,xs:9,className:Si,children:(0,W.jsx)(ce.Z,{value:l,onChange:c})})]}),(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:3,"translation-key":"code_management_create_statement",children:(0,W.jsx)(v.Z,{children:r("code_management_create_statement")})}),(0,W.jsx)(i.ZP,{item:!0,xs:9,className:Si,children:(0,W.jsx)(ce.Z,{value:d,onChange:m})})]}),(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:3,children:(0,W.jsx)(v.Z,{"translation-key":"code_management_create_input_format",children:r("code_management_create_input_format")})}),(0,W.jsx)(i.ZP,{item:!0,xs:9,className:Si,children:(0,W.jsx)(ce.Z,{value:a.name,onChange:x})})]}),(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:3,children:(0,W.jsx)(v.Z,{"translation-key":"code_management_create_constraint",children:r("code_management_create_constraint")})}),(0,W.jsx)(i.ZP,{item:!0,xs:9,className:Si,children:(0,W.jsx)(ce.Z,{value:g,onChange:_})})]}),(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:3,children:(0,W.jsx)(v.Z,{"translation-key":"code_management_create_output_format",children:r("code_management_create_output_format")})}),(0,W.jsx)(i.ZP,{item:!0,xs:9,className:Si,children:(0,W.jsx)(ce.Z,{value:h,onChange:p})})]})]})]}),(0,W.jsxs)(s.Z,{className:ki,children:[(0,W.jsx)(s.Z,{className:wi}),(0,W.jsx)(s.Z,{className:Ci,children:(0,W.jsx)(la.Z,{btnType:la.s.Primary,"translation-key":"exam_management_create_new_question",children:r("exam_management_create_new_question")})})]})]})})),Ni=Pi;var Ai=a(72106),Ii=a(18005),Ti=a(16783),Di=a(19187),Mi=a(38476);const zi={formBody:"styles_formBody__ESro5",breadcump:"styles_breadcump__3ws7K",breadcumpWrapper:"styles_breadcumpWrapper__30u5u",icArrow:"styles_icArrow__dFOuF",cursorPointer:"styles_cursorPointer__SEtL2",tabs:"styles_tabs__0IrZX",stickyBack:"styles_stickyBack__DtOt6",backButton:"styles_backButton__vrVRP",backIcon:"styles_backIcon__H4tWr",submissionContainer:"styles_submissionContainer__N8vex",submissionInfo:"styles_submissionInfo__KWstn",submissionTitle:"styles_submissionTitle__OEPcz",submissionAuthor:"styles_submissionAuthor__40-BX",avatar:"styles_avatar__VzcTl",submissionStatistical:"styles_submissionStatistical__2MvKT",statisticalTime:"styles_statisticalTime__PHeio",statisticalMemory:"styles_statisticalMemory__gwA0L",title:"styles_title__REysx",data:"styles_data__EvA-Z",evaluateText:"styles_evaluateText__PVK3P",markdown:"styles_markdown__LC0Xy",feedbackTitle:"styles_feedbackTitle__kzkRy",submissionText:"styles_submissionText__cqPru"},qi=()=>{var e,t,a,n,r,l,c,d,u,x,g,_,j,f,b,v,w,k,S,I,T,E,L;const R=(0,P.useRef)(null),{t:B}=(0,N.$G)(),U=(0,o.s0)(),O=(0,A.I0)(),{contestId:G}=(0,o.UO)(),{submissionId:H}=(0,o.UO)(),[V,Q]=(0,P.useState)(null),[K,Y]=(0,P.useState)(null),$=(0,P.useCallback)((async e=>{try{const t=await M.c.getContestById(e);t&&Q(t)}catch(t){console.log("error",t)}}),[]),J=(0,P.useCallback)((e=>{oi.i.getDetailCodeSubmission(e).then((e=>{console.log("data",e),Y(e)})).catch((e=>console.error(e))).finally((()=>{}))}),[]);(0,P.useEffect)((()=>{(async()=>{G&&H&&(O((0,Lt.K4)(!0)),await $(G),await J(H),O((0,Lt.K4)(!1)))})()}),[G,O,J,$,H]);const X=(0,P.useMemo)((()=>{var e,t;return{source_code:null!==(e=null===K||void 0===K?void 0:K.sourceCode)&&void 0!==e?e:"",language:null!==(t=null===K||void 0===K?void 0:K.programmingLanguageName)&&void 0!==t?t:""}}),[K]);return G&&V&&K&&H?(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(h.Z,{sx:{"& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"},margin:"20px 20px 90px 20px",gap:"20px"},children:[(0,W.jsx)(s.Z,{className:zi.breadcump,ref:R,children:(0,W.jsxs)(s.Z,{id:zi.breadcumpWrapper,children:[(0,W.jsx)(y.Z,{colorname:"--blue-500",className:zi.cursorPointer,onClick:()=>U(D._.admin.contest.root),"translation-key":"contest_management_title",children:B("contest_management_title")}),(0,W.jsx)(F.Z,{id:zi.icArrow}),(0,W.jsx)(y.Z,{colorname:"--blue-500",className:zi.cursorPointer,onClick:()=>U(D._.admin.contest.edit.details.replace(":contestId",G)),children:V.name}),(0,W.jsx)(F.Z,{id:zi.icArrow}),(0,W.jsx)(y.Z,{colorname:"--blue-500",className:zi.cursorPointer,onClick:()=>U(D._.admin.contest.submissions.replace(":contestId",G)),"translation-key":"detail_problem_submission",children:B("detail_problem_submission")}),(0,W.jsx)(F.Z,{id:zi.icArrow}),(0,W.jsx)(y.Z,{colorname:"--blue-500",children:B("detail_problem_submission_details")})]})}),(0,W.jsx)(p.Z,{}),(0,W.jsxs)(s.Z,{sx:{margin:"20px",minHeight:"700px"},children:[(0,W.jsx)(Z.Z,{children:B("detail_problem_submission_details")}),(0,W.jsx)(s.Z,{sx:{margin:"0"},children:(0,W.jsxs)(s.Z,{className:zi.submissionContainer,children:[(0,W.jsx)(s.Z,{className:zi.submissionInfo,children:(0,W.jsxs)(s.Z,{className:zi.submissionTitle,children:[K&&(0,W.jsx)(se.Z,{fontWeight:"700",colorname:"GRADING"===K.gradingStatus?"--orange-4":"Accepted"!==K.description?"--red-error":"--green-600",children:"GRADING"===K.gradingStatus||void 0===K.description?K.gradingStatus.replace("_"," "):K.description}),(0,W.jsxs)(s.Z,{className:zi.submissionAuthor,children:[(0,W.jsx)(m.Z,{sx:{bgcolor:"".concat((0,z.M)("".concat(null===K||void 0===K||null===(e=K.user)||void 0===e?void 0:e.firstName," ").concat(null===K||void 0===K||null===(t=K.user)||void 0===t?void 0:t.lastName)))},alt:null===K||void 0===K||null===(a=K.user)||void 0===a?void 0:a.email,src:null===K||void 0===K||null===(n=K.user)||void 0===n?void 0:n.avatarUrl,children:null===K||void 0===K||null===(r=K.user)||void 0===r?void 0:r.firstName.charAt(0)}),(0,W.jsx)(Mi.Z,{fontWeight:"700",children:"vi"===C.ZP.language?"".concat(null!==(l=null===K||void 0===K||null===(c=K.user)||void 0===c?void 0:c.lastName)&&void 0!==l?l:""," ").concat(null!==(d=null===K||void 0===K||null===(u=K.user)||void 0===u?void 0:u.firstName)&&void 0!==d?d:""):"".concat(null!==(x=null===K||void 0===K||null===(g=K.user)||void 0===g?void 0:g.firstName)&&void 0!==x?x:""," ").concat(null!==(_=null===K||void 0===K||null===(j=K.user)||void 0===j?void 0:j.lastName)&&void 0!==_?_:"")}),(0,W.jsx)(Mi.Z,{"translation-key":"detail_problem_submission_detail_user_submission_time",children:B("detail_problem_submission_detail_user_submission_time",{time:null!==(f=((e,t)=>{try{return void 0===e?e:(0,q.J$)(e,t)}catch(a){return console.error(a),e}})(null===K||void 0===K?void 0:K.createdAt,C.ZP.language))&&void 0!==f?f:"N/A",interpolation:{escapeValue:!1}})})]})]})}),(null===K||void 0===K||null===(b=K.firstFailTestCase)||void 0===b?void 0:b.message)&&K.firstFailTestCase.message.length>0&&(0,W.jsxs)(s.Z,{className:zi.result,sx:Ei.errorBox,children:[(0,W.jsx)(se.Z,{fontWeight:1e3,colorname:"--red-text",children:"Message"}),(0,W.jsx)(Ti.Z,{multiline:!0,InputProps:{readOnly:!0,disableUnderline:!0},fullWidth:!0,size:"small",className:zi.input,value:null!==(v=K.firstFailTestCase.message)&&void 0!==v?v:"",variant:"standard",inputProps:{style:{color:"var(--red-text)"}}})]}),(null===K||void 0===K||null===(w=K.firstFailTestCase)||void 0===w?void 0:w.stderr)&&K.firstFailTestCase.stderr.length>0&&(0,W.jsxs)(s.Z,{className:zi.result,sx:Ei.errorBox,children:[(0,W.jsx)(se.Z,{fontWeight:1e3,colorname:"--red-text",children:"Stderr"}),(0,W.jsx)(Ti.Z,{multiline:!0,InputProps:{readOnly:!0,disableUnderline:!0},fullWidth:!0,size:"small",className:zi.input,value:K.firstFailTestCase.stderr.length,variant:"standard",inputProps:{style:{color:"var(--red-text)"}}})]}),(null===K||void 0===K||null===(k=K.firstFailTestCase)||void 0===k?void 0:k.compileOutput)&&K.firstFailTestCase.compileOutput.length>0&&(0,W.jsxs)(s.Z,{className:zi.result,sx:Ei.errorBox,children:[(0,W.jsx)(se.Z,{fontWeight:1e3,colorname:"--red-text",children:"Complie output"}),(0,W.jsx)(Ti.Z,{multiline:!0,InputProps:{readOnly:!0,disableUnderline:!0},fullWidth:!0,size:"small",className:zi.input,value:K.firstFailTestCase.compileOutput,variant:"standard",inputProps:{style:{color:"var(--red-text)"}}})]}),(null===K||void 0===K?void 0:K.firstFailTestCase)&&"Compilation Error"!==K.description&&(0,W.jsx)(s.Z,{sx:{marginY:1},children:(0,W.jsx)(se.Z,{fontWeight:700,"translation-key":"detail_problem_submission_failed_test_case",children:B("detail_problem_submission_failed_test_case")})}),(null===K||void 0===K||null===(S=K.firstFailTestCase)||void 0===S?void 0:S.input)&&"Compilation Error"!==K.description&&(0,W.jsxs)(s.Z,{className:zi.result,children:[(0,W.jsxs)(Mi.Z,{"translation-key":"detail_problem_input",children:[B("detail_problem_input"),": "]}),(0,W.jsx)(Ti.Z,{multiline:!0,InputProps:{readOnly:!0},fullWidth:!0,id:"outlined-basic",variant:"outlined",size:"small",className:zi.input,value:K.firstFailTestCase.input})]}),(null===K||void 0===K||null===(I=K.firstFailTestCase)||void 0===I?void 0:I.output)&&"Compilation Error"!==K.description&&(0,W.jsxs)(s.Z,{className:zi.result,children:[(0,W.jsxs)(Mi.Z,{"translation-key":"detail_problem_output",children:[B("detail_problem_output"),": "]}),(0,W.jsx)(Ti.Z,{multiline:!0,fullWidth:!0,InputProps:{readOnly:!0},id:"outlined-basic",variant:"outlined",size:"small",className:zi.input,value:K.firstFailTestCase.output})]}),(null===K||void 0===K||null===(T=K.firstFailTestCase)||void 0===T?void 0:T.actualOutput)&&"Compilation Error"!==K.description&&(0,W.jsxs)(s.Z,{className:zi.result,children:[(0,W.jsxs)(Mi.Z,{"translation-key":"detail_problem_actual_result",children:[B("detail_problem_actual_result"),": "]}),(0,W.jsx)(Ti.Z,{multiline:!0,InputProps:{readOnly:!0},fullWidth:!0,id:"outlined-basic",variant:"outlined",size:"small",className:zi.input,value:K.firstFailTestCase.actualOutput})]}),(0,W.jsxs)(i.ZP,{container:!0,className:zi.submissionStatistical,children:[(0,W.jsxs)(i.ZP,{item:!0,xs:5.75,className:zi.statisticalTime,children:[(0,W.jsxs)(na.Z,{className:zi.title,children:[(0,W.jsx)(Ai.Z,{}),(0,W.jsx)(y.Z,{colorname:"--white","translation-key":"detail_problem_submission_detail_runtime",children:B("detail_problem_submission_detail_runtime")})]}),(0,W.jsx)(na.Z,{className:zi.data,children:(0,W.jsxs)(se.Z,{colorname:"--white",fontSize:"20px",fontWeight:"700",children:[null!==(E=(0,ui.RG)(null===K||void 0===K?void 0:K.avgRuntime,3))&&void 0!==E?E:"N/A",void 0!==(null===K||void 0===K?void 0:K.avgRuntime)?"ms":""]})})]}),(0,W.jsx)(i.ZP,{item:!0,xs:.5}),(0,W.jsxs)(i.ZP,{item:!0,xs:5.75,className:zi.statisticalMemory,children:[(0,W.jsxs)(na.Z,{className:zi.title,children:[(0,W.jsx)(Ii.Z,{}),(0,W.jsx)(y.Z,{colorname:"--white","translation-key":"detail_problem_submission_detail_memory",children:B("detail_problem_submission_detail_memory")})]}),(0,W.jsx)(na.Z,{className:zi.data,children:(0,W.jsxs)(se.Z,{colorname:"--white",fontSize:"20px",fontWeight:"700",children:[null!==(L=(0,ui.RG)((0,ui.ZA)(null===K||void 0===K?void 0:K.avgMemory),3))&&void 0!==L?L:"N/A"," ",void 0!==(null===K||void 0===K?void 0:K.avgMemory)?"MB":""]})})]})]}),(0,W.jsxs)(s.Z,{className:zi.submissionText,children:[(0,W.jsx)(s.Z,{className:zi.feedbackTitle,children:(0,W.jsx)(se.Z,{fontWeight:700,"translation-key":"detail_admin_problem_submission_detail_solution",children:B("detail_admin_problem_submission_detail_solution")})}),(0,W.jsx)(s.Z,{"data-color-mode":"light",children:(0,W.jsx)(Di.ZP.Markdown,{source:"```java\n"+X.source_code})})]})]})})]})]})}):null},Ei={errorBox:{backgroundColor:"var(--red-background)",borderRadius:1,paddingX:1}};var Wi=a(66010),Li=a(65005);const Ri="https://api.codedynamite.click";class Fi{static async getAllOrganizations(e){let{searchName:t,pageNo:a=0,pageSize:i=10}=e;try{const e=await(0,Li.Z)({baseURL:Ri,isAuthorization:!0}).get("".concat(Wi.b.AUTH.ORGANIZATION.GET_ALL_ORGANIZATIONS),{params:{searchName:t,pageNo:a,pageSize:i}});if(200===e.status)return e.data}catch(s){return Promise.reject({code:s.code||503,status:s.status||"Service Unavailable",message:s.message})}}static async getOrganizationById(e){try{const t=await(0,Li.Z)({baseURL:Ri,isAuthorization:!0}).get("".concat(Wi.b.AUTH.ORGANIZATION.GET_ORGANIZATION_BY_ID.replace(":id",e)));if(200===t.status)return t.data}catch(t){return Promise.reject({code:t.code||503,status:t.status||"Service Unavailable",message:t.message})}}static async createOrganization(e){try{const t=await(0,Li.Z)({baseURL:Ri,isAuthorization:!0}).post("".concat(Wi.b.AUTH.ORGANIZATION.CREATE_ORGANIZATION),e);if(201===t.status)return t.data}catch(o){var t,a,i,s,n,r;return Promise.reject({code:(null===(t=o.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.code)||503,status:(null===(i=o.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.status)||"Service Unavailable",message:(null===(n=o.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||o.message})}}static async updateOrganizationBySystemAdmin(e,t){try{const a=await(0,Li.Z)({baseURL:Ri,isAuthorization:!0}).put("".concat(Wi.b.AUTH.ORGANIZATION.UPDATE_ORGANIZATION_BY_ID.replace(":id",e)),t);if(200===a.status)return a.data}catch(l){var a,i,s,n,r,o;return Promise.reject({code:(null===(a=l.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.code)||503,status:(null===(s=l.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.status)||"Service Unavailable",message:(null===(r=l.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.message)||l.message})}}}var Bi=a(79904);const Ui=()=>{const{t:e}=(0,N.$G)(),t=(0,o.s0)(),[a,s]=(0,P.useState)(""),[n,r]=(0,P.useState)((()=>C.ZP.language)),[m,x]=(0,P.useState)([{key:"Status",value:"ALL"}]),p=(0,A.v9)((e=>e.organization)),[w,k]=(0,P.useState)(!1),[S,T]=(0,P.useState)(""),M=(0,A.I0)(),z=(0,P.useCallback)((async t=>{let{searchName:a,pageNo:i=0,pageSize:s=10}=t;M((0,Bi.K4)(!0));try{const e=await Fi.getAllOrganizations({searchName:a,pageNo:i,pageSize:s});M((0,Bi.K7)(e)),M((0,Bi.K4)(!1))}catch(n){console.error("error",n),401!==n.code&&403!==n.code||M((0,I.lS)(e("common_please_login_to_continue"))),M((0,Bi.K4)(!1))}}),[M,e]),E=(0,P.useCallback)((e=>{z({searchName:e})}),[z]),L=[{field:"email",headerName:e("organization_email"),flex:2,renderHeader:()=>(0,W.jsx)(b.Z,{nonoverflow:!0,width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("organization_email")}),renderCell:e=>(0,W.jsx)(d.Z,{direction:"row",gap:2,alignItems:"center",justifyContent:"flex-start",margin:"5px",children:(0,W.jsx)(y.Z,{width:"auto",fontWeight:500,children:e.row.email})})},{field:"name",headerName:e("organization_name"),flex:2,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("organization_name")}),renderCell:e=>(0,W.jsx)(y.Z,{width:"auto",children:e.row.name})},{field:"phone",headerName:e("organization_phone"),flex:1,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("organization_phone")}),renderCell:e=>(0,W.jsx)(y.Z,{width:"auto",children:e.row.phone})},{field:"updatedAt",headerName:e("common_updated_at"),flex:1,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("common_updated_at")}),renderCell:e=>(0,W.jsx)(y.Z,{width:"auto",children:(0,q.J$)(e.row.updatedAt,n)})},{field:"isVerified",headerName:e("common_is_verified"),flex:.6,align:"center",renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:e("common_is_verified")}),renderCell:e=>(0,W.jsx)(u.Z,{disableRipple:!0,checked:!0===e.row.isVerified,sx:{"&:hover":{backgroundColor:"transparent !important",cursor:"default"}}})},{field:"action",headerName:e("common_action"),type:"actions",flex:.8,renderHeader:()=>(0,W.jsx)(v.Z,{width:"auto",sx:{textAlign:"left"},children:e("common_action")}),getActions:e=>[(0,W.jsx)(g.u,{icon:(0,W.jsx)(c.Z,{}),label:"Edit",onClick:()=>{t(D._.admin.organizations.edit.details.replace(":organizationId",e.row.organizationId),{state:{contestName:e.row.name}})}}),(0,W.jsx)(g.u,{onClick:()=>{T(e.row.userId),k(!0)},icon:(0,W.jsx)(l.Z,{}),label:"Delete"})]}],[R,F]=(0,P.useState)(0),[B,U]=(0,P.useState)(10),O=(0,P.useMemo)((()=>p.organizations.totalItems||0),[p.organizations]),G=(0,P.useMemo)((()=>p.organizations.organizations.map((e=>({id:e.organizationId,organizationId:e.organizationId,email:e.email,name:e.name,description:e.description,phone:e.phone,address:e.address,apiKey:e.apiKey,moodleUrl:e.moodleUrl,createdAt:e.createdAt,updatedAt:e.updatedAt,isDeleted:e.isDeleted,isVerified:e.isVerified})))),[p.organizations]),H=(0,P.useCallback)((()=>{z({searchName:a})}),[z,a]),V=(0,P.useCallback)((()=>{z({searchName:a})}),[z,a]);(0,P.useEffect)((()=>{r(C.ZP.language)}),[C.ZP.language]),(0,P.useEffect)((()=>{(async()=>{p.organizations.organizations.length>0||(M((0,Lt.K4)(!0)),await z({searchName:""}),M((0,Lt.K4)(!1)))})()}),[M,z,p.organizations.organizations]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(j.Z,{isOpen:w,title:"Confirm delete",description:"Are you sure you want to delete this organization?",onCancel:()=>{k(!1)},onDelete:async()=>{wt.K.deleteUserById(S).then((e=>{M((0,I.kU)("Delete organization successfully")),M((0,Bi.Tc)())})).catch((e=>{console.error("error",e),M((0,I.lS)("Delete organization failed"))})).finally((()=>{k(!1)}))}}),(0,W.jsx)(h.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"}},children:(0,W.jsxs)(i.ZP,{container:!0,spacing:2,sx:{padding:"20px"},children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(Z.Z,{"translate-key":"organization_management",children:e("organization_management")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(f.Z,{isLoading:p.isLoading,searchValue:a,setSearchValue:s,onHandleChange:E,createBtnText:e("organization_create"),onClickCreate:()=>{t(D._.admin.organizations.create)},numOfResults:O,filterKeyList:[{label:e("common_status"),value:"Status"}],filterValueList:{Status:[{label:e("common_all"),value:"ALL"},{label:e("common_active"),value:"ACTIVE"},{label:e("common_inactive"),value:"INACTIVE"}]},filters:m,handleChangeFilters:e=>{x(e)},onHandleApplyFilter:H,onHandleCancelFilter:V})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(_.Z,{loading:p.isLoading,dataList:G,tableHeader:L,onSelectData:(e,t)=>{},dataGridToolBar:{enableToolbar:!0},page:R,pageSize:B,totalElement:O,onPaginationModelChange:(e,t)=>{F(e.page),U(e.pageSize),z({searchName:a,pageNo:e.page,pageSize:e.pageSize})},showVerticalCellBorder:!0,getRowHeight:()=>"auto",onClickRow:e=>{console.log(e)},sx:{"& .MuiDataGrid-cell":{border:"none"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f5f9fb"},"& .MuiDataGrid-toolbarContainer":{backgroundColor:"#f5f9fb"}},personalSx:!0})})]})})]})},Oi={formBody:"styles_formBody__-bgFU",breadcump:"styles_breadcump__+GQ-5",phoneInput:"styles_phoneInput__fodxg"},Gi=()=>{var e,t,a,n,r,l,c;const d=(0,P.useRef)(null),{t:m}=(0,N.$G)(),u=(0,o.s0)(),[x,g]=(0,P.useState)(!1),_=(0,A.I0)(),j=(0,P.useMemo)((()=>K.Ry().shape({email:K.Z_().required(m("email_required")).email(m("email_invalid")),name:K.Z_().required(m("organization_name_required")),description:K.Z_(),address:K.Z_().required(m("organization_address_required")),phone:K.Z_().matches(/^\+?[1-9][0-9]{7,14}$/,m("phone_number_invalid")).required(m("phone_required"))})),[m]),{handleSubmit:f,control:b,formState:{errors:y},register:C}=(0,Q.cI)({resolver:(0,R.X)(j)}),w=(0,P.useCallback)((async e=>{g(!0);try{await Fi.createOrganization(e),g(!1),_((0,I.kU)("Created organization successfully")),_((0,Bi.Tc)()),u(D._.admin.organizations.root)}catch(t){console.error("error",t),_((0,I.lS)("Organization creation failed!!! please check your input information")),401!==t.code&&403!==t.code||_((0,I.lS)(m("common_please_login_to_continue"))),g(!1)}}),[m]);return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(h.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"},gap:"20px"},children:[(0,W.jsx)(s.Z,{className:Oi.breadcump,ref:d,children:(0,W.jsx)(s.Z,{id:Oi.breadcumpWrapper,children:(0,W.jsx)(Gt.Z,{breadCrumbData:[{navLink:D._.admin.organizations.root,label:m("organization_management")}],lastBreadCrumbLabel:m("organization_create")})})}),(0,W.jsx)(p.Z,{}),(0,W.jsxs)(s.Z,{sx:{padding:"20px"},children:[(0,W.jsx)(Z.Z,{"translate-key":"user_create",children:m("organization_create")}),(0,W.jsxs)(s.Z,{component:"form",className:Oi.formBody,onSubmit:f((async e=>{const t={...e},a={email:t.email,description:t.description,name:t.name,address:t.address,phone:t.phone};await w(a)})),children:[(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:4,children:(0,W.jsx)(v.Z,{"translation-key":"common_phone",children:m("common_phone")})}),(0,W.jsxs)(i.ZP,{item:!0,xs:7,display:"flex",flexDirection:"column",gap:"10px",children:[(0,W.jsx)(Q.Qr,{control:b,name:"phone",render:e=>{let{field:t}=e;return(0,W.jsx)(Ut.ZP,{value:t.value,placeholder:"Enter phone number",onChange:t.onChange,className:Oi.phoneInput,defaultCountry:"VN"})}}),(null===(e=y.phone)||void 0===e?void 0:e.message)&&(0,W.jsx)(H.Z,{children:null===(t=y.phone)||void 0===t?void 0:t.message})]})]}),(0,W.jsx)(G.Z,{title:m("Email"),type:"text",inputRef:C("email"),errorMessage:null===y||void 0===y||null===(a=y.email)||void 0===a?void 0:a.message,width:"100%"}),(0,W.jsx)(G.Z,{title:m("organization_name"),type:"text",inputRef:C("name"),errorMessage:null===y||void 0===y||null===(n=y.name)||void 0===n?void 0:n.message,width:"100%"}),(0,W.jsx)(G.Z,{title:m("organization_address"),type:"text",inputRef:C("address"),errorMessage:null===y||void 0===y||null===(r=y.address)||void 0===r?void 0:r.message,width:"100%"}),(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:4,children:(0,W.jsx)(v.Z,{"translation-key":"common_description",children:m("common_description")})}),(0,W.jsxs)(i.ZP,{item:!0,xs:7,display:"flex",flexDirection:"column",gap:"10px",children:[(0,W.jsx)(Q.Qr,{control:b,name:"description",render:e=>{let{field:t}=e;return(0,W.jsx)(ce.Z,{maxLines:6,roundedBorder:!0,"translation-key":"common_description",...t})}}),(null===(l=y.description)||void 0===l?void 0:l.message)&&(0,W.jsx)(H.Z,{children:null===(c=y.description)||void 0===c?void 0:c.message})]})]}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:(0,W.jsx)(B.Z,{loading:x,variant:"solid",type:"submit","translation-key":"user_create",children:m("organization_create")})})]})]})]})})},Hi={breadcump:"styles_breadcump__UneXy"},Vi="styles_formBody__r9jA0",Qi="styles_phoneInput__4J9F9",Ki=e=>{var t,a;const[n,r]=(0,P.useState)(!1),l=(0,A.I0)(),{t:c}=(0,N.$G)(),d=(0,P.useMemo)((()=>K.Ry().shape({isVerified:K.O7().required(c("organization_is_verified_required")),isDeleted:K.O7().required(c("organization_is_deleted_required"))})),[c]),{handleSubmit:m,control:x,formState:{errors:h},reset:p,register:g}=(0,Q.cI)({resolver:(0,R.X)(d)}),{organizationId:_}=(0,o.UO)(),[j,f]=(0,P.useState)((()=>C.ZP.language)),[Z,b]=(0,P.useState)();(0,P.useEffect)((()=>{f(C.ZP.language)}),[C.ZP.language]);const y=(0,P.useCallback)((async e=>{try{const t=await Fi.getOrganizationById(e);console.log(t),t&&(p({isVerified:t.isVerified,isDeleted:t.isDeleted}),b(t))}catch(t){console.error("error",t)}}),[p]);(0,P.useEffect)((()=>{_&&!Z&&(console.log(_),y(_))}),[Z,y,_]);const w=(0,P.useCallback)((async e=>{r(!0);try{if(!_)return;await Fi.updateOrganizationBySystemAdmin(_,e),r(!1),l((0,I.kU)("Updated organization successfully")),l((0,Bi.Tc)())}catch(t){console.error("error",t),l((0,I.lS)("Organization is updated failed!!! please check your input information")),401!==t.code&&403!==t.code||l((0,I.lS)(c("common_please_login_to_continue"))),r(!1)}}),[l,c,_]);return(0,W.jsxs)(s.Z,{component:"form",className:Vi,onSubmit:m((async e=>{const t={...e},a={isVerified:t.isVerified,isDeleted:t.isDeleted};await w(a)})),children:[(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:4,children:(0,W.jsx)(v.Z,{"translation-key":"organization_phone",children:c("organization_phone")})}),(0,W.jsx)(i.ZP,{item:!0,xs:7,display:"flex",flexDirection:"column",gap:"10px",children:(0,W.jsx)(Ut.ZP,{placeholder:"Enter phone number",value:null===Z||void 0===Z?void 0:Z.phone,onChange:()=>{},disabled:!0,className:Qi})})]}),(0,W.jsx)(G.Z,{title:c("common_created_at"),type:"text",disabled:!0,value:(0,q.J$)(null===Z||void 0===Z?void 0:Z.createdAt,j),width:"100%"}),(0,W.jsx)(G.Z,{title:c("common_created_by"),type:"text",disabled:!0,value:null===Z||void 0===Z?void 0:Z.createdBy.email,width:"100%"}),(0,W.jsx)(G.Z,{title:c("common_updated_at"),type:"text",disabled:!0,value:(0,q.J$)(null===Z||void 0===Z?void 0:Z.updatedAt,j),width:"100%"}),(0,W.jsx)(G.Z,{title:c("common_updated_by"),type:"text",disabled:!0,value:null===Z||void 0===Z?void 0:Z.updatedBy.email,width:"100%"}),(0,W.jsx)(G.Z,{title:c("organization_email"),type:"text",disabled:!0,value:null===Z||void 0===Z?void 0:Z.email,width:"100%"}),(0,W.jsx)(G.Z,{title:c("organization_url"),type:"text",disabled:!0,value:null===Z||void 0===Z?void 0:Z.moodleUrl,width:"100%"}),(0,W.jsx)(G.Z,{title:c("organization_name"),type:"text",disabled:!0,value:null===Z||void 0===Z?void 0:Z.name,width:"100%"}),(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:4,display:"flex",flexDirection:"row",alignItems:"center",children:(0,W.jsx)(v.Z,{"translation-key":"common_description",children:c("common_description")})}),(0,W.jsx)(i.ZP,{item:!0,xs:7,display:"flex",flexDirection:"row",alignItems:"center",gap:"10px",children:(0,W.jsx)(ce.Z,{maxLines:6,roundedBorder:!0,"translation-key":"common_description",value:null===Z||void 0===Z?void 0:Z.description,readOnly:!0})})]}),(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:4,display:"flex",flexDirection:"row",alignItems:"center",children:(0,W.jsx)(v.Z,{"translation-key":"common_is_verified",children:c("common_is_verified")})}),(0,W.jsx)(i.ZP,{item:!0,xs:7,display:"flex",flexDirection:"row",alignItems:"center",gap:"10px",children:(0,W.jsx)(Q.Qr,{control:x,name:"isVerified",render:e=>{let{field:t}=e;return(0,W.jsx)(u.Z,{size:"large",checked:!!t.value,...t,name:"isVerified"})}})})]}),(0,W.jsxs)(i.ZP,{container:!0,spacing:1,columns:12,children:[(0,W.jsx)(i.ZP,{item:!0,xs:4,display:"flex",flexDirection:"row",alignItems:"center",children:(0,W.jsx)(v.Z,{"translation-key":"common_is_blocked",children:c("common_is_blocked")})}),(0,W.jsxs)(i.ZP,{item:!0,xs:7,display:"flex",flexDirection:"row",alignItems:"center",gap:"10px",children:[(0,W.jsx)(Q.Qr,{control:x,name:"isDeleted",render:e=>{let{field:t}=e;return(0,W.jsx)(u.Z,{size:"large",checked:!!t.value,...t,name:"isDeleted"})}}),(null===(t=h.isDeleted)||void 0===t?void 0:t.message)&&(0,W.jsx)(H.Z,{children:null===(a=h.isDeleted)||void 0===a?void 0:a.message})]})]}),(0,W.jsx)(i.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:(0,W.jsx)(B.Z,{loading:n,variant:"solid",type:"submit","translation-key":"organization_update",children:c("organization_update")})})]})},Yi={breadcump:"styles_breadcump__EzoMn"},$i=()=>{const e=(0,P.useRef)(null),{t:t}=(0,N.$G)(),a=(0,o.s0)(),[n,r]=(0,P.useState)(""),{organizationId:x}=(0,o.UO)(),[j,w]=(0,P.useState)((()=>C.ZP.language)),[k,S]=(0,P.useState)([{key:"Status",value:"ALL"}]),T=(0,A.v9)((e=>e.user)),M=(0,A.I0)(),E=(0,P.useCallback)((async e=>{let{searchName:a,pageNo:i=0,pageSize:s=10}=e;if(x){M((0,Wt.K4)(!0));try{const e=await wt.K.getAllUserByOrganization({searchName:a,pageNo:i,pageSize:s,id:x});M((0,Wt.lV)(e)),M((0,Wt.K4)(!1))}catch(n){console.error("error",n),401!==n.code&&403!==n.code||M((0,I.lS)(t("common_please_login_to_continue"))),M((0,Wt.K4)(!1))}}}),[M,x,t]),L=(0,P.useCallback)((e=>{E({searchName:e})}),[E]),R=[{field:"email",headerName:"Email",flex:2,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:"Email"}),renderCell:e=>(0,W.jsxs)(d.Z,{direction:"row",gap:2,alignItems:"center",justifyContent:"flex-start",margin:"5px",children:[(0,W.jsx)(m.Z,{sx:{bgcolor:"".concat((0,z.M)("".concat(e.row.firstName," ").concat(e.row.lastName)))},alt:e.row.email,src:e.row.avatarUrl,children:e.row.firstName.charAt(0)}),(0,W.jsx)(y.Z,{width:"auto",fontWeight:500,children:e.row.email})]})},{field:"fullname",headerName:t("common_fullname"),flex:2,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_fullname")}),renderCell:e=>(0,W.jsxs)(y.Z,{width:"auto",children:[e.row.firstName," ",e.row.lastName]})},{field:"lastLogin",headerName:t("common_last_login"),flex:1,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_last_login")}),renderCell:e=>(0,W.jsx)(y.Z,{width:"auto",children:(0,q.J$)(e.row.lastLogin,j)})},{field:"isDeleted",headerName:t("common_is_blocked"),flex:.6,align:"center",renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_is_blocked")}),renderCell:e=>(0,W.jsx)(u.Z,{disableRipple:!0,checked:!0===e.row.isDeleted,color:e.row.isDeleted?"success":"error",sx:{"&:hover":{backgroundColor:"transparent !important",cursor:"default"}}})},{field:"roleName",headerName:t("common_role"),flex:1,renderHeader:()=>(0,W.jsx)(b.Z,{width:"auto",sx:{textAlign:"left"},textWrap:"wrap",children:t("common_role")}),renderCell:e=>(0,W.jsx)(y.Z,{width:"auto",children:e.row.roleName})},{field:"action",headerName:t("common_action"),type:"actions",flex:.8,renderHeader:()=>(0,W.jsx)(v.Z,{width:"auto",sx:{textAlign:"left"},children:t("common_action")}),getActions:e=>[(0,W.jsx)(g.u,{icon:(0,W.jsx)(c.Z,{}),label:"Edit",onClick:()=>{a(D._.org_admin.users.edit.details.replace(":userId",e.row.userId),{state:{contestName:e.row.name}})}}),(0,W.jsx)(g.u,{icon:(0,W.jsx)(l.Z,{}),label:"Delete"})]}],[F,B]=(0,P.useState)(0),[U,O]=(0,P.useState)(10),G=(0,P.useMemo)((()=>T.org_users.totalItems||0),[T.org_users]),H=(0,P.useMemo)((()=>[{name:Rt.W.ADMIN,label:t("role_system_admin")},{name:Rt.W.ADMIN_MOODLE,label:t("role_org_admin")},{name:Rt.W.LECTURER_MOODLE,label:t("role_lecturer")},{name:Rt.W.STUDENT_MOODLE,label:t("role_student")}]),[t]),V=(0,P.useCallback)((e=>{const a=H.find((t=>null===e||void 0===e?void 0:e.roles.some((e=>(null===e||void 0===e?void 0:e.name)===t.name))));return a?a.label:t("role_user")}),[H,t]),Q=(0,P.useMemo)((()=>T.org_users.users.map((e=>({id:e.userId,userId:e.userId,email:e.email,firstName:e.firstName,lastName:e.lastName,avatarUrl:e.avatarUrl,lastLogin:e.lastLogin,phone:e.phone,address:e.address,dob:e.dob,isLinkedWithGoogle:e.isLinkedWithGoogle,isLinkedWithMicrosoft:e.isLinkedWithMicrosoft,createdAt:e.createdAt,roleName:V(e),isDeleted:e.isDeleted})))),[V,T.org_users]),K=(0,P.useCallback)((()=>{E({searchName:n})}),[E,n]),Y=(0,P.useCallback)((()=>{E({searchName:n})}),[E,n]);(0,P.useEffect)((()=>{w(C.ZP.language)}),[C.ZP.language]),(0,P.useEffect)((()=>{(async()=>{M((0,Lt.K4)(!0)),await E({searchName:""}),M((0,Lt.K4)(!1))})()}),[M,E,T.org_users.users]);return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(h.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"}},children:[(0,W.jsx)(s.Z,{className:Yi.breadcump,ref:e,children:(0,W.jsx)(s.Z,{id:Yi.breadcumpWrapper,children:(0,W.jsx)(y.Z,{colorname:"--blue-500","translate-key":"user_detail_account_management",children:t("user_detail_account_management")})})}),(0,W.jsx)(p.Z,{}),(0,W.jsxs)(i.ZP,{container:!0,spacing:2,sx:{padding:"20px"},children:[(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(Z.Z,{"translate-key":"user_management",children:t("user_management")})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(f.Z,{isLoading:T.isLoading,searchValue:n,setSearchValue:r,onHandleChange:L,numOfResults:G,filterKeyList:[{label:t("common_status"),value:"Status"}],filterValueList:{Status:[{label:t("common_all"),value:"ALL"},{label:t("common_active"),value:"ACTIVE"},{label:t("common_inactive"),value:"INACTIVE"}]},filters:k,handleChangeFilters:e=>{S(e)},onHandleApplyFilter:K,onHandleCancelFilter:Y})}),(0,W.jsx)(i.ZP,{item:!0,xs:12,children:(0,W.jsx)(_.Z,{loading:T.isLoading,dataList:Q,tableHeader:R,onSelectData:(e,t)=>{},dataGridToolBar:{enableToolbar:!0},page:F,pageSize:U,totalElement:G,onPaginationModelChange:(e,t)=>{B(e.page),O(e.pageSize),E({searchName:n,pageNo:e.page,pageSize:e.pageSize})},showVerticalCellBorder:!0,getRowHeight:()=>"auto",onClickRow:e=>{console.log(e)},sx:{"& .MuiDataGrid-cell":{border:"none"},"& .MuiDataGrid-columnHeaders":{backgroundColor:"#f5f9fb"},"& .MuiDataGrid-toolbarContainer":{backgroundColor:"#f5f9fb"}},personalSx:!0})})]})]})})},Ji=()=>{const{t:e}=(0,N.$G)(),t=(0,P.useMemo)((()=>[D._.admin.organizations.edit.details,D._.admin.organizations.edit.list_users]),[D._]),{pathname:a}=(0,o.TH)(),{organizationId:i}=(0,o.UO)(),n=(0,P.useMemo)((()=>{if(i){const e=t.findIndex((e=>{return t=e.replace(":organizationId",i),!!a.startsWith(t);var t}));return-1===e?0:e}}),[a,t]),r=(0,o.s0)();return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(h.Z,{sx:{margin:"20px","& .MuiDataGrid-root":{border:"1px solid #e0e0e0",borderRadius:"4px"},gap:"20px"},children:[(0,W.jsx)(s.Z,{className:Hi.breadcump,children:(0,W.jsx)(s.Z,{id:Hi.breadcumpWrapper,children:(0,W.jsx)(Gt.Z,{breadCrumbData:[{navLink:D._.admin.organizations.root,label:e("organization_management")}],lastBreadCrumbLabel:e("organization_information")})})}),(0,W.jsx)(p.Z,{}),(0,W.jsxs)(s.Z,{sx:{padding:"20px"},children:[(0,W.jsx)(Z.Z,{"translate-key":"organization_information",children:e("organization_information")}),(0,W.jsx)(s.Z,{sx:{margin:"20px",borderRadius:"5px",border:"1px solid #e0e0e0"},children:(0,W.jsxs)(ae.Z,{value:n,onChange:(e,a)=>{i&&r(t[a].replace(":organizationId",i))},"aria-label":"basic tabs example",className:Hi.tabs,variant:"fullWidth",children:[(0,W.jsx)(ie.Z,{sx:{textTransform:"none"},label:(0,W.jsx)(se.Z,{"translate-key":"common_details",children:e("common_details")}),value:0}),(0,W.jsx)(ie.Z,{sx:{textTransform:"none"},label:(0,W.jsx)(se.Z,{"translate-key":"organization_list_users",children:e("organization_list_users")}),value:1})]})}),(0,W.jsx)(s.Z,{children:(0,W.jsxs)(o.Z5,{children:[(0,W.jsx)(o.AW,{path:"details",element:(0,W.jsx)(Ki,{})}),(0,W.jsx)(o.AW,{path:"users",element:(0,W.jsx)($i,{})}),(0,W.jsx)(o.AW,{path:"*",element:(0,W.jsx)(ne.Z,{})})]})})]})]})})},Xi=e=>{const[t,a]=P.useState(!0),l=(0,A.I0)();return(0,W.jsx)(i.ZP,{className:n,children:(0,W.jsx)(_t,{open:t,toggleDrawer:()=>{a((e=>!e)),l((0,La.G)())},children:(0,W.jsx)(s.Z,{className:r,children:(0,W.jsxs)(o.Z5,{children:[(0,W.jsx)(o.AW,{path:"contests",element:(0,W.jsx)(L,{})}),(0,W.jsx)(o.AW,{path:"contests/create",element:(0,W.jsx)(te,{})}),(0,W.jsx)(o.AW,{path:"contests/:contestId/submissions",element:(0,W.jsx)(xi,{})}),(0,W.jsx)(o.AW,{path:"contests/:contestId/submissions/:submissionId",element:(0,W.jsx)(qi,{})}),(0,W.jsx)(o.AW,{path:"contests/edit/:contestId/*",element:(0,W.jsx)(et,{isDrawerOpen:t})}),(0,W.jsx)(o.AW,{path:"information",element:(0,W.jsx)(jt.Z,{})}),(0,W.jsx)(o.AW,{path:"/dashboard",element:(0,W.jsx)(Et,{})}),(0,W.jsx)(o.AW,{path:"users",element:(0,W.jsx)(Ft,{})}),(0,W.jsx)(o.AW,{path:"users/create",element:(0,W.jsx)(Ht,{})}),(0,W.jsx)(o.AW,{path:"users/edit/:userId/*",element:(0,W.jsx)(ta,{})}),(0,W.jsx)(o.AW,{path:"organizations",element:(0,W.jsx)(Ui,{})}),(0,W.jsx)(o.AW,{path:"organizations/create",element:(0,W.jsx)(Gi,{})}),(0,W.jsx)(o.AW,{path:"organizations/edit/:organizationId/*",element:(0,W.jsx)(Ji,{})}),(0,W.jsx)(o.AW,{path:"/certificate-course",element:(0,W.jsx)(sa,{})}),(0,W.jsx)(o.AW,{path:"question-bank-management",element:(0,W.jsx)(Wa,{})}),(0,W.jsx)(o.AW,{path:"question-bank-management/:categoryId",element:(0,W.jsx)(Ca,{})}),(0,W.jsx)(o.AW,{path:"question-bank-management/:categoryId/create/short-answer",element:(0,W.jsx)(wa.default,{qtype:da.Z.short_answer.code})}),(0,W.jsx)(o.AW,{path:"question-bank-management/:categoryId/create/essay",element:(0,W.jsx)(ka.default,{qtype:da.Z.essay.code})}),(0,W.jsx)(o.AW,{path:"question-bank-management/:categoryId/create/multiple-choice",element:(0,W.jsx)(Sa.default,{qtype:da.Z.multiple_choice.code})}),(0,W.jsx)(o.AW,{path:"question-bank-management/:categoryId/create/true-false",element:(0,W.jsx)(Pa.default,{qtype:da.Z.true_false.code})}),(0,W.jsx)(o.AW,{path:"question-bank-management/:categoryId/create/code",element:(0,W.jsx)(Na.Z,{})}),(0,W.jsx)(o.AW,{path:"/certificate-course/create",element:(0,W.jsx)(ri,{})}),(0,W.jsx)(o.AW,{path:"/code-questions",element:(0,W.jsx)(fi,{})}),(0,W.jsx)(o.AW,{path:"/code-questions/create",element:(0,W.jsx)(Ni,{})})]})})})})}},30371:(e,t,a)=>{a.d(t,{r:()=>r});var i=a(66010),s=a(65005);const n="https://api.codedynamite.click";class r{static async getTopics(e){let{pageNo:t=0,pageSize:a=10,fetchAll:r}=e;try{const e=await(0,s.Z)({baseURL:n}).get("".concat(i.b.CORE.TOPIC.DEFAULT),{params:{pageNo:t,pageSize:a,fetchAll:r}});if(200===e.status)return e.data}catch(o){return Promise.reject({code:o.code||503,status:o.status||"Service Unavailable",message:o.message})}}static async getTopicById(e){try{const t=await(0,s.Z)({baseURL:n}).get("".concat(i.b.CORE.TOPIC.GET_BY_ID.replace(":id",e)));if(200===t.status)return t.data}catch(t){return Promise.reject({code:t.code||503,status:t.status||"Service Unavailable",message:t.message})}}static async updateTopicById(e,t){try{const a=await(0,s.Z)({baseURL:n,isAuthorization:!0}).put("".concat(i.b.CORE.TOPIC.GET_BY_ID.replace(":id",e)),t);if(200===a.status)return a.data}catch(a){return Promise.reject({code:a.code||503,status:a.status||"Service Unavailable",message:a.message})}}static async deleteTopicById(e){try{const t=await(0,s.Z)({baseURL:n,isAuthorization:!0}).delete("".concat(i.b.CORE.TOPIC.GET_BY_ID.replace(":id",e)));if(200===t.status)return t.data}catch(t){return Promise.reject({code:t.code||503,status:t.status||"Service Unavailable",message:t.message})}}}}}]);