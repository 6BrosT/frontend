"use strict";(self.webpackChunkfrontend_app=self.webpackChunkfrontend_app||[]).push([[2407],{12407:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var o=n(47313),s=n(79536);const l={searchContainer:"styles_searchContainer__z7WgP",searchInput:"styles_searchInput__mm4w3",containerDetailSolution:"styles_containerDetailSolution__et12E",stickyBack:"styles_stickyBack__ageI3",backButton:"styles_backButton__Q57nc",backIcon:"styles_backIcon__k3QZq",solutionContainer:"styles_solutionContainer__Q2Rdo",userInfo:"styles_userInfo__xcSXt",imgAvatar:"styles_imgAvatar__HR+9r",nameInfoContainer:"styles_nameInfoContainer__7PYuA",solutionButton:"styles_solutionButton__KztC8",solutionIcon:"styles_solutionIcon__-N-Sw",upVote:"styles_upVote__SaJ5r",view:"styles_view__WFl7f",calendar:"styles_calendar__m57yT",tagLanguageSolution:"styles_tagLanguageSolution__YWOMZ",item:"styles_item__6FBz8",commentContainer:"styles_commentContainer__rmZhz",commentTitleContainer:"styles_commentTitleContainer__bpTPv",commentTitle:"styles_commentTitle__-FJn0",commentIcon:"styles_commentIcon__RzMxA",commentBox:"styles_commentBox__toj2a",textArea:"styles_textArea__SxuVi",commentButton:"styles_commentButton__Nw4-c",commentList:"styles_commentList__tligR",commentItem:"styles_commentItem__6r0wy",commentInfoUser:"styles_commentInfoUser__TEVE7",commentContent:"styles_commentContent__jgLGD",commentName:"styles_commentName__GTHZK",commentText:"styles_commentText__pdg+v",commentAction:"styles_commentAction__RCa8g",reply:"styles_reply__IPxig",stickyUpvote:"styles_stickyUpvote__mbKRu",upvoteButton:"styles_upvoteButton__afLv3",markdown:"styles_markdown__OBpHz"};var a=n(14647),i=n(42832),c=n(47131),r=n(16759),m=n(51405),d=n(19536),u=n(48119),_=n(85281),h=n(74312),v=n(80007),x=n(38037),j=n(10259),Z=n(39276),g=n(627),p=n(2126),y=n(11001),N=n(33223),b=n(86618),f=n(19187),k=n(47477),I=n(75590),C=n(51928),S=n(8344),w=n(60191),T=n(23885),B=n(15162),A=n(75627),z=n(62563),L=n(21933),P=n(22665),R=n(1229),U=n(58467),M=n(90469),O=n(29878),D=n(46417);const E=(e,t)=>{try{return void 0===e?e:(0,B.J$)(e,t)}catch(n){return console.error(n),e}};function F(e){var t,n,B,F,G,H,K,V,J,Q,W,X,q,Y,$;let{handleSolutionDetail:ee,selectedSolutionId:te}=e;const{t:ne}=(0,I.$G)(),oe=L.Ry().shape({comment:L.Z_().required("".concat(ne("detail_problem_discussion_detail_comment")," ").concat(ne("common_cannot_be_blank"))).test("not-blank","".concat(ne("detail_problem_discussion_detail_comment")," ").concat(ne("common_cannot_be_blank")),(e=>void 0!==e&&e.trim().length>0))}),se=(0,C.T)(),le=(0,R.Z)(),ae=(0,U.s0)(),[ie,ce]=(0,o.useState)(null),{problemId:re,courseId:me,lessonId:de}=(0,U.UO)(),[ue,_e]=(0,o.useState)(!1),[he,ve]=(0,o.useState)(0),[xe,je]=(0,o.useState)(1),[Ze,ge]=(0,o.useState)(0),[pe,ye]=(0,o.useState)([]),[Ne,be]=(0,o.useState)(!0),[fe,ke]=o.useState(null),[Ie,Ce]=o.useState(null),[Se,we]=(0,o.useState)(!1),Te=Boolean(fe),Be=()=>{ke(null)},Ae=Boolean(Ie);(0,o.useEffect)((()=>{te&&(se((0,S.K4)(!0)),w.T.getDetailSharedSolution(te).then((e=>{ce(e)})).catch((e=>console.log(e))).finally((()=>{se((0,S.K4)(!1))})))}),[]),(0,o.useEffect)((()=>{Ue()}),[Ne,he]);const{register:ze,handleSubmit:Le,watch:Pe,formState:{errors:Re}}=(0,A.cI)({resolver:(0,z.X)(oe)}),Ue=()=>{te&&(_e(!0),w.T.getRootComments(te,he,10,Ne).then((e=>{je(e.totalPages),ge(e.totalItems),ye(e.comments)})).catch((e=>console.log(e))).then((()=>{_e(!1)})))},Me=(0,o.useRef)(null),{height:Oe}=(0,k.Z)({ref:Me});return(0,D.jsxs)(s.Z,{className:l.containerDetailSolution,children:[(0,D.jsxs)(s.Z,{className:l.stickyBack,ref:Me,children:[(0,D.jsxs)(i.Z,{direction:"row",justifyContent:"space-between",children:[(0,D.jsxs)(s.Z,{onClick:ee,className:l.backButton,children:[(0,D.jsx)(a.Z,{className:l.backIcon}),(0,D.jsx)("span",{"translation-key":"common_back",children:ne("common_back")})]}),le.loggedUser.userId===(null===ie||void 0===ie?void 0:ie.user.id)&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(c.Z,{id:"edit-solution-button","aria-controls":Ae?"edit-solution-menu":void 0,"aria-haspopup":"true","aria-expanded":Ae?"true":void 0,onClick:e=>{Ce(e.currentTarget)},children:(0,D.jsx)(b.Z,{})}),(0,D.jsxs)(r.Z,{id:"edit-solution-menu","aria-labelledby":"edit-solution-button",anchorEl:Ie,open:Ae,onClose:()=>{Ce(null)},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,D.jsx)(m.Z,{onClick:()=>{re&&ae(M._.user.problem.solution.share.replace(":problemId",re),{state:{content:null===ie||void 0===ie?void 0:ie.content,title:null===ie||void 0===ie?void 0:ie.title,tags:null===ie||void 0===ie?void 0:ie.tags,edit:!0,solutionId:null===ie||void 0===ie?void 0:ie.sharedSolutionId}})},children:ne("common_edit")}),(0,D.jsx)(m.Z,{onClick:()=>we(!0),children:ne("common_remove")})]}),(0,D.jsx)(O.Z,{isOpen:Se,title:ne("dialog_confirm_delete_title"),description:ne("dialog_confirm_delete_shared_solution"),onCancel:()=>{we(!1)},onDelete:()=>{null!==ie&&void 0!==ie&&ie.sharedSolutionId&&w.T.deleteSharedSolution(ie.sharedSolutionId).then((e=>{ee()})).catch((e=>console.log(e))),we(!1)}})]})]}),(0,D.jsx)(d.Z,{})]}),(0,D.jsx)(s.Z,{className:l.solutionContainer,style:{height:"calc(100% - ".concat(Oe,"px)")},children:ie&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(s.Z,{className:l.solutionTitle,children:(0,D.jsx)(x.Z,{children:ie.title})}),(0,D.jsxs)(s.Z,{className:l.userInfo,children:[(0,D.jsx)(s.Z,{className:l.avatar,children:(0,D.jsx)(u.Z,{sx:{bgcolor:"".concat((0,P.M)("".concat(null===(t=ie.user)||void 0===t?void 0:t.firstName," ").concat(null===(n=ie.user)||void 0===n?void 0:n.lastName)))},alt:null===(B=ie.user)||void 0===B?void 0:B.firstName,src:null===(F=ie.user)||void 0===F?void 0:F.avatarUrl,children:null===(G=ie.user)||void 0===G?void 0:G.firstName.charAt(0)})}),(0,D.jsxs)(s.Z,{className:l.nameInfoContainer,children:[(0,D.jsx)(s.Z,{className:l.name,children:"vi"===T.ZP.language?"".concat(null!==(H=null===(K=ie.user)||void 0===K?void 0:K.lastName)&&void 0!==H?H:""," ").concat(null!==(V=null===(J=ie.user)||void 0===J?void 0:J.firstName)&&void 0!==V?V:""):"".concat(null!==(Q=null===(W=ie.user)||void 0===W?void 0:W.firstName)&&void 0!==Q?Q:""," ").concat(null!==(X=null===(q=ie.user)||void 0===q?void 0:q.lastName)&&void 0!==X?X:"")}),(0,D.jsxs)(s.Z,{className:l.solutionButton,children:[(0,D.jsxs)(s.Z,{className:l.view,children:[(0,D.jsx)(j.G,{icon:Z.Mdf,className:l.solutionIcon}),(0,D.jsx)(s.Z,{className:l.viewNumber,children:ie.totalView})]}),(0,D.jsxs)(s.Z,{className:l.calendar,children:[(0,D.jsx)(j.G,{icon:Z.fT7,className:l.solutionIcon}),(0,D.jsx)(s.Z,{className:l.calendarNumber,children:null!==(Y=E(ie.createdAt,T.ZP.language))&&void 0!==Y?Y:""})]})]})]})]}),(0,D.jsx)(s.Z,{className:l.tagLanguageSolution,children:ie.tags.map((e=>(0,D.jsx)(s.Z,{className:l.item,children:e.name},e.id)))}),(0,D.jsx)(s.Z,{"data-color-mode":"light",children:(0,D.jsx)(f.ZP.Markdown,{source:null!==($=ie.content)&&void 0!==$?$:"",className:l.markdown})}),(0,D.jsxs)(s.Z,{className:l.commentContainer,children:[(0,D.jsxs)(s.Z,{className:l.commentTitleContainer,children:[(0,D.jsxs)(s.Z,{className:l.commentTitle,children:[(0,D.jsx)(j.G,{icon:Z.lXL,className:l.commentIcon}),(0,D.jsx)(s.Z,{className:l.commentNumber,"translation-key":"detail_problem_discussion_detail_comment_count",children:ne("detail_problem_discussion_detail_comment_count",{commentNumber:Ze})})]}),(0,D.jsxs)(s.Z,{className:l.filterComment,children:[(0,D.jsx)(N.Z,{id:"newest-button",onClick:e=>{ke(e.currentTarget)},sx:{textTransform:"none"},children:(0,D.jsx)(v.Z,{"translation-key":Ne?"detail_problem_discussion_filter_newest":"detail_problem_discussion_filter_oldest",children:"".concat(ne("common_filter_by"),": ").concat(ne(Ne?"detail_problem_discussion_filter_newest":"detail_problem_discussion_filter_oldest"))})}),(0,D.jsxs)(r.Z,{id:"newest-menu","aria-labelledby":"newest-button",anchorEl:fe,open:Te,onClose:Be,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,D.jsx)(m.Z,{onClick:()=>{be(!0),Be()},children:ne("detail_problem_discussion_filter_newest")}),(0,D.jsx)(m.Z,{onClick:()=>{be(!1),Be()},children:ne("detail_problem_discussion_filter_oldest")})]})]})]}),(0,D.jsx)(s.Z,{className:l.commentBox,children:(0,D.jsxs)("form",{onSubmit:Le((e=>{null!==te&&w.T.createComment({sharedSolutionId:te,content:e.comment}).then((e=>{Ue()})).catch((e=>{console.log(e)}))})),children:[(0,D.jsx)(y.u,{"aria-label":"empty textarea","translation-key":"detail_problem_discussion_your_comment",placeholder:ne("detail_problem_discussion_your_comment"),className:l.textArea,minRows:5,...ze("comment"),"aria-invalid":!!Re.comment}),(0,D.jsx)(N.Z,{type:"submit",variant:"contained",className:l.commentButton,"translation-key":"detail_problem_discussion_detail_comment",children:ne("detail_problem_discussion_detail_comment")})]})}),Re.comment&&(0,D.jsx)(v.Z,{colorname:"--red-error",children:Re.comment.message}),(0,D.jsx)(s.Z,{className:l.commentList,children:(0,D.jsxs)(s.Z,{className:l.commentItem,children:[ue&&(0,D.jsx)(i.Z,{alignItems:"center",marginTop:1,children:(0,D.jsx)(_.Z,{})}),!ue&&pe.map((e=>{var t,n,o,a,i,c,r,m,_,h,v,x,j;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(s.Z,{className:l.commentInfo,children:[(0,D.jsxs)(s.Z,{className:l.commentInfoUser,children:[(0,D.jsx)(u.Z,{sx:{bgcolor:"".concat((0,P.M)("".concat(null===(t=e.user)||void 0===t?void 0:t.firstName," ").concat(null===(n=e.user)||void 0===n?void 0:n.lastName)))},alt:null===(o=e.user)||void 0===o?void 0:o.firstName,src:null===(a=e.user)||void 0===a?void 0:a.avatarUrl,children:null===(i=e.user)||void 0===i?void 0:i.firstName.charAt(0)}),(0,D.jsx)(s.Z,{className:l.commentName,children:"vi"===T.ZP.language?"".concat(null!==(c=null===(r=e.user)||void 0===r?void 0:r.lastName)&&void 0!==c?c:""," ").concat(null!==(m=null===(_=ie.user)||void 0===_?void 0:_.firstName)&&void 0!==m?m:""):"".concat(null!==(h=null===(v=e.user)||void 0===v?void 0:v.firstName)&&void 0!==h?h:""," ").concat(null!==(x=null===(j=e.user)||void 0===j?void 0:j.lastName)&&void 0!==x?x:"")})]}),(0,D.jsx)(s.Z,{className:l.commentText,children:(0,D.jsx)(g.U,{children:e.content,remarkPlugins:[p.Z]})})]},e.user.id),(0,D.jsx)(d.Z,{})]})})),(0,D.jsx)(i.Z,{alignItems:"center",children:(0,D.jsx)(h.Z,{count:xe,onChange:(e,t)=>{ve(t-1)},page:he+1})})]})})]})]})})]})}},14647:(e,t,n)=>{var o=n(64836);t.Z=void 0;var s=o(n(45045)),l=n(46417);t.Z=(0,s.default)((0,l.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},86618:(e,t,n)=>{var o=n(64836);t.Z=void 0;var s=o(n(45045)),l=n(46417);t.Z=(0,s.default)((0,l.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz")}}]);